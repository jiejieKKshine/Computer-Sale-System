{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _toConsumableArray } from '../../_chunks/dep-4a990ea3.mjs';\nimport { _ as _typeof } from '../../_chunks/dep-4659d73b.mjs';\nimport { _ as _defineProperty } from '../../_chunks/dep-fa52aa21.mjs';\nimport { _ as _slicedToArray } from '../../_chunks/dep-5efe53d1.mjs';\nimport { toRefs, ref, computed, watch, createVNode, mergeProps } from 'vue';\nimport { i as intersection_1 } from '../../_chunks/dep-64c2053b.mjs';\nimport { g as get_1 } from '../../_chunks/dep-ae202bc0.mjs';\nimport { i as isFunction_1 } from '../../_chunks/dep-06dcbf4c.mjs';\nimport useDefaultValue from '../../hooks/useDefaultValue.mjs';\nimport { isRowSelectedDisabled } from '../../_common/js/table/utils.mjs';\nimport { Checkbox } from '../../checkbox/index.mjs';\nimport { Radio } from '../../radio/index.mjs';\nimport '../../_common/js/log/index.mjs';\nimport log from '../../_common/js/log/log.mjs';\nimport '../../_chunks/dep-593f2b67.mjs';\nimport '../../_chunks/dep-eca422c3.mjs';\nimport '../../_chunks/dep-7932c2e8.mjs';\nimport '../../_chunks/dep-bf7257e7.mjs';\nimport '../../_chunks/dep-eae2a67e.mjs';\nimport '../../_chunks/dep-626c497d.mjs';\nimport '../../_chunks/dep-ab4bb9b8.mjs';\nimport '../../_chunks/dep-29ef8419.mjs';\nimport '../../_chunks/dep-4d4e2af1.mjs';\nimport '../../_chunks/dep-6ab5363f.mjs';\nimport '../../_chunks/dep-6dc3d0e1.mjs';\nimport '../../_chunks/dep-76958824.mjs';\nimport '../../_chunks/dep-2b09875b.mjs';\nimport '../../_chunks/dep-cda4f568.mjs';\nimport '../../_chunks/dep-e9841b9e.mjs';\nimport '../../_chunks/dep-3c4e4325.mjs';\nimport '../../_chunks/dep-f5579c03.mjs';\nimport '../../_chunks/dep-e065dc25.mjs';\nimport '../../_chunks/dep-cc8ebcde.mjs';\nimport '../../_chunks/dep-400ec705.mjs';\nimport '../../_chunks/dep-02f9394e.mjs';\nimport '../../_chunks/dep-b5bf85f5.mjs';\nimport '../../_chunks/dep-aeaef131.mjs';\nimport '../../_chunks/dep-bad871d5.mjs';\nimport '../../_chunks/dep-5a17bf21.mjs';\nimport '../../_chunks/dep-889e457b.mjs';\nimport '../../checkbox/checkbox.mjs';\nimport '../../_chunks/dep-03a7fb6c.mjs';\nimport '../../checkbox/props.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-bb899bfd.mjs';\nimport '../../_chunks/dep-5922c8f3.mjs';\nimport '../../_chunks/dep-92f86d1d.mjs';\nimport '../../_chunks/dep-1a4bb2f2.mjs';\nimport '../../_chunks/dep-49aeee3c.mjs';\nimport '../../_chunks/dep-3c65fae8.mjs';\nimport '../../_chunks/dep-ec0bbd9f.mjs';\nimport '../../_chunks/dep-1b78414a.mjs';\nimport '../../_chunks/dep-d84f19b3.mjs';\nimport '../../_chunks/dep-732f0b7d.mjs';\nimport '../../_chunks/dep-1b9718a2.mjs';\nimport '../../_chunks/dep-1725b1c7.mjs';\nimport '../../_chunks/dep-532409c5.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-9ed7da3e.mjs';\nimport '../../_chunks/dep-7f65fc46.mjs';\nimport '../../_chunks/dep-4f2cabb0.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/tnode.mjs';\nimport '../../_chunks/dep-03ad9cda.mjs';\nimport '../../_chunks/dep-d8a34055.mjs';\nimport '../../_chunks/dep-2f6e28a0.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-b91a8171.mjs';\nimport '../../checkbox/constants.mjs';\nimport '../../checkbox/hooks/useCheckboxLazyLoad.mjs';\nimport '../../_common/js/utils/observe.mjs';\nimport '../../checkbox/hooks/useKeyboardEvent.mjs';\nimport '../../_common/js/common.mjs';\nimport '../../hooks/useDisabled.mjs';\nimport '../../_chunks/dep-df472119.mjs';\nimport '../../hooks/useReadonly.mjs';\nimport '../../checkbox/group.mjs';\nimport '../../_chunks/dep-58a62202.mjs';\nimport '../../checkbox/checkbox-group-props.mjs';\nimport '../../hooks/slot.mjs';\nimport '../../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../../checkbox/type.mjs';\nimport '../../radio/radio.mjs';\nimport '../../utils/helper.mjs';\nimport '../../_chunks/dep-5d3f7c0e.mjs';\nimport '../../_chunks/dep-73384992.mjs';\nimport '../../radio/props.mjs';\nimport '../../radio/constants.mjs';\nimport '../../radio/group.mjs';\nimport '../../_chunks/dep-0d047dce.mjs';\nimport '../../_chunks/dep-d2f4e062.mjs';\nimport '../../_chunks/dep-525a54df.mjs';\nimport '../../_chunks/dep-5993931e.mjs';\nimport '../../_chunks/dep-8dfc9324.mjs';\nimport '../../radio/radio-group-props.mjs';\nimport '../../radio/useKeyboard.mjs';\nimport '../../utils/dom.mjs';\nimport '../../utils/easing.mjs';\nimport '../../watermark/hooks.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../radio/radio-button.mjs';\nimport '../../radio/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction useRowSelect(props, tableSelectedClasses) {\n  var _toRefs = toRefs(props),\n    selectedRowKeys = _toRefs.selectedRowKeys,\n    columns = _toRefs.columns,\n    rowKey = _toRefs.rowKey,\n    data = _toRefs.data,\n    reserveSelectedRowOnPaginate = _toRefs.reserveSelectedRowOnPaginate;\n  var currentPaginateData = ref(data.value);\n  var selectedRowClassNames = ref();\n  var _useDefaultValue = useDefaultValue(selectedRowKeys, props.defaultSelectedRowKeys || [], props.onSelectChange, \"selectedRowKeys\"),\n    _useDefaultValue2 = _slicedToArray(_useDefaultValue, 2),\n    tSelectedRowKeys = _useDefaultValue2[0],\n    setTSelectedRowKeys = _useDefaultValue2[1];\n  var selectedRowDataMap = ref(/* @__PURE__ */new Map());\n  var selectColumn = computed(function () {\n    return props.columns.find(function (_ref) {\n      var type = _ref.type;\n      return [\"multiple\", \"single\"].includes(type);\n    });\n  });\n  var selectionType = computed(function () {\n    var _selectColumn$value;\n    return props.rowSelectionType || ((_selectColumn$value = selectColumn.value) === null || _selectColumn$value === void 0 ? void 0 : _selectColumn$value.type) || \"single\";\n  });\n  var canSelectedRows = computed(function () {\n    var currentData = reserveSelectedRowOnPaginate.value ? data.value : currentPaginateData.value;\n    return currentData.filter(function (row, rowIndex) {\n      return !isDisabled(row, rowIndex);\n    });\n  });\n  var intersectionKeys = computed(function () {\n    return intersection_1(tSelectedRowKeys.value, canSelectedRows.value.map(function (t) {\n      return get_1(t, props.rowKey || \"id\");\n    }));\n  });\n  var allowUncheck = computed(function () {\n    var _selectColumn$value2;\n    if (props.rowSelectionAllowUncheck) return true;\n    var singleSelectCol = selectionType.value === \"single\";\n    if (!singleSelectCol || !selectColumn.value || !(\"allowUncheck\" in ((_selectColumn$value2 = selectColumn.value) === null || _selectColumn$value2 === void 0 ? void 0 : _selectColumn$value2.checkProps))) return false;\n    return selectColumn.value.checkProps.allowUncheck;\n  });\n  watch([data, columns, tSelectedRowKeys, selectColumn, rowKey], function () {\n    var _selectColumn$value3;\n    var disabledRowFunc = function disabledRowFunc(p) {\n      return selectColumn.value.disabled(p) ? tableSelectedClasses.disabled : \"\";\n    };\n    var disabledRowClass = (_selectColumn$value3 = selectColumn.value) !== null && _selectColumn$value3 !== void 0 && _selectColumn$value3.disabled ? disabledRowFunc : void 0;\n    var selected = new Set(tSelectedRowKeys.value);\n    var selectedRowClassFunc = function selectedRowClassFunc(_ref2) {\n      var row = _ref2.row;\n      var rowId = get_1(row, props.rowKey || \"id\");\n      return selected.has(rowId) ? tableSelectedClasses.selected : \"\";\n    };\n    var selectedRowClass = selected.size ? selectedRowClassFunc : void 0;\n    selectedRowClassNames.value = [disabledRowClass, selectedRowClass];\n    currentPaginateData.value = data.value;\n  }, {\n    immediate: true\n  });\n  function isDisabled(row, rowIndex) {\n    return isRowSelectedDisabled(selectColumn.value, row, rowIndex);\n  }\n  function getSelectedHeader() {\n    return function () {\n      var isIndeterminate = intersectionKeys.value.length > 0 && intersectionKeys.value.length < canSelectedRows.value.length;\n      var isChecked = intersectionKeys.value.length !== 0 && canSelectedRows.value.length !== 0 && intersectionKeys.value.length === canSelectedRows.value.length;\n      return createVNode(Checkbox, {\n        \"checked\": isChecked,\n        \"indeterminate\": isIndeterminate,\n        \"disabled\": !canSelectedRows.value.length,\n        \"onChange\": handleSelectAll\n      }, null);\n    };\n  }\n  function getRowSelectDisabledData(p) {\n    var col = p.col,\n      row = p.row,\n      rowIndex = p.rowIndex;\n    var disabled = isFunction_1(col.disabled) ? col.disabled({\n      row: row,\n      rowIndex: rowIndex\n    }) : col.disabled;\n    var checkProps = isFunction_1(col.checkProps) ? col.checkProps({\n      row: row,\n      rowIndex: rowIndex\n    }) : col.checkProps;\n    return {\n      disabled: disabled || (checkProps === null || checkProps === void 0 ? void 0 : checkProps.disabled),\n      checkProps: checkProps\n    };\n  }\n  function renderSelectCell(p) {\n    var column = p.col,\n      _p$row = p.row,\n      row = _p$row === void 0 ? {} : _p$row;\n    var checked = tSelectedRowKeys.value.includes(get_1(row, props.rowKey || \"id\"));\n    var _getRowSelectDisabled = getRowSelectDisabledData(p),\n      disabled = _getRowSelectDisabled.disabled,\n      checkProps = _getRowSelectDisabled.checkProps;\n    var selectBoxProps = _objectSpread(_objectSpread({\n      checked: checked,\n      disabled: disabled\n    }, checkProps), {}, {\n      onClick: function onClick(e) {\n        if (_typeof(e) === \"object\" && \"e\" in e) {\n          var _e$e;\n          (_e$e = e.e) === null || _e$e === void 0 || _e$e.stopPropagation();\n        } else {\n          e === null || e === void 0 || e.stopPropagation();\n        }\n      },\n      onChange: function onChange() {\n        return handleSelectChange(row);\n      }\n    });\n    if (column.type === \"single\") return createVNode(Radio, selectBoxProps, null);\n    if (column.type === \"multiple\") {\n      var _props$indeterminateS;\n      var isIndeterminate = (_props$indeterminateS = props.indeterminateSelectedRowKeys) !== null && _props$indeterminateS !== void 0 && _props$indeterminateS.length ? props.indeterminateSelectedRowKeys.includes(get_1(row, props.rowKey)) : false;\n      return createVNode(Checkbox, mergeProps({\n        \"indeterminate\": isIndeterminate\n      }, selectBoxProps), null);\n    }\n    return null;\n  }\n  function handleSelectChange() {\n    var row = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var selectedRowKeys2 = _toConsumableArray(tSelectedRowKeys.value);\n    var reRowKey = props.rowKey || \"id\";\n    var id = get_1(row, reRowKey);\n    var selectedRowIndex = selectedRowKeys2.indexOf(id);\n    var isExisted = selectedRowIndex !== -1;\n    if (selectionType.value === \"multiple\") {\n      isExisted ? selectedRowKeys2.splice(selectedRowIndex, 1) : selectedRowKeys2.push(id);\n    } else if (selectionType.value === \"single\") {\n      selectedRowKeys2 = isExisted && allowUncheck.value ? [] : [id];\n    } else {\n      log.warn(\"Table\", \"`column.type` must be one of `multiple` and `single`\");\n      return;\n    }\n    setTSelectedRowKeys(selectedRowKeys2, {\n      selectedRowData: selectedRowKeys2.map(function (t) {\n        return selectedRowDataMap.value.get(t);\n      }),\n      currentRowKey: id,\n      currentRowData: row,\n      type: isExisted ? \"uncheck\" : \"check\"\n    });\n  }\n  function handleSelectAll(checked) {\n    var _selectedRowKeys$valu;\n    var reRowKey = props.rowKey || \"id\";\n    var canSelectedRowKeys = canSelectedRows.value.map(function (record) {\n      return get_1(record, reRowKey);\n    });\n    var disabledSelectedRowKeys = ((_selectedRowKeys$valu = selectedRowKeys.value) === null || _selectedRowKeys$valu === void 0 ? void 0 : _selectedRowKeys$valu.filter(function (id) {\n      return !canSelectedRowKeys.includes(id);\n    })) || [];\n    var allIds = checked ? [].concat(_toConsumableArray(disabledSelectedRowKeys), _toConsumableArray(canSelectedRowKeys)) : _toConsumableArray(disabledSelectedRowKeys);\n    setTSelectedRowKeys(allIds, {\n      selectedRowData: checked ? allIds.map(function (t) {\n        return selectedRowDataMap.value.get(t);\n      }) : [],\n      type: checked ? \"check\" : \"uncheck\",\n      currentRowKey: \"CHECK_ALL_BOX\"\n    });\n  }\n  function formatToRowSelectColumn(col) {\n    var isSelection = [\"multiple\", \"single\"].includes(col.type);\n    if (!isSelection) return col;\n    return _objectSpread(_objectSpread({}, col), {}, {\n      width: col.width || 64,\n      className: [tableSelectedClasses.checkCell, col.className],\n      cell: function cell(_, p) {\n        return renderSelectCell(p);\n      },\n      title: col.type === \"multiple\" ? getSelectedHeader() : col.title\n    });\n  }\n  var onInnerSelectRowClick = function onInnerSelectRowClick(_ref3) {\n    var row = _ref3.row,\n      index = _ref3.index;\n    var selectedColIndex = props.columns.findIndex(function (item) {\n      return item.colKey === \"row-select\";\n    });\n    var disabled = false;\n    if (selectedColIndex !== -1) {\n      var _getRowSelectDisabled2;\n      disabled = (_getRowSelectDisabled2 = getRowSelectDisabledData({\n        row: row,\n        rowIndex: index,\n        col: props.columns[selectedColIndex],\n        colIndex: selectedColIndex\n      })) === null || _getRowSelectDisabled2 === void 0 ? void 0 : _getRowSelectDisabled2.disabled;\n    }\n    if (disabled) return;\n    handleSelectChange(row);\n  };\n  watch([data, rowKey], function () {\n    for (var i = 0, len = data.value.length; i < len; i++) {\n      selectedRowDataMap.value.set(get_1(data.value[i], rowKey.value || \"id\"), data.value[i]);\n    }\n  }, {\n    immediate: true\n  });\n  var showRowSelect = computed(function () {\n    return Boolean(selectColumn.value || props.selectOnRowClick || props.selectedRowKeys);\n  });\n  var clearAllSelectedRowKeys = function clearAllSelectedRowKeys() {\n    setTSelectedRowKeys([], {\n      selectedRowData: [],\n      currentRowKey: void 0,\n      currentRowData: void 0,\n      type: \"uncheck\"\n    });\n  };\n  var handleRowSelectWithAreaSelection = function handleRowSelectWithAreaSelection(_ref4) {\n    var activeRowList = _ref4.activeRowList,\n      action = _ref4.action;\n    if (!showRowSelect.value) return;\n    if (action === \"clear\") {\n      clearAllSelectedRowKeys();\n      return;\n    }\n    if (action === \"select-all\") {\n      handleSelectAll(true);\n      return;\n    }\n    if (selectionType.value === \"single\") {\n      if (action === \"space-one-selection\") {\n        handleSelectChange(activeRowList[0].row);\n      }\n      return;\n    }\n    var validAreaSelection = activeRowList.filter(function (_ref5) {\n      var row = _ref5.row,\n        rowIndex = _ref5.rowIndex;\n      return !getRowSelectDisabledData({\n        row: row,\n        rowIndex: rowIndex,\n        col: selectColumn.value,\n        colIndex: void 0\n      }).disabled;\n    });\n    if (!validAreaSelection.length) return;\n    var areaSelectionKeys = validAreaSelection.map(function (_ref6) {\n      var row = _ref6.row;\n      return get_1(row, props.rowKey);\n    });\n    var intersectionKeys2 = intersection_1(tSelectedRowKeys.value, areaSelectionKeys);\n    var toCheck = intersectionKeys2.length !== areaSelectionKeys.length;\n    var clearedKeys = tSelectedRowKeys.value.filter(function (key) {\n      return !areaSelectionKeys.includes(key);\n    });\n    var newSelectedRowKeys = toCheck ? _toConsumableArray(new Set(tSelectedRowKeys.value.concat(areaSelectionKeys))) : clearedKeys;\n    var currentRowData = action === \"space-one-selection\" ? activeRowList[0].row : void 0;\n    setTSelectedRowKeys(newSelectedRowKeys, {\n      selectedRowData: activeRowList,\n      currentRowKey: get_1(currentRowData, props.rowKey),\n      currentRowData: currentRowData,\n      type: toCheck ? \"check\" : \"uncheck\"\n    });\n  };\n  return {\n    selectColumn: selectColumn,\n    showRowSelect: showRowSelect,\n    selectedRowClassNames: selectedRowClassNames,\n    currentPaginateData: currentPaginateData,\n    setTSelectedRowKeys: setTSelectedRowKeys,\n    formatToRowSelectColumn: formatToRowSelectColumn,\n    onInnerSelectRowClick: onInnerSelectRowClick,\n    handleRowSelectWithAreaSelection: handleRowSelectWithAreaSelection\n  };\n}\nexport { useRowSelect as default };","map":{"version":3,"names":["useRowSelect","props","tableSelectedClasses","_toRefs","toRefs","selectedRowKeys","columns","rowKey","data","reserveSelectedRowOnPaginate","currentPaginateData","ref","value","selectedRowClassNames","_useDefaultValue","useDefaultValue","defaultSelectedRowKeys","onSelectChange","_useDefaultValue2","_slicedToArray","tSelectedRowKeys","setTSelectedRowKeys","selectedRowDataMap","Map","selectColumn","computed","find","_ref","type","includes","selectionType","_selectColumn$value","rowSelectionType","canSelectedRows","currentData","filter","row","rowIndex","isDisabled","intersectionKeys","intersection_1","map","t","get_1","allowUncheck","_selectColumn$value2","rowSelectionAllowUncheck","singleSelectCol","checkProps","watch","_selectColumn$value3","disabledRowFunc","p","disabled","disabledRowClass","selected","Set","selectedRowClassFunc","_ref2","rowId","has","selectedRowClass","size","immediate","isRowSelectedDisabled","getSelectedHeader","isIndeterminate","length","isChecked","createVNode","Checkbox","handleSelectAll","getRowSelectDisabledData","col","isFunction_1","renderSelectCell","column","_p$row","checked","_getRowSelectDisabled","selectBoxProps","_objectSpread","onClick","e","_typeof","_e$e","stopPropagation","onChange","handleSelectChange","Radio","_props$indeterminateS","indeterminateSelectedRowKeys","mergeProps","arguments","undefined","selectedRowKeys2","_toConsumableArray","reRowKey","id","selectedRowIndex","indexOf","isExisted","splice","push","log","warn","selectedRowData","get","currentRowKey","currentRowData","_selectedRowKeys$valu","canSelectedRowKeys","record","disabledSelectedRowKeys","allIds","concat","formatToRowSelectColumn","isSelection","width","className","checkCell","cell","_","title","onInnerSelectRowClick","_ref3","index","selectedColIndex","findIndex","item","colKey","_getRowSelectDisabled2","colIndex","i","len","set","showRowSelect","Boolean","selectOnRowClick","clearAllSelectedRowKeys","handleRowSelectWithAreaSelection","_ref4","activeRowList","action","validAreaSelection","_ref5","areaSelectionKeys","_ref6","intersectionKeys2","toCheck","clearedKeys","key","newSelectedRowKeys"],"sources":["../../../src/table/hooks/useRowSelect.tsx"],"sourcesContent":["/**\n * 行选中相关功能：单选 + 多选\n */\nimport { computed, toRefs, h, ref, watch } from 'vue';\nimport intersection from 'lodash/intersection';\nimport get from 'lodash/get';\nimport isFunction from 'lodash/isFunction';\nimport useDefaultValue from '../../hooks/useDefaultValue';\nimport {\n  ActiveRowActionContext,\n  PrimaryTableCellParams,\n  PrimaryTableCol,\n  RowClassNameParams,\n  TableRowData,\n  TdPrimaryTableProps,\n} from '../type';\nimport { isRowSelectedDisabled } from '../../_common/js/table/utils';\nimport { TableClassName } from './useClassName';\nimport Checkbox from '../../checkbox';\nimport Radio from '../../radio';\nimport log from '../../_common/js/log';\n\nexport default function useRowSelect(\n  props: TdPrimaryTableProps,\n  tableSelectedClasses: TableClassName['tableSelectedClasses'],\n) {\n  const { selectedRowKeys, columns, rowKey, data, reserveSelectedRowOnPaginate } = toRefs(props);\n  const currentPaginateData = ref<TableRowData[]>(data.value);\n  const selectedRowClassNames = ref();\n  const [tSelectedRowKeys, setTSelectedRowKeys] = useDefaultValue(\n    selectedRowKeys,\n    props.defaultSelectedRowKeys || [],\n    props.onSelectChange,\n    'selectedRowKeys',\n  );\n  const selectedRowDataMap = ref(new Map<string | number, TableRowData>());\n  const selectColumn = computed(() => props.columns.find(({ type }) => ['multiple', 'single'].includes(type)));\n  const selectionType = computed(() => props.rowSelectionType || selectColumn.value?.type || 'single');\n  const canSelectedRows = computed(() => {\n    const currentData = reserveSelectedRowOnPaginate.value ? data.value : currentPaginateData.value;\n    return currentData.filter((row, rowIndex): boolean => !isDisabled(row, rowIndex));\n  });\n  // 选中的行，和所有可以选择的行，交集，用于计算 isSelectedAll 和 isIndeterminate\n  const intersectionKeys = computed(() =>\n    intersection(\n      tSelectedRowKeys.value,\n      canSelectedRows.value.map((t) => get(t, props.rowKey || 'id')),\n    ),\n  );\n\n  const allowUncheck = computed(() => {\n    if (props.rowSelectionAllowUncheck) return true;\n    const singleSelectCol = selectionType.value === 'single';\n    if (!singleSelectCol || !selectColumn.value || !('allowUncheck' in selectColumn.value?.checkProps)) return false;\n    return selectColumn.value.checkProps.allowUncheck;\n  });\n\n  watch(\n    [data, columns, tSelectedRowKeys, selectColumn, rowKey],\n    () => {\n      const disabledRowFunc = (p: RowClassNameParams<TableRowData>) =>\n        selectColumn.value.disabled(p) ? tableSelectedClasses.disabled : '';\n      const disabledRowClass = selectColumn.value?.disabled ? disabledRowFunc : undefined;\n      const selected = new Set(tSelectedRowKeys.value);\n      const selectedRowClassFunc = ({ row }: RowClassNameParams<TableRowData>) => {\n        const rowId = get(row, props.rowKey || 'id');\n        return selected.has(rowId) ? tableSelectedClasses.selected : '';\n      };\n      const selectedRowClass = selected.size ? selectedRowClassFunc : undefined;\n      selectedRowClassNames.value = [disabledRowClass, selectedRowClass];\n      currentPaginateData.value = data.value;\n    },\n    { immediate: true },\n  );\n\n  function isDisabled(row: Record<string, any>, rowIndex: number): boolean {\n    return isRowSelectedDisabled(selectColumn.value, row, rowIndex);\n  }\n\n  function getSelectedHeader() {\n    return () => {\n      const isIndeterminate =\n        intersectionKeys.value.length > 0 && intersectionKeys.value.length < canSelectedRows.value.length;\n      const isChecked =\n        intersectionKeys.value.length !== 0 &&\n        canSelectedRows.value.length !== 0 &&\n        intersectionKeys.value.length === canSelectedRows.value.length;\n      return (\n        <Checkbox\n          checked={isChecked}\n          indeterminate={isIndeterminate}\n          disabled={!canSelectedRows.value.length}\n          onChange={handleSelectAll}\n        />\n      );\n    };\n  }\n\n  function getRowSelectDisabledData(p: PrimaryTableCellParams<TableRowData>) {\n    const { col, row, rowIndex } = p;\n    const disabled: boolean = isFunction(col.disabled) ? col.disabled({ row, rowIndex }) : col.disabled;\n    const checkProps = isFunction(col.checkProps) ? col.checkProps({ row, rowIndex }) : col.checkProps;\n    return {\n      disabled: disabled || checkProps?.disabled,\n      checkProps,\n    };\n  }\n\n  function renderSelectCell(p: PrimaryTableCellParams<TableRowData>) {\n    const { col: column, row = {} } = p;\n    const checked = tSelectedRowKeys.value.includes(get(row, props.rowKey || 'id'));\n    const { disabled, checkProps } = getRowSelectDisabledData(p);\n    const selectBoxProps: Object = {\n      checked,\n      disabled,\n      ...checkProps,\n      // 兼容处理不同的参数\n      onClick: (e: MouseEvent | { e: MouseEvent }) => {\n        // 选中行功能中，点击 checkbox/radio 需阻止事件冒泡，避免触发不必要的 onRowClick\n        if (typeof e === 'object' && 'e' in e) {\n          e.e?.stopPropagation();\n        } else {\n          e?.stopPropagation();\n        }\n      },\n      onChange: () => handleSelectChange(row),\n    };\n    if (column.type === 'single') return <Radio {...selectBoxProps} />;\n    if (column.type === 'multiple') {\n      const isIndeterminate = props.indeterminateSelectedRowKeys?.length\n        ? props.indeterminateSelectedRowKeys.includes(get(row, props.rowKey))\n        : false;\n      return <Checkbox indeterminate={isIndeterminate} {...selectBoxProps} />;\n    }\n    return null;\n  }\n\n  function handleSelectChange(row: TableRowData = {}) {\n    let selectedRowKeys = [...tSelectedRowKeys.value];\n    const reRowKey = props.rowKey || 'id';\n    const id = get(row, reRowKey);\n    const selectedRowIndex = selectedRowKeys.indexOf(id);\n    const isExisted = selectedRowIndex !== -1;\n    if (selectionType.value === 'multiple') {\n      isExisted ? selectedRowKeys.splice(selectedRowIndex, 1) : selectedRowKeys.push(id);\n    } else if (selectionType.value === 'single') {\n      selectedRowKeys = isExisted && allowUncheck.value ? [] : [id];\n    } else {\n      log.warn('Table', '`column.type` must be one of `multiple` and `single`');\n      return;\n    }\n    setTSelectedRowKeys(selectedRowKeys, {\n      selectedRowData: selectedRowKeys.map((t) => selectedRowDataMap.value.get(t)),\n      currentRowKey: id,\n      currentRowData: row,\n      type: isExisted ? 'uncheck' : 'check',\n    });\n  }\n\n  function handleSelectAll(checked: boolean) {\n    const reRowKey = props.rowKey || 'id';\n    const canSelectedRowKeys = canSelectedRows.value.map((record) => get(record, reRowKey));\n    const disabledSelectedRowKeys = selectedRowKeys.value?.filter((id) => !canSelectedRowKeys.includes(id)) || [];\n    const allIds = checked ? [...disabledSelectedRowKeys, ...canSelectedRowKeys] : [...disabledSelectedRowKeys];\n    setTSelectedRowKeys(allIds, {\n      selectedRowData: checked ? allIds.map((t) => selectedRowDataMap.value.get(t)) : [],\n      type: checked ? 'check' : 'uncheck',\n      currentRowKey: 'CHECK_ALL_BOX',\n    });\n  }\n\n  function formatToRowSelectColumn(col: PrimaryTableCol) {\n    const isSelection = ['multiple', 'single'].includes(col.type);\n    if (!isSelection) return col;\n    return {\n      ...col,\n      width: col.width || 64,\n      className: [tableSelectedClasses.checkCell, col.className],\n      cell: (_: typeof h, p: PrimaryTableCellParams<TableRowData>) => renderSelectCell(p),\n      title: col.type === 'multiple' ? getSelectedHeader() : col.title,\n    };\n  }\n\n  const onInnerSelectRowClick: TdPrimaryTableProps['onRowClick'] = ({ row, index }) => {\n    const selectedColIndex = props.columns.findIndex((item) => item.colKey === 'row-select');\n    let disabled = false;\n    if (selectedColIndex !== -1) {\n      disabled = getRowSelectDisabledData({\n        row,\n        rowIndex: index,\n        col: props.columns[selectedColIndex],\n        colIndex: selectedColIndex,\n      })?.disabled;\n    }\n    if (disabled) return;\n    handleSelectChange(row);\n  };\n\n  watch(\n    [data, rowKey],\n    () => {\n      for (let i = 0, len = data.value.length; i < len; i++) {\n        selectedRowDataMap.value.set(get(data.value[i], rowKey.value || 'id'), data.value[i]);\n      }\n    },\n    { immediate: true },\n  );\n\n  // 是否开启了行选中功能\n  const showRowSelect = computed(() => Boolean(selectColumn.value || props.selectOnRowClick || props.selectedRowKeys));\n\n  const clearAllSelectedRowKeys = () => {\n    setTSelectedRowKeys([], {\n      selectedRowData: [],\n      currentRowKey: undefined,\n      currentRowData: undefined,\n      type: 'uncheck',\n    });\n  };\n\n  const handleRowSelectWithAreaSelection = ({ activeRowList, action }: ActiveRowActionContext<TableRowData>) => {\n    if (!showRowSelect.value) return;\n\n    if (action === 'clear') {\n      clearAllSelectedRowKeys();\n      return;\n    }\n\n    if (action === 'select-all') {\n      handleSelectAll(true);\n      return;\n    }\n\n    if (selectionType.value === 'single') {\n      if (action === 'space-one-selection') {\n        handleSelectChange(activeRowList[0].row);\n      }\n      return;\n    }\n\n    const validAreaSelection = activeRowList.filter(\n      ({ row, rowIndex }) =>\n        !getRowSelectDisabledData({\n          row,\n          rowIndex,\n          col: selectColumn.value,\n          colIndex: undefined,\n        }).disabled,\n    );\n    if (!validAreaSelection.length) return;\n\n    const areaSelectionKeys = validAreaSelection.map(({ row }) => get(row, props.rowKey));\n    const intersectionKeys = intersection(tSelectedRowKeys.value, areaSelectionKeys);\n    const toCheck = intersectionKeys.length !== areaSelectionKeys.length;\n    const clearedKeys = tSelectedRowKeys.value.filter((key) => !areaSelectionKeys.includes(key));\n    const newSelectedRowKeys = toCheck ? [...new Set(tSelectedRowKeys.value.concat(areaSelectionKeys))] : clearedKeys;\n\n    const currentRowData = action === 'space-one-selection' ? activeRowList[0].row : undefined;\n    setTSelectedRowKeys(newSelectedRowKeys, {\n      selectedRowData: activeRowList,\n      currentRowKey: get(currentRowData, props.rowKey),\n      currentRowData,\n      type: toCheck ? 'check' : 'uncheck',\n    });\n  };\n\n  return {\n    selectColumn,\n    showRowSelect,\n    selectedRowClassNames,\n    currentPaginateData,\n    setTSelectedRowKeys,\n    formatToRowSelectColumn,\n    onInnerSelectRowClick,\n    handleRowSelectWithAreaSelection,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}