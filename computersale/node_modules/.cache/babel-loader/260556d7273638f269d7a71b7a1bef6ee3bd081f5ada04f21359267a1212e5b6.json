{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _objectWithoutProperties } from '../_chunks/dep-5d3f7c0e.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { toRefs, ref, computed, createVNode, mergeProps } from 'vue';\nimport { i as isObject_1 } from '../_chunks/dep-2b09875b.mjs';\nimport { p as pick_1 } from '../_chunks/dep-4de7e2ca.mjs';\nimport { Input } from '../input/index.mjs';\nimport { Loading } from '../loading/index.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport useDefaultValue from '../hooks/useDefaultValue.mjs';\nimport { useDisabled } from '../hooks/useDisabled.mjs';\nimport { useReadonly } from '../hooks/useReadonly.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-aeaef131.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-0e581ac0.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-69e0f6fc.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-4ec29b23.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../input/input.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../input/props.mjs';\nimport '../hooks/useGlobalIcon.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../input/useInput.mjs';\nimport '../form/const.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/slot.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useVModel.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../input/useLengthLimit.mjs';\nimport '../_common/js/log/index.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-4a990ea3.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../_chunks/dep-889e457b.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../input/useInputEventHandler.mjs';\nimport '../input/useInputWidth.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../input/input-group.mjs';\nimport '../input/input-group-props.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../input/type.mjs';\nimport '../_chunks/dep-bff7e93a.mjs';\nimport '../_chunks/dep-0b414bea.mjs';\nimport '../_chunks/dep-4d4e2af1.mjs';\nimport '../_chunks/dep-fbd4eddb.mjs';\nimport '../_chunks/dep-ae202bc0.mjs';\nimport '../_chunks/dep-ea20409b.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../loading/props.mjs';\nimport '../hooks/useTeleport.mjs';\nimport '../loading/type.mjs';\nvar _excluded = [\"tips\"];\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar COMMON_PROPERTIES = [\"status\", \"clearable\", \"disabled\", \"label\", \"placeholder\", \"readonly\", \"prefixIcon\", \"suffix\", \"suffixIcon\", \"onPaste\", \"onMouseenter\", \"onMouseleave\", \"size\", \"autofocus\"];\nvar DEFAULT_KEYS = {\n  label: \"label\",\n  value: \"value\",\n  children: \"children\"\n};\nfunction getInputValue(value, keys) {\n  var iKeys = _objectSpread(_objectSpread({}, DEFAULT_KEYS), keys);\n  return isObject_1(value) ? value[iKeys.label] : value;\n}\nfunction useSingle(props, context, popupRef) {\n  var _props$defaultInputVa;\n  var _toRefs = toRefs(props),\n    value = _toRefs.value,\n    keys = _toRefs.keys,\n    propsInputValue = _toRefs.inputValue;\n  var classPrefix = usePrefixClass();\n  var isSingleFocus = ref(props.autofocus);\n  var inputRef = ref();\n  var _useDefaultValue = useDefaultValue(propsInputValue, (_props$defaultInputVa = props.defaultInputValue) !== null && _props$defaultInputVa !== void 0 ? _props$defaultInputVa : \"\", props.onInputChange, \"inputValue\"),\n    _useDefaultValue2 = _slicedToArray(_useDefaultValue, 2),\n    inputValue = _useDefaultValue2[0],\n    setInputValue = _useDefaultValue2[1];\n  var renderTNode = useTNodeJSX();\n  var disable = useDisabled();\n  var isReadonly = useReadonly();\n  var commonInputProps = computed(function () {\n    return _objectSpread(_objectSpread({}, pick_1(props, COMMON_PROPERTIES)), {}, {\n      disabled: disable.value,\n      readonly: isReadonly.value\n    });\n  });\n  var onInnerClear = function onInnerClear(context2) {\n    var _context2$e, _props$onClear;\n    context2 === null || context2 === void 0 || (_context2$e = context2.e) === null || _context2$e === void 0 || _context2$e.stopPropagation();\n    (_props$onClear = props.onClear) === null || _props$onClear === void 0 || _props$onClear.call(props, context2);\n    setInputValue(\"\", {\n      trigger: \"clear\"\n    });\n  };\n  var onInnerInputChange = function onInnerInputChange(value2, context2) {\n    if (props.allowInput) {\n      setInputValue(value2, _objectSpread(_objectSpread({}, context2), {}, {\n        trigger: context2.trigger || \"input\"\n      }));\n    }\n  };\n  var renderSelectSingle = function renderSelectSingle(popupVisible) {\n    var _context$attrs;\n    var singleValueDisplay = renderTNode(\"valueDisplay\");\n    var displayedValue = popupVisible && props.allowInput ? inputValue.value : getInputValue(value.value, keys.value);\n    var prefixContent = renderPrefixContent(singleValueDisplay, popupVisible);\n    var inputProps = _objectSpread(_objectSpread({}, commonInputProps.value), {}, {\n      value: renderInputDisplay(singleValueDisplay, displayedValue, popupVisible),\n      label: prefixContent.length ? function () {\n        return prefixContent;\n      } : void 0,\n      autoWidth: props.autoWidth,\n      readonly: !props.allowInput || isReadonly.value,\n      placeholder: renderPlaceholder(singleValueDisplay),\n      suffixIcon: !disable.value && props.loading ? function () {\n        return createVNode(Loading, {\n          \"loading\": true,\n          \"size\": \"small\"\n        }, null);\n      } : props.suffixIcon,\n      showClearIconOnEmpty: Boolean(props.clearable && (inputValue.value || displayedValue) && !disable.value && !isReadonly.value)\n    }, props.inputProps);\n    var _context$slots = context.slots,\n      tips = _context$slots.tips,\n      slots = _objectWithoutProperties(_context$slots, _excluded);\n    var inputClassProps = popupVisible ? [\"\".concat(classPrefix.value, \"-input--focused\"), \"\".concat(classPrefix.value, \"-is-focused\"), inputProps === null || inputProps === void 0 ? void 0 : inputProps.inputClass] : inputProps === null || inputProps === void 0 ? void 0 : inputProps.inputClass;\n    var onEnter = function onEnter(val, context2) {\n      var _props$onEnter;\n      (_props$onEnter = props.onEnter) === null || _props$onEnter === void 0 || _props$onEnter.call(props, value.value, _objectSpread(_objectSpread({}, context2), {}, {\n        inputValue: val\n      }));\n    };\n    var onFocus = function onFocus(val, context2) {\n      var _popupRef$value, _props$onFocus;\n      var overlayState = (_popupRef$value = popupRef.value) === null || _popupRef$value === void 0 ? void 0 : _popupRef$value.getOverlayState();\n      if (isSingleFocus.value || overlayState !== null && overlayState !== void 0 && overlayState.hover) return;\n      isSingleFocus.value = true;\n      (_props$onFocus = props.onFocus) === null || _props$onFocus === void 0 || _props$onFocus.call(props, value.value, _objectSpread(_objectSpread({}, context2), {}, {\n        inputValue: val\n      }));\n    };\n    var onBlur = function onBlur(val, context2) {\n      var _popupRef$value2, _props$onBlur;\n      var overlayState = (_popupRef$value2 = popupRef.value) === null || _popupRef$value2 === void 0 ? void 0 : _popupRef$value2.getOverlayState();\n      isSingleFocus.value = false;\n      if (overlayState !== null && overlayState !== void 0 && overlayState.hover) return;\n      (_props$onBlur = props.onBlur) === null || _props$onBlur === void 0 || _props$onBlur.call(props, value.value, _objectSpread(_objectSpread({}, context2), {}, {\n        inputValue: val\n      }));\n    };\n    return createVNode(Input, mergeProps({\n      \"ref\": inputRef,\n      \"style\": (_context$attrs = context.attrs) === null || _context$attrs === void 0 ? void 0 : _context$attrs.style\n    }, _objectSpread({\n      onChange: onInnerInputChange,\n      onClear: onInnerClear,\n      onEnter: onEnter,\n      onFocus: onFocus,\n      onBlur: onBlur\n    }, inputProps), {\n      \"inputClass\": inputClassProps\n    }), slots);\n  };\n  var renderPrefixContent = function renderPrefixContent(singleValueDisplay, popupVisible) {\n    var label = renderTNode(\"label\");\n    if (!label && !singleValueDisplay) {\n      return [];\n    }\n    if (singleValueDisplay) {\n      var _props$valueDisplayOp, _props$valueDisplayOp2;\n      if ((_props$valueDisplayOp = props.valueDisplayOptions) !== null && _props$valueDisplayOp !== void 0 && _props$valueDisplayOp.usePlaceholder && !value.value || (_props$valueDisplayOp2 = props.valueDisplayOptions) !== null && _props$valueDisplayOp2 !== void 0 && _props$valueDisplayOp2.useInputDisplay && popupVisible) {\n        return [label];\n      }\n    }\n    return [label, singleValueDisplay];\n  };\n  var renderInputDisplay = function renderInputDisplay(singleValueDisplay, displayedValue, popupVisible) {\n    if (singleValueDisplay) {\n      var _props$valueDisplayOp3, _props$valueDisplayOp4;\n      if (!((_props$valueDisplayOp3 = props.valueDisplayOptions) !== null && _props$valueDisplayOp3 !== void 0 && _props$valueDisplayOp3.useInputDisplay) || (_props$valueDisplayOp4 = props.valueDisplayOptions) !== null && _props$valueDisplayOp4 !== void 0 && _props$valueDisplayOp4.useInputDisplay && !popupVisible) {\n        return void 0;\n      }\n    }\n    return displayedValue;\n  };\n  var renderPlaceholder = function renderPlaceholder(singleValueDisplay) {\n    if (singleValueDisplay) {\n      var _props$valueDisplayOp5, _props$valueDisplayOp6;\n      if (!((_props$valueDisplayOp5 = props.valueDisplayOptions) !== null && _props$valueDisplayOp5 !== void 0 && _props$valueDisplayOp5.usePlaceholder) || (_props$valueDisplayOp6 = props.valueDisplayOptions) !== null && _props$valueDisplayOp6 !== void 0 && _props$valueDisplayOp6.usePlaceholder && value.value) {\n        return \"\";\n      }\n    }\n    return props.placeholder;\n  };\n  return {\n    inputRef: inputRef,\n    isSingleFocus: isSingleFocus,\n    commonInputProps: commonInputProps,\n    singleInputValue: inputValue,\n    onInnerClear: onInnerClear,\n    renderSelectSingle: renderSelectSingle\n  };\n}\nexport { useSingle as default };","map":{"version":3,"names":["COMMON_PROPERTIES","DEFAULT_KEYS","label","value","children","getInputValue","keys","iKeys","_objectSpread","isObject_1","useSingle","props","context","popupRef","_props$defaultInputVa","_toRefs","toRefs","propsInputValue","inputValue","classPrefix","usePrefixClass","isSingleFocus","ref","autofocus","inputRef","_useDefaultValue","useDefaultValue","defaultInputValue","onInputChange","_useDefaultValue2","_slicedToArray","setInputValue","renderTNode","useTNodeJSX","disable","useDisabled","isReadonly","useReadonly","commonInputProps","computed","pick_1","disabled","readonly","onInnerClear","context2","_context2$e","_props$onClear","e","stopPropagation","onClear","call","trigger","onInnerInputChange","value2","allowInput","renderSelectSingle","popupVisible","_context$attrs","singleValueDisplay","displayedValue","prefixContent","renderPrefixContent","inputProps","renderInputDisplay","length","autoWidth","placeholder","renderPlaceholder","suffixIcon","loading","createVNode","Loading","showClearIconOnEmpty","Boolean","clearable","_context$slots","slots","tips","_objectWithoutProperties","_excluded","inputClassProps","concat","inputClass","onEnter","val","_props$onEnter","onFocus","_popupRef$value","_props$onFocus","overlayState","getOverlayState","hover","onBlur","_popupRef$value2","_props$onBlur","Input","mergeProps","attrs","style","onChange","_props$valueDisplayOp","_props$valueDisplayOp2","valueDisplayOptions","usePlaceholder","useInputDisplay","_props$valueDisplayOp3","_props$valueDisplayOp4","_props$valueDisplayOp5","_props$valueDisplayOp6","singleInputValue"],"sources":["../../src/select-input/useSingle.tsx"],"sourcesContent":["import { SetupContext, ref, computed, toRefs, Ref } from 'vue';\nimport isObject from 'lodash/isObject';\nimport pick from 'lodash/pick';\nimport Input, { StrInputProps } from '../input';\nimport Loading from '../loading';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport { useDisabled } from '../hooks/useDisabled';\nimport { useReadonly } from '../hooks/useReadonly';\nimport { PopupInstanceFunctions } from '../popup';\nimport { TdSelectInputProps } from './type';\nimport { SelectInputCommonProperties } from './interface';\n\n// single 和 multiple 共有特性\nconst COMMON_PROPERTIES = [\n  'status',\n  'clearable',\n  'disabled',\n  'label',\n  'placeholder',\n  'readonly',\n  'prefixIcon',\n  'suffix',\n  'suffixIcon',\n  'onPaste',\n  'onMouseenter',\n  'onMouseleave',\n  'size',\n  'autofocus',\n];\n\nconst DEFAULT_KEYS = {\n  label: 'label',\n  value: 'value',\n  children: 'children',\n};\n\nexport interface SelectInputValueDisplayOptions {\n  useInputDisplay: boolean;\n  usePlaceholder: boolean;\n}\n\nfunction getInputValue(value: TdSelectInputProps['value'], keys: TdSelectInputProps['keys']) {\n  const iKeys = { ...DEFAULT_KEYS, ...keys };\n  return isObject(value) ? value[iKeys.label] : value;\n}\n\nexport default function useSingle(\n  props: TdSelectInputProps & { valueDisplayOptions: SelectInputValueDisplayOptions },\n  context: SetupContext,\n  popupRef: Ref<PopupInstanceFunctions>,\n) {\n  const { value, keys, inputValue: propsInputValue } = toRefs(props);\n  const classPrefix = usePrefixClass();\n  const isSingleFocus = ref(props.autofocus);\n  const inputRef = ref();\n  const [inputValue, setInputValue] = useDefaultValue(\n    propsInputValue,\n    props.defaultInputValue ?? '',\n    props.onInputChange,\n    'inputValue',\n  );\n  const renderTNode = useTNodeJSX();\n  const disable = useDisabled();\n  const isReadonly = useReadonly();\n\n  const commonInputProps = computed<SelectInputCommonProperties>(() => ({\n    ...pick(props, COMMON_PROPERTIES),\n    disabled: disable.value,\n    readonly: isReadonly.value,\n  }));\n\n  const onInnerClear = (context: { e: MouseEvent }) => {\n    context?.e?.stopPropagation();\n    props.onClear?.(context);\n    setInputValue('', { trigger: 'clear' });\n  };\n\n  const onInnerInputChange: StrInputProps['onChange'] = (value, context) => {\n    if (props.allowInput) {\n      setInputValue(value, { ...context, trigger: context.trigger || 'input' });\n    }\n  };\n\n  const renderSelectSingle = (popupVisible: boolean) => {\n    const singleValueDisplay = renderTNode('valueDisplay');\n    const displayedValue = popupVisible && props.allowInput ? inputValue.value : getInputValue(value.value, keys.value);\n    const prefixContent = renderPrefixContent(singleValueDisplay, popupVisible);\n    const inputProps = {\n      ...commonInputProps.value,\n      value: renderInputDisplay(singleValueDisplay, displayedValue, popupVisible),\n      label: prefixContent.length ? () => prefixContent : undefined,\n      autoWidth: props.autoWidth,\n      readonly: !props.allowInput || isReadonly.value,\n      placeholder: renderPlaceholder(singleValueDisplay),\n      suffixIcon: !disable.value && props.loading ? () => <Loading loading size=\"small\" /> : props.suffixIcon,\n      showClearIconOnEmpty: Boolean(\n        props.clearable && (inputValue.value || displayedValue) && !disable.value && !isReadonly.value,\n      ),\n      ...props.inputProps,\n    };\n\n    // eslint-disable-next-line\n    const { tips, ...slots } = context.slots;\n\n    const inputClassProps = popupVisible\n      ? [`${classPrefix.value}-input--focused`, `${classPrefix.value}-is-focused`, inputProps?.inputClass]\n      : inputProps?.inputClass;\n\n    const onEnter: StrInputProps['onEnter'] = (val, context) => {\n      props.onEnter?.(value.value, { ...context, inputValue: val });\n    };\n\n    const onFocus: StrInputProps['onFocus'] = (val, context) => {\n      const overlayState = popupRef.value?.getOverlayState();\n      if (isSingleFocus.value || overlayState?.hover) return;\n      isSingleFocus.value = true;\n      props.onFocus?.(value.value, { ...context, inputValue: val });\n    };\n\n    const onBlur: StrInputProps['onBlur'] = (val, context) => {\n      const overlayState = popupRef.value?.getOverlayState();\n      isSingleFocus.value = false;\n      if (overlayState?.hover) return;\n      props.onBlur?.(value.value, { ...context, inputValue: val });\n    };\n\n    return (\n      <Input\n        ref={inputRef}\n        style={context.attrs?.style}\n        v-slots={slots}\n        {...{\n          onChange: onInnerInputChange,\n          onClear: onInnerClear,\n          onEnter,\n          onFocus,\n          onBlur,\n          ...inputProps,\n        }}\n        inputClass={inputClassProps}\n      />\n    );\n  };\n\n  const renderPrefixContent = (singleValueDisplay: any, popupVisible: boolean) => {\n    // 需要隐藏valueDisplay的两个情况\n    // 1 用户传入usePlaceholder希望使用自带占位符实现，则应在未选择值时隐藏valueDisplay，只展示占位符\n    // 2 用户传入useInputDisplay希望使用自带输入回显实现，激活选择器浮层时只展示input值（待讨论是否修改为激活后真的输入字符再隐藏valueDisplay，此处实现效果与不使用valueDisplay只使用filterable时不同）\n    const label = renderTNode('label');\n\n    if (!label && !singleValueDisplay) {\n      return [];\n    }\n\n    if (singleValueDisplay) {\n      if (\n        (props.valueDisplayOptions?.usePlaceholder && !value.value) ||\n        (props.valueDisplayOptions?.useInputDisplay && popupVisible)\n      ) {\n        return [label];\n      }\n    }\n    return [label, singleValueDisplay];\n  };\n\n  const renderInputDisplay = (singleValueDisplay: any, displayedValue: any, popupVisible: boolean) => {\n    // 使用valueDisplay插槽时，如用户传入useInputDisplay使用自带输入回显实现，未传则认为用户自行实现。\n    if (singleValueDisplay)\n      if (\n        !props.valueDisplayOptions?.useInputDisplay ||\n        (props.valueDisplayOptions?.useInputDisplay && !popupVisible)\n      ) {\n        return undefined;\n      }\n    return displayedValue;\n  };\n\n  const renderPlaceholder = (singleValueDisplay: any) => {\n    // 使用valueDisplay插槽时，如用户传入usePlaceholder使用自带占位符实现，未传则认为用户自行实现。\n    // 如果当前存在value（对应直接使用组件和select组件调用时），不显示占位符。\n    if (singleValueDisplay) {\n      if (!props.valueDisplayOptions?.usePlaceholder || (props.valueDisplayOptions?.usePlaceholder && value.value)) {\n        return '';\n      }\n    }\n    return props.placeholder;\n  };\n\n  return {\n    inputRef,\n    isSingleFocus,\n    commonInputProps,\n    singleInputValue: inputValue,\n    onInnerClear,\n    renderSelectSingle,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}