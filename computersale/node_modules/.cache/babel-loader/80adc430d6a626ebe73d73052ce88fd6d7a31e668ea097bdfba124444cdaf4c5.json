{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, computed, createVNode, mergeProps } from 'vue';\nimport props from './props.mjs';\nimport { i as isObject_1 } from '../_chunks/dep-2b09875b.mjs';\nimport _StickyItem from './sticky-item.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport '../hooks/index.mjs';\nimport stickyItemProps from './sticky-item-props.mjs';\nimport { useChildComponentSlots } from '../hooks/slot.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../popup/index.mjs';\nimport '../popup/popup.mjs';\nimport '../_chunks/dep-5efe53d1.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '@popperjs/core';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-5993931e.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../hooks/useVModel.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../popup/container.mjs';\nimport '../_chunks/dep-4a990ea3.mjs';\nimport '../popup/props.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../hooks/tnode.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../popup/type.mjs';\nimport '../hooks/icon.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar _StickyTool = defineComponent({\n  name: \"TStickyTool\",\n  props: _objectSpread({}, props),\n  setup: function setup(props2) {\n    var COMPONENT_NAME = usePrefixClass(\"sticky-tool\");\n    var classes = computed(function () {\n      return [COMPONENT_NAME.value, \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.shape)];\n    });\n    var styles = computed(function () {\n      var styles2 = getOffset();\n      if (props2.width) styles2.width = typeof props2.width === \"number\" ? \"\".concat(props2.width, \"px\") : props2.width;\n      return styles2;\n    });\n    var getChildComponentByName = useChildComponentSlots();\n    var getList = function getList() {\n      var _props2$list;\n      var list;\n      if ((_props2$list = props2.list) !== null && _props2$list !== void 0 && _props2$list.length) {\n        list = props2.list;\n      } else {\n        var nodes = getChildComponentByName(\"StickyItem\");\n        list = getListBySlots(nodes);\n      }\n      return list;\n    };\n    var getListBySlots = function getListBySlots(nodes) {\n      var arr = [];\n      nodes === null || nodes === void 0 || nodes.forEach(function (node) {\n        var list = (node === null || node === void 0 ? void 0 : node.props) || {};\n        var children = node === null || node === void 0 ? void 0 : node.children;\n        if (!list && !children) return;\n        if (children && isObject_1(children)) {\n          for (var key in children) {\n            if (key in stickyItemProps && !list[key]) {\n              list[key] = children[key];\n            }\n          }\n        }\n        arr.push(list);\n      });\n      return arr;\n    };\n    var getOffset = function getOffset() {\n      var _props2$offset;\n      var position = props2.offset ? [80, 24] : [\"80px\", \"24px\"];\n      (_props2$offset = props2.offset) === null || _props2$offset === void 0 || _props2$offset.forEach(function (item, index) {\n        position[index] = isNaN(Number(item)) ? \"calc( \".concat(position[index], \"px + \").concat(item, \")\") : \"\".concat(position[index] + item, \"px\");\n      });\n      var offsetStyle = {};\n      props2.placement.split(\"-\").forEach(function (item, index) {\n        if (item !== \"center\") {\n          offsetStyle[item] = position[index];\n        } else {\n          offsetStyle.top = \"50%\";\n          offsetStyle.transform = \"translate(0, -50%)\";\n        }\n      });\n      return offsetStyle;\n    };\n    var handleClick = function handleClick(context) {\n      var _props2$onClick;\n      (_props2$onClick = props2.onClick) === null || _props2$onClick === void 0 || _props2$onClick.call(props2, context);\n    };\n    var handleHover = function handleHover(context) {\n      var _props2$onHover;\n      (_props2$onHover = props2.onHover) === null || _props2$onHover === void 0 || _props2$onHover.call(props2, context);\n    };\n    var renderContent = function renderContent() {\n      var list = getList();\n      var content = list.map(function (item, index) {\n        var type = props2.type,\n          shape = props2.shape,\n          placement = props2.placement,\n          popupProps = props2.popupProps;\n        var itemProps = _objectSpread(_objectSpread({}, item), {}, {\n          type: type,\n          shape: shape,\n          placement: placement,\n          basePopupProps: popupProps,\n          baseWidth: styles.value.width,\n          onClick: handleClick,\n          onHover: handleHover\n        });\n        return createVNode(_StickyItem, mergeProps(itemProps, {\n          \"key\": index\n        }), null);\n      });\n      return content;\n    };\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": classes.value,\n        \"style\": styles.value\n      }, [renderContent()]);\n    };\n  }\n});\nexport { _StickyTool as default };","map":{"version":3,"names":["_StickyTool","defineComponent","name","props","_objectSpread","setup","props2","COMPONENT_NAME","usePrefixClass","classes","computed","value","concat","shape","styles","styles2","getOffset","width","getChildComponentByName","useChildComponentSlots","getList","_props2$list","list","length","nodes","getListBySlots","arr","forEach","node","children","isObject_1","key","stickyItemProps","push","_props2$offset","position","offset","item","index","isNaN","Number","offsetStyle","placement","split","top","transform","handleClick","context","_props2$onClick","onClick","call","handleHover","_props2$onHover","onHover","renderContent","content","map","type","popupProps","itemProps","basePopupProps","baseWidth","createVNode","_StickyItem","mergeProps"],"sources":["../../src/sticky-tool/sticky-tool.tsx"],"sourcesContent":["import { computed, defineComponent, VNode } from 'vue';\nimport props from './props';\nimport isObject from 'lodash/isObject';\nimport StickyItem from './sticky-item';\n\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useChildComponentSlots } from '../hooks';\n\nimport stickyItemProps from './sticky-item-props';\n\nimport type { TdStickyItemProps } from './type';\nimport type { Styles } from '../common';\n\nexport default defineComponent({\n  name: 'TStickyTool',\n  props: { ...props },\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('sticky-tool');\n    const classes = computed(() => {\n      return [COMPONENT_NAME.value, `${COMPONENT_NAME.value}--${props.shape}`];\n    });\n    const styles = computed(() => {\n      const styles = getOffset();\n      if (props.width) styles.width = typeof props.width === 'number' ? `${props.width}px` : props.width;\n      return styles;\n    });\n\n    const getChildComponentByName = useChildComponentSlots();\n\n    const getList = () => {\n      let list: Array<TdStickyItemProps>;\n      if (props.list?.length) {\n        list = props.list;\n      } else {\n        const nodes: VNode[] = getChildComponentByName('StickyItem') as VNode[];\n        list = getListBySlots(nodes);\n      }\n      return list;\n    };\n    const getListBySlots = (nodes: VNode[]) => {\n      const arr: Array<TdStickyItemProps> = [];\n      nodes?.forEach((node) => {\n        const list = node?.props || {};\n        const children = node?.children;\n        if (!list && !children) return;\n        if (children && isObject(children)) {\n          for (const key in children) {\n            if (key in stickyItemProps && !list[key]) {\n              list[key] = children[key];\n            }\n          }\n        }\n        arr.push(list as TdStickyItemProps);\n      });\n      return arr;\n    };\n    const getOffset = (): Styles => {\n      // 默认偏移位置\n      const position: Array<string | number> = props.offset ? [80, 24] : ['80px', '24px'];\n      props.offset?.forEach((item, index) => {\n        position[index] = isNaN(Number(item))\n          ? `calc( ${position[index]}px + ${item})`\n          : `${(position[index] as number) + (item as number)}px`;\n      });\n      const offsetStyle: Styles = {};\n      props.placement.split('-').forEach((item, index) => {\n        if (item !== 'center') {\n          offsetStyle[item] = position[index];\n        } else {\n          offsetStyle.top = '50%';\n          offsetStyle.transform = 'translate(0, -50%)';\n        }\n      });\n      return offsetStyle;\n    };\n    const handleClick = (context: { e: MouseEvent; item: TdStickyItemProps }) => {\n      props.onClick?.(context);\n    };\n    const handleHover = (context: { e: MouseEvent; item: TdStickyItemProps }) => {\n      props.onHover?.(context);\n    };\n    const renderContent = () => {\n      const list = getList();\n      const content = list.map((item, index) => {\n        const { type, shape, placement, popupProps } = props;\n        const itemProps = {\n          ...item,\n          type,\n          shape,\n          placement,\n          basePopupProps: popupProps,\n          baseWidth: styles.value.width,\n          onClick: handleClick,\n          onHover: handleHover,\n        };\n        return <StickyItem {...itemProps} key={index} />;\n      });\n      return content;\n    };\n    return () => (\n      <div class={classes.value} style={styles.value}>\n        {renderContent()}\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}