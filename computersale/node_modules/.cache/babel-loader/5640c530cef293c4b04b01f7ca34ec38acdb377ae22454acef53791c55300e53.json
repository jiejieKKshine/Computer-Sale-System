{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { ref, computed } from 'vue';\nimport { getSizeDraggable, calcMoveSize } from '../_common/js/drawer/utils.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nvar useDrag = function useDrag(props) {\n  var isSizeDragging = ref(false);\n  var draggedSizeValue = ref(null);\n  var enableDrag = function enableDrag() {\n    document.addEventListener(\"mouseup\", _handleMouseup, true);\n    document.addEventListener(\"mousemove\", handleMousemove, true);\n    isSizeDragging.value = true;\n  };\n  var _handleMouseup = function handleMouseup() {\n    document.removeEventListener(\"mouseup\", _handleMouseup, true);\n    document.removeEventListener(\"mousemove\", handleMousemove, true);\n    isSizeDragging.value = false;\n  };\n  var handleMousemove = function handleMousemove(e) {\n    var _props$onSizeDragEnd;\n    var x = e.x,\n      y = e.y;\n    var maxHeight = document.documentElement.clientHeight;\n    var maxWidth = document.documentElement.clientWidth;\n    var offsetHeight = 8;\n    var offsetWidth = 8;\n    var max = props.placement === \"left\" || props.placement === \"right\" ? maxWidth : maxHeight;\n    var min = props.placement === \"left\" || props.placement === \"right\" ? offsetWidth : offsetHeight;\n    var _getSizeDraggable = getSizeDraggable(props.sizeDraggable, {\n        max: max,\n        min: min\n      }),\n      allowSizeDraggable = _getSizeDraggable.allowSizeDraggable,\n      limitMax = _getSizeDraggable.max,\n      limitMin = _getSizeDraggable.min;\n    if (!allowSizeDraggable || !isSizeDragging.value) return;\n    var moveSize = calcMoveSize(props.placement, {\n      x: x,\n      y: y,\n      maxWidth: maxWidth,\n      maxHeight: maxHeight,\n      max: limitMax,\n      min: limitMin\n    });\n    if (typeof moveSize === \"undefined\") return;\n    draggedSizeValue.value = \"\".concat(moveSize, \"px\");\n    (_props$onSizeDragEnd = props.onSizeDragEnd) === null || _props$onSizeDragEnd === void 0 || _props$onSizeDragEnd.call(props, {\n      e: e,\n      size: moveSize\n    });\n  };\n  var draggableLineStyles = computed(function () {\n    var isHorizontal = [\"right\", \"left\"].includes(props.placement);\n    var oppositeMap = {\n      left: \"right\",\n      right: \"left\",\n      top: \"bottom\",\n      bottom: \"top\"\n    };\n    return _defineProperty(_defineProperty(_defineProperty(_defineProperty({\n      zIndex: 1,\n      position: \"absolute\",\n      background: \"transparent\"\n    }, oppositeMap[props.placement], 0), \"width\", isHorizontal ? \"16px\" : \"100%\"), \"height\", isHorizontal ? \"100%\" : \"16px\"), \"cursor\", isHorizontal ? \"col-resize\" : \"row-resize\");\n  });\n  return {\n    draggedSizeValue: draggedSizeValue,\n    enableDrag: enableDrag,\n    draggableLineStyles: draggableLineStyles\n  };\n};\nexport { useDrag };","map":{"version":3,"names":["useDrag","props","isSizeDragging","ref","draggedSizeValue","enableDrag","document","addEventListener","_handleMouseup","handleMousemove","value","handleMouseup","removeEventListener","e","_props$onSizeDragEnd","x","y","maxHeight","documentElement","clientHeight","maxWidth","clientWidth","offsetHeight","offsetWidth","max","placement","min","_getSizeDraggable","getSizeDraggable","sizeDraggable","allowSizeDraggable","limitMax","limitMin","moveSize","calcMoveSize","concat","onSizeDragEnd","call","size","draggableLineStyles","computed","isHorizontal","includes","oppositeMap","left","right","top","bottom","_defineProperty","zIndex","position","background"],"sources":["../../src/drawer/hooks.ts"],"sourcesContent":["import { computed, ref } from 'vue';\nimport { Styles } from '../common';\nimport { getSizeDraggable, calcMoveSize } from '../_common/js/drawer/utils';\nimport type { TdDrawerProps } from './type';\n\nexport const useDrag = (props: TdDrawerProps) => {\n  // 以下为拖拽改变抽屉大小相关 可以抽成hooks\n  const isSizeDragging = ref(false);\n  const draggedSizeValue = ref<string>(null);\n\n  const enableDrag = () => {\n    // mousedown绑定mousemove和mouseup事件\n    document.addEventListener('mouseup', handleMouseup, true);\n    document.addEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = true;\n  };\n\n  const handleMouseup = () => {\n    document.removeEventListener('mouseup', handleMouseup, true);\n    document.removeEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = false;\n  };\n\n  const handleMousemove = (e: MouseEvent) => {\n    // 鼠标移动时计算draggedSizeValue的值\n    const { x, y } = e;\n    const maxHeight = document.documentElement.clientHeight;\n    const maxWidth = document.documentElement.clientWidth;\n    const offsetHeight = 8;\n    const offsetWidth = 8;\n    // x 轴方向使用最大宽度，y轴方向使用最大高度\n    const max = props.placement === 'left' || props.placement === 'right' ? maxWidth : maxHeight;\n    // x 轴方向使用默认最小宽度，y轴方向使用默认最小高度\n    const min = props.placement === 'left' || props.placement === 'right' ? offsetWidth : offsetHeight;\n    const { allowSizeDraggable, max: limitMax, min: limitMin } = getSizeDraggable(props.sizeDraggable, { max, min });\n\n    // 不支持拖拽就直接返回\n    if (!allowSizeDraggable || !isSizeDragging.value) return;\n\n    const moveSize = calcMoveSize(props.placement, {\n      x,\n      y,\n      maxWidth,\n      maxHeight,\n      max: limitMax,\n      min: limitMin,\n    });\n\n    if (typeof moveSize === 'undefined') return;\n\n    draggedSizeValue.value = `${moveSize}px`;\n    props.onSizeDragEnd?.({\n      e,\n      size: moveSize,\n    });\n  };\n\n  const draggableLineStyles = computed(() => {\n    // 设置拖拽control的样式\n    const isHorizontal = ['right', 'left'].includes(props.placement);\n    const oppositeMap = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top',\n    };\n    return {\n      zIndex: 1,\n      position: 'absolute',\n      background: 'transparent',\n      [oppositeMap[props.placement]]: 0,\n      width: isHorizontal ? '16px' : '100%',\n      height: isHorizontal ? '100%' : '16px',\n      cursor: isHorizontal ? 'col-resize' : 'row-resize',\n    } as Styles;\n  });\n\n  return { draggedSizeValue, enableDrag, draggableLineStyles };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}