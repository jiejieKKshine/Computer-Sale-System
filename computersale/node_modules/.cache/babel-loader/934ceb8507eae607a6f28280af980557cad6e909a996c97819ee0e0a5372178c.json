{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { _ as _toConsumableArray } from '../_chunks/dep-4a990ea3.mjs';\nimport { _ as _typeof } from '../_chunks/dep-4659d73b.mjs';\nimport { defineComponent, toRefs, computed, createVNode, mergeProps } from 'vue';\nimport { Checkbox, CheckboxGroup } from '../checkbox/index.mjs';\nimport { i as intersection_1 } from '../_chunks/dep-64c2053b.mjs';\nimport '../hooks/index.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../checkbox/checkbox.mjs';\nimport '../_chunks/dep-5efe53d1.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../checkbox/props.mjs';\nimport '../hooks/useVModel.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/tnode.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../checkbox/constants.mjs';\nimport '../checkbox/hooks/useCheckboxLazyLoad.mjs';\nimport '../_common/js/utils/observe.mjs';\nimport '../checkbox/hooks/useKeyboardEvent.mjs';\nimport '../_common/js/common.mjs';\nimport '../hooks/useDisabled.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../hooks/useReadonly.mjs';\nimport '../checkbox/group.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../checkbox/checkbox-group-props.mjs';\nimport '../hooks/slot.mjs';\nimport '../_chunks/dep-4d4e2af1.mjs';\nimport '../_chunks/dep-3c4e4325.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../checkbox/type.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar ColumnCheckboxGroup = defineComponent({\n  name: \"ColumnCheckboxGroup\",\n  props: {\n    checkboxProps: Object,\n    options: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    label: String,\n    uniqueKey: String,\n    value: Array,\n    onChange: Function\n  },\n  setup: function setup(props) {\n    var _toRefs = toRefs(props),\n      checkboxProps = _toRefs.checkboxProps,\n      value = _toRefs.value,\n      options = _toRefs.options;\n    var classPrefix = usePrefixClass();\n    var allCheckedColumnKeys = computed(function () {\n      var allCheckedKeys = [];\n      options.value.forEach(function (option) {\n        if (_typeof(option) === \"object\") {\n          if (option.disabled) return;\n          if (option.value) {\n            allCheckedKeys.push(option.value);\n          } else if (typeof option.label === \"string\") {\n            allCheckedKeys.push(option.label);\n          }\n        } else {\n          allCheckedKeys.push(option);\n        }\n      });\n      return allCheckedKeys;\n    });\n    var intersectionKeys = computed(function () {\n      return intersection_1(allCheckedColumnKeys.value, value.value);\n    });\n    var isCheckedAll = computed(function () {\n      var len = intersectionKeys.value.length;\n      return Boolean(len && allCheckedColumnKeys.value.length === len);\n    });\n    var isIndeterminate = computed(function () {\n      var len = intersectionKeys.value.length;\n      return Boolean(len < allCheckedColumnKeys.value.length && len);\n    });\n    var onCheckAllColumnsChange = function onCheckAllColumnsChange(checkAll, ctx) {\n      var changeParams = {\n        e: ctx.e,\n        type: \"check\",\n        current: void 0,\n        option: void 0\n      };\n      if (checkAll) {\n        var _props$onChange;\n        var newKeys = _toConsumableArray(new Set(value.value.concat(allCheckedColumnKeys.value)));\n        (_props$onChange = props.onChange) === null || _props$onChange === void 0 || _props$onChange.call(props, newKeys, changeParams);\n      } else {\n        var _props$onChange2;\n        var _newKeys = value.value.filter(function (val) {\n          return !allCheckedColumnKeys.value.includes(val);\n        });\n        (_props$onChange2 = props.onChange) === null || _props$onChange2 === void 0 || _props$onChange2.call(props, _newKeys, _objectSpread(_objectSpread({}, changeParams), {}, {\n          type: \"uncheck\"\n        }));\n      }\n    };\n    var handleCheckChange = function handleCheckChange(val, ctx) {\n      var _props$onChange3;\n      (_props$onChange3 = props.onChange) === null || _props$onChange3 === void 0 || _props$onChange3.call(props, val, ctx);\n    };\n    var classes = computed(function () {\n      return [\"\".concat(classPrefix.value, \"-table__column-controller-item\"), _defineProperty({}, \"\".concat(classPrefix.value, \"-table__\").concat(props.uniqueKey), props.uniqueKey)];\n    });\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": classes.value\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-table__column-controller-block\")\n      }, [createVNode(Checkbox, {\n        \"indeterminate\": isIndeterminate.value,\n        \"checked\": isCheckedAll.value,\n        \"onChange\": onCheckAllColumnsChange,\n        \"disabled\": !allCheckedColumnKeys.value.length\n      }, {\n        \"default\": function _default() {\n          return [props.label];\n        }\n      })]), createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-table__column-controller-block\")\n      }, [createVNode(CheckboxGroup, mergeProps({\n        \"options\": options.value\n      }, checkboxProps.value, {\n        \"modelValue\": value.value,\n        \"onChange\": handleCheckChange\n      }), null)])]);\n    };\n  }\n});\nexport { ColumnCheckboxGroup as default };","map":{"version":3,"names":["ColumnCheckboxGroup","defineComponent","name","props","checkboxProps","Object","options","type","Array","_default","label","String","uniqueKey","value","onChange","Function","setup","_toRefs","toRefs","classPrefix","usePrefixClass","allCheckedColumnKeys","computed","allCheckedKeys","forEach","option","_typeof","disabled","push","intersectionKeys","intersection_1","isCheckedAll","len","length","Boolean","isIndeterminate","onCheckAllColumnsChange","checkAll","ctx","changeParams","e","current","_props$onChange","newKeys","_toConsumableArray","Set","concat","call","_props$onChange2","_newKeys","filter","val","includes","_objectSpread","handleCheckChange","_props$onChange3","classes","_defineProperty","createVNode","CheckboxGroup","mergeProps"],"sources":["../../src/table/column-checkbox-group.tsx"],"sourcesContent":["import { computed, defineComponent, PropType, toRefs } from 'vue';\nimport Checkbox, { CheckboxGroup, CheckboxGroupChangeContext, CheckboxGroupProps, CheckboxProps } from '../checkbox';\nimport intersection from 'lodash/intersection';\nimport { usePrefixClass } from '../hooks';\n\nexport type ColumnCheckboxGroupProps = Pick<CheckboxGroupProps, 'value' | 'onChange' | 'options'> & {\n  checkboxProps: CheckboxGroupProps;\n  label?: string;\n  uniqueKey?: string;\n};\n\nexport default defineComponent({\n  name: 'ColumnCheckboxGroup',\n\n  props: {\n    checkboxProps: Object as PropType<ColumnCheckboxGroupProps['checkboxProps']>,\n    options: {\n      type: Array as PropType<ColumnCheckboxGroupProps['options']>,\n      default: () => [] as ColumnCheckboxGroupProps['options'],\n    },\n    label: String,\n    uniqueKey: String,\n    value: Array as PropType<ColumnCheckboxGroupProps['value']>,\n    onChange: Function as PropType<ColumnCheckboxGroupProps['onChange']>,\n  },\n\n  setup(props: ColumnCheckboxGroupProps) {\n    const { checkboxProps, value, options } = toRefs(props);\n    const classPrefix = usePrefixClass();\n\n    const allCheckedColumnKeys = computed(() => {\n      const allCheckedKeys: CheckboxGroupProps['value'] = [];\n      options.value.forEach((option) => {\n        if (typeof option === 'object') {\n          if (option.disabled) return;\n          if (option.value) {\n            allCheckedKeys.push(option.value);\n          } else if (typeof option.label === 'string') {\n            allCheckedKeys.push(option.label);\n          }\n        } else {\n          allCheckedKeys.push(option);\n        }\n      });\n      return allCheckedKeys;\n    });\n\n    const intersectionKeys = computed(() => intersection(allCheckedColumnKeys.value, value.value));\n\n    const isCheckedAll = computed(() => {\n      const len = intersectionKeys.value.length;\n      return Boolean(len && allCheckedColumnKeys.value.length === len);\n    });\n\n    const isIndeterminate = computed(() => {\n      const len = intersectionKeys.value.length;\n      return Boolean(len < allCheckedColumnKeys.value.length && len);\n    });\n\n    const onCheckAllColumnsChange: CheckboxProps['onChange'] = (checkAll, ctx) => {\n      const changeParams: CheckboxGroupChangeContext = {\n        e: ctx.e,\n        type: 'check',\n        current: undefined,\n        option: undefined,\n      };\n      if (checkAll) {\n        const newKeys = [...new Set(value.value.concat(allCheckedColumnKeys.value))];\n        props.onChange?.(newKeys, changeParams);\n      } else {\n        const newKeys = value.value.filter((val) => !allCheckedColumnKeys.value.includes(val));\n        props.onChange?.(newKeys, { ...changeParams, type: 'uncheck' });\n      }\n    };\n\n    const handleCheckChange: CheckboxGroupProps['onChange'] = (val, ctx) => {\n      props.onChange?.(val, ctx);\n    };\n\n    const classes = computed(() => [\n      `${classPrefix.value}-table__column-controller-item`,\n      {\n        [`${classPrefix.value}-table__${props.uniqueKey}`]: props.uniqueKey,\n      },\n    ]);\n\n    return () => {\n      return (\n        <div class={classes.value}>\n          <div class={`${classPrefix.value}-table__column-controller-block`}>\n            <Checkbox\n              indeterminate={isIndeterminate.value}\n              checked={isCheckedAll.value}\n              onChange={onCheckAllColumnsChange}\n              disabled={!allCheckedColumnKeys.value.length}\n            >\n              {props.label}\n            </Checkbox>\n          </div>\n          <div class={`${classPrefix.value}-table__column-controller-block`}>\n            <CheckboxGroup\n              options={options.value}\n              {...checkboxProps.value}\n              modelValue={value.value}\n              onChange={handleCheckChange}\n            />\n          </div>\n        </div>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}