{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, getCurrentInstance, computed, h, createVNode } from 'vue';\nimport { CloseIcon } from 'tdesign-icons-vue-next';\nimport { i as isString_1 } from '../_chunks/dep-03a7fb6c.mjs';\nimport { t as tinycolor } from '../_chunks/dep-9ac991f3.mjs';\nimport props from './props.mjs';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig.mjs';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon.mjs';\nimport { useTNodeJSX, useContent } from '../hooks/tnode.mjs';\nimport { useConfig } from '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nvar _Tag = defineComponent({\n  name: \"TTag\",\n  props: props,\n  setup: function setup(props2) {\n    var _useConfig = useConfig(\"tag\"),\n      tagGlobalConfig = _useConfig.globalConfig;\n    var COMPONENT_NAME = usePrefixClass(\"tag\");\n    var _useGlobalIcon = useGlobalIcon({\n        CloseIcon: CloseIcon\n      }),\n      CloseIcon$1 = _useGlobalIcon.CloseIcon;\n    var renderTNodeJSX = useTNodeJSX();\n    var renderContent = useContent();\n    var _useCommonClassName = useCommonClassName(),\n      SIZE = _useCommonClassName.SIZE;\n    var _getCurrentInstance = getCurrentInstance(),\n      vnode = _getCurrentInstance.vnode;\n    var tagClass = computed(function () {\n      return [\"\".concat(COMPONENT_NAME.value), \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.theme), \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.variant), _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(COMPONENT_NAME.value, \"--ellipsis\"), props2.maxWidth), \"\".concat(COMPONENT_NAME.value, \"--close\"), props2.closable), \"\".concat(COMPONENT_NAME.value, \"--disabled\"), props2.disabled), SIZE.value[props2.size], props2.size !== \"medium\"), props2.shape !== \"square\" && \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.shape)];\n    });\n    var tagStyle = computed(function () {\n      return getTagColorStyle();\n    });\n    var textStyle = computed(function () {\n      if (!props2.maxWidth) return {};\n      return {\n        maxWidth: isNaN(Number(props2.maxWidth)) ? String(props2.maxWidth) : \"\".concat(props2.maxWidth, \"px\")\n      };\n    });\n    var getTagColorStyle = function getTagColorStyle() {\n      var color = props2.color,\n        variant = props2.variant;\n      if (!color) return {};\n      var luminance = tinycolor(color).getLuminance();\n      var style = {\n        color: luminance > 0.5 ? \"black\" : \"white\"\n      };\n      if (variant === \"outline\" || variant === \"light-outline\") {\n        style.borderColor = color;\n      }\n      if (variant !== \"outline\") {\n        var getLightestShade = function getLightestShade() {\n          var _tinycolor$toRgb = tinycolor(color).toRgb(),\n            r = _tinycolor$toRgb.r,\n            g = _tinycolor$toRgb.g,\n            b = _tinycolor$toRgb.b;\n          return \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", 0.1)\");\n        };\n        style.backgroundColor = variant === \"dark\" ? color : getLightestShade();\n      }\n      if (variant !== \"dark\") {\n        style.color = color;\n      }\n      return style;\n    };\n    var handleClick = function handleClick(e) {\n      var _props2$onClick;\n      if (props2.disabled) return;\n      (_props2$onClick = props2.onClick) === null || _props2$onClick === void 0 || _props2$onClick.call(props2, {\n        e: e\n      });\n    };\n    var getCloseIcon = function getCloseIcon() {\n      if (!props2.closable) return null;\n      var iconClassName = \"\".concat(COMPONENT_NAME.value, \"__icon-close\");\n      if (tagGlobalConfig.value.closeIcon) {\n        return h(tagGlobalConfig.value.closeIcon(h), {\n          \"class\": iconClassName\n        });\n      }\n      return createVNode(CloseIcon$1, {\n        \"onClick\": function onClick(_ref2) {\n          var _props2$onClose;\n          var e = _ref2.e;\n          if (e) e.stopPropagation();\n          (_props2$onClose = props2.onClose) === null || _props2$onClose === void 0 || _props2$onClose.call(props2, {\n            e: e\n          });\n        },\n        \"class\": iconClassName\n      }, null);\n    };\n    var renderTitle = function renderTitle(tagContent) {\n      if (!props2.maxWidth) {\n        return void 0;\n      }\n      var vProps = vnode.props || {};\n      if (Reflect.has(vProps, \"title\")) {\n        return vProps.title || void 0;\n      }\n      if (tagContent) {\n        return tagContent;\n      }\n      return void 0;\n    };\n    return function () {\n      var closeIcon = getCloseIcon();\n      var tagContent = renderContent(\"default\", \"content\");\n      var icon = renderTNodeJSX(\"icon\");\n      var title = renderTitle(isString_1(tagContent) ? tagContent : \"\");\n      return createVNode(\"div\", {\n        \"class\": tagClass.value,\n        \"style\": tagStyle.value,\n        \"onClick\": handleClick\n      }, [icon, createVNode(\"span\", {\n        \"class\": props2.maxWidth ? \"\".concat(COMPONENT_NAME.value, \"--text\") : void 0,\n        \"style\": textStyle.value,\n        \"title\": title\n      }, [tagContent]), !props2.disabled && closeIcon]);\n    };\n  }\n});\nexport { _Tag as default };","map":{"version":3,"names":["_Tag","defineComponent","name","props","setup","props2","_useConfig","useConfig","tagGlobalConfig","globalConfig","COMPONENT_NAME","usePrefixClass","_useGlobalIcon","useGlobalIcon","CloseIcon","CloseIcon$1","renderTNodeJSX","useTNodeJSX","renderContent","useContent","_useCommonClassName","useCommonClassName","SIZE","_getCurrentInstance","getCurrentInstance","vnode","tagClass","computed","concat","value","theme","variant","_defineProperty","maxWidth","closable","disabled","size","shape","tagStyle","getTagColorStyle","textStyle","isNaN","Number","String","color","luminance","tinycolor","getLuminance","style","borderColor","getLightestShade","_tinycolor$toRgb","toRgb","r","g","b","backgroundColor","handleClick","e","_props2$onClick","onClick","call","getCloseIcon","iconClassName","closeIcon","h","createVNode","_ref2","_props2$onClose","stopPropagation","onClose","renderTitle","tagContent","vProps","Reflect","has","title","icon","isString_1"],"sources":["../../src/tag/tag.tsx"],"sourcesContent":["import { computed, defineComponent, getCurrentInstance, h, VNode } from 'vue';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\nimport isString from 'lodash/isString';\nimport tinycolor from 'tinycolor2';\n\nimport props from './props';\nimport { useConfig, usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport { Styles } from '../common';\n\nexport default defineComponent({\n  name: 'TTag',\n  props,\n  setup(props) {\n    const { globalConfig: tagGlobalConfig } = useConfig('tag');\n    const COMPONENT_NAME = usePrefixClass('tag');\n    const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const { SIZE } = useCommonClassName();\n    const { vnode } = getCurrentInstance();\n\n    const tagClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}`,\n        `${COMPONENT_NAME.value}--${props.theme}`,\n        `${COMPONENT_NAME.value}--${props.variant}`,\n        {\n          [`${COMPONENT_NAME.value}--ellipsis`]: props.maxWidth,\n          [`${COMPONENT_NAME.value}--close`]: props.closable,\n          [`${COMPONENT_NAME.value}--disabled`]: props.disabled,\n          [SIZE.value[props.size]]: props.size !== 'medium',\n        },\n        props.shape !== 'square' && `${COMPONENT_NAME.value}--${props.shape}`,\n      ];\n    });\n    const tagStyle = computed<Styles>(() => {\n      return getTagColorStyle();\n    });\n\n    const textStyle = computed<Styles>(() => {\n      if (!props.maxWidth) return {};\n\n      return {\n        maxWidth: isNaN(Number(props.maxWidth)) ? String(props.maxWidth) : `${props.maxWidth}px`,\n      };\n    });\n\n    const getTagColorStyle = () => {\n      const { color, variant } = props;\n      if (!color) return {};\n\n      const luminance = tinycolor(color).getLuminance();\n\n      const style: Styles = {\n        color: luminance > 0.5 ? 'black' : 'white',\n      };\n\n      if (variant === 'outline' || variant === 'light-outline') {\n        style.borderColor = color;\n      }\n      if (variant !== 'outline') {\n        const getLightestShade = () => {\n          const { r, g, b } = tinycolor(color).toRgb();\n          // alpha 0.1  is designed by @wen1kang\n          return `rgba(${r}, ${g}, ${b}, 0.1)`;\n        };\n        style.backgroundColor = variant === 'dark' ? color : getLightestShade();\n      }\n      if (variant !== 'dark') {\n        style.color = color;\n      }\n      return style;\n    };\n\n    const handleClick = (e: MouseEvent) => {\n      if (props.disabled) return;\n      props.onClick?.({ e });\n    };\n\n    const getCloseIcon = () => {\n      if (!props.closable) return null;\n      const iconClassName = `${COMPONENT_NAME.value}__icon-close`;\n      if (tagGlobalConfig.value.closeIcon) {\n        return h(tagGlobalConfig.value.closeIcon(h) as VNode, { class: iconClassName });\n      }\n      return (\n        <CloseIcon\n          onClick={({ e }: { e: MouseEvent }) => {\n            if (e) e.stopPropagation();\n            props.onClose?.({ e });\n          }}\n          class={iconClassName}\n        />\n      );\n    };\n\n    const renderTitle = (tagContent: string) => {\n      if (!props.maxWidth) {\n        return undefined;\n      }\n\n      const vProps = vnode.props || {};\n      if (Reflect.has(vProps, 'title')) {\n        return vProps.title || undefined;\n      }\n\n      if (tagContent) {\n        return tagContent;\n      }\n\n      return undefined;\n    };\n\n    return () => {\n      // 关闭按钮 自定义组件使用 nativeOnClick 绑定事件\n      const closeIcon = getCloseIcon();\n      // 标签内容\n      const tagContent = renderContent('default', 'content');\n      // 图标\n      const icon = renderTNodeJSX('icon');\n\n      const title = renderTitle(isString(tagContent) ? tagContent : '');\n\n      return (\n        <div class={tagClass.value} style={tagStyle.value} onClick={handleClick}>\n          {icon}\n          <span\n            class={props.maxWidth ? `${COMPONENT_NAME.value}--text` : undefined}\n            style={textStyle.value}\n            title={title}\n          >\n            {tagContent}\n          </span>\n          {!props.disabled && closeIcon}\n        </div>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}