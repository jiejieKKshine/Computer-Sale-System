{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _toConsumableArray } from '../_chunks/dep-4a990ea3.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, toRefs, ref, computed, watch, onMounted, onBeforeUnmount, createVNode, provide, reactive } from 'vue';\nimport { i as isNumber_1 } from '../_chunks/dep-889e457b.mjs';\nimport { i as isArray_1 } from '../_chunks/dep-eae2a67e.mjs';\nimport props from './props.mjs';\nimport _SliderButton from './slider-button.mjs';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig.mjs';\nimport { useSliderMark } from './hooks/useSliderMark.mjs';\nimport { useSliderInput } from './hooks/useSliderInput.mjs';\nimport { formatSliderValue, getStopStyle } from './util/common.mjs';\nimport { sliderPropsInjectKey } from './util/constants.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport { useDisabled } from '../hooks/useDisabled.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../tooltip/index.mjs';\nimport '../tooltip/tooltip.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-88ae49da.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-aeaef131.mjs';\nimport '../_chunks/dep-88c8d9ed.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-4ec29b23.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../tooltip/props.mjs';\nimport '../popup/props.mjs';\nimport '../popup/index.mjs';\nimport '../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../_chunks/dep-5993931e.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/slot.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../hooks/tnode.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../popup/container.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../popup/type.mjs';\nimport '../tooltip/util.mjs';\nimport '../tooltip/type.mjs';\nimport './hooks/useSliderTooltip.mjs';\nimport './slider-mark.mjs';\nimport '../input-number/index.mjs';\nimport '../input-number/input-number.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../button/index.mjs';\nimport '../button/button.mjs';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-bff7e93a.mjs';\nimport '../_chunks/dep-0b414bea.mjs';\nimport '../_chunks/dep-4d4e2af1.mjs';\nimport '../_chunks/dep-fbd4eddb.mjs';\nimport '../_chunks/dep-ae202bc0.mjs';\nimport '../_chunks/dep-69e0f6fc.mjs';\nimport '../_chunks/dep-ea20409b.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-5d3f7c0e.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../loading/props.mjs';\nimport '../hooks/useTeleport.mjs';\nimport '../loading/type.mjs';\nimport '../button/props.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../button/type.mjs';\nimport '../input/index.mjs';\nimport '../input/input.mjs';\nimport '../input/props.mjs';\nimport '../hooks/useReadonly.mjs';\nimport '../hooks/useGlobalIcon.mjs';\nimport '../input/useInput.mjs';\nimport '../form/const.mjs';\nimport '../input/useLengthLimit.mjs';\nimport '../_common/js/log/index.mjs';\nimport '../input/useInputEventHandler.mjs';\nimport '../input/useInputWidth.mjs';\nimport '../input/input-group.mjs';\nimport '../input/input-group-props.mjs';\nimport '../input/type.mjs';\nimport '../input-number/props.mjs';\nimport '../input-number/hooks/useInputNumber.mjs';\nimport '../_common/js/input-number/number.mjs';\nimport '../_common/js/input-number/large-number.mjs';\nimport '../input-number/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar _Slider = defineComponent({\n  name: \"TSlider\",\n  model: {\n    prop: \"value\",\n    event: \"change\"\n  },\n  props: _objectSpread({}, props),\n  setup: function setup(props2) {\n    var disabled = useDisabled();\n    var COMPONENT_NAME = usePrefixClass(\"slider\");\n    var _useCommonClassName = useCommonClassName(),\n      STATUS = _useCommonClassName.STATUS;\n    var _toRefs = toRefs(props2),\n      value = _toRefs.value,\n      modelValue = _toRefs.modelValue;\n    var _useVModel = useVModel(value, modelValue, props2.defaultValue, props2.onChange),\n      _useVModel2 = _slicedToArray(_useVModel, 2),\n      sliderValue = _useVModel2[0],\n      setSliderValue = _useVModel2[1];\n    var sliderContainerRef = ref();\n    var sliderRef = ref();\n    var firstButtonRef = ref();\n    var secondButtonRef = ref();\n    var firstValue = ref(formatSliderValue(sliderValue.value, \"first\"));\n    var secondValue = ref(formatSliderValue(sliderValue.value, \"second\"));\n    var dragging = ref(false);\n    var sliderSize = ref(1);\n    var vertical = computed(function () {\n      return props2.layout === \"vertical\";\n    });\n    var containerClass = computed(function () {\n      return [\"\".concat(COMPONENT_NAME.value, \"__container\"), {\n        \"is-vertical\": vertical.value\n      }];\n    });\n    var sliderClass = computed(function () {\n      return [\"\".concat(COMPONENT_NAME.value), _defineProperty(_defineProperty(_defineProperty({\n        \"is-vertical\": vertical.value\n      }, \"\".concat(COMPONENT_NAME.value, \"--with-input\"), props2.inputNumberProps), \"\".concat(COMPONENT_NAME.value, \"--vertical\"), vertical.value), STATUS.value.disabled, disabled.value)];\n    });\n    var sliderRailClass = computed(function () {\n      return [\"\".concat(COMPONENT_NAME.value, \"__rail\"), {\n        \"show-input\": props2.inputNumberProps,\n        disabled: disabled.value\n      }];\n    });\n    var runwayStyle = computed(function () {\n      return vertical.value ? {\n        height: \"100%\"\n      } : {};\n    });\n    var barStyle = computed(function () {\n      var barStart = props2.range ? \"\".concat(100 * (minValue.value - props2.min) / rangeDiff.value, \"%\") : \"0%\";\n      var currentDiff = props2.range ? maxValue.value - minValue.value : firstValue.value - props2.min;\n      var barSize = \"\".concat(100 * currentDiff / rangeDiff.value, \"%\");\n      return vertical.value ? {\n        height: barSize,\n        bottom: barStart\n      } : {\n        width: barSize,\n        left: barStart\n      };\n    });\n    var rangeDiff = computed(function () {\n      return props2.max - props2.min;\n    });\n    var minValue = computed(function () {\n      return Math.min(firstValue.value, secondValue.value);\n    });\n    var maxValue = computed(function () {\n      return Math.max(firstValue.value, secondValue.value);\n    });\n    var steps = computed(function () {\n      if (!props2.showStep || props2.min > props2.max) return [];\n      if (props2.step === 0) {\n        console.warn(\"[Element Warn][Slider]step should not be 0.\");\n        return [];\n      }\n      var stepCount = rangeDiff.value / props2.step;\n      var stepWidth = 100 * props2.step / rangeDiff.value;\n      var result = [];\n      for (var i = 1; i < stepCount; i++) {\n        result.push(i * stepWidth);\n      }\n      if (props2.range) {\n        var r = result.filter(function (step2) {\n          return step2 < 100 * (minValue.value - props2.min) / rangeDiff.value || props2.step > 100 * (maxValue.value - props2.max) / rangeDiff.value;\n        });\n        return r;\n      }\n      return result.filter(function (step2) {\n        return step2 > 100 * (firstValue.value - props2.min) / rangeDiff.value;\n      });\n    });\n    var precision = computed(function () {\n      var precisions = [props2.min, props2.max, props2.step].map(function (item) {\n        var decimalArr = \"\".concat(item).split(\".\");\n        return decimalArr[1] ? decimalArr[1].length : 0;\n      });\n      return Math.max.apply(null, precisions);\n    });\n    var setValues = function setValues(value2) {\n      var _ref2 = [props2.min, props2.max],\n        min2 = _ref2[0],\n        max2 = _ref2[1];\n      if (min2 > max2) {\n        console.warn(\"[Slider] max should be greater than min.\");\n        return;\n      }\n      if (props2.range && isArray_1(value2)) {\n        var _ref3 = [Math.min.apply(Math, _toConsumableArray(value2)), Math.max.apply(Math, _toConsumableArray(value2))],\n          maxLimit = _ref3[0],\n          minLimit = _ref3[1];\n        if (maxLimit > max2) {\n          maxLimit = firstValue.value;\n        }\n        if (maxLimit < min2) {\n          maxLimit = min2;\n        }\n        if (minLimit < min2) {\n          minLimit = secondValue.value;\n        }\n        if (minLimit > max2) {\n          minLimit = max2;\n        }\n        var _ref4 = [maxLimit, minLimit];\n        firstValue.value = _ref4[0];\n        secondValue.value = _ref4[1];\n        return [maxLimit, minLimit];\n      }\n      var preValue = value2;\n      if (preValue < min2) {\n        preValue = min2;\n      }\n      if (preValue > max2) {\n        preValue = max2;\n      }\n      return preValue;\n    };\n    var emitChange = function emitChange(value2) {\n      var changeValue2 = value2;\n      if (changeValue2 === void 0) {\n        if (props2.range) {\n          changeValue2 = [firstValue.value, secondValue.value];\n        } else {\n          changeValue2 = firstValue.value;\n        }\n      }\n      var fixValue = setValues(changeValue2);\n      setSliderValue(fixValue);\n    };\n    var resetSize = function resetSize() {\n      if (sliderRef.value) {\n        sliderSize.value = sliderRef.value[\"client\".concat(vertical.value ? \"Height\" : \"Width\")];\n      }\n    };\n    var isAlreadyMount = ref(false);\n    var init = function init() {\n      var valuetext;\n      if (props2.range) {\n        if (isArray_1(sliderValue.value)) {\n          firstValue.value = Math.max(props2.min || 0, sliderValue.value[0]);\n          secondValue.value = Math.min(props2.max || 100, sliderValue.value[1]);\n        } else {\n          firstValue.value = props2.min || 0;\n          secondValue.value = props2.max || 100;\n        }\n        valuetext = \"\".concat(firstValue.value, \"-\").concat(secondValue.value);\n      } else {\n        if (!isNumber_1(sliderValue.value)) {\n          firstValue.value = props2.min;\n        } else {\n          firstValue.value = Math.min(props2.max, Math.max(props2.min, sliderValue.value));\n        }\n        valuetext = String(firstValue.value);\n      }\n      if (sliderContainerRef.value) {\n        sliderContainerRef.value.setAttribute(\"aria-valuetext\", valuetext);\n      }\n      resetSize();\n      window.addEventListener(\"resize\", resetSize);\n    };\n    var setPosition = function setPosition(percent) {\n      var targetValue = percent * rangeDiff.value / 100;\n      targetValue = props2.min + targetValue;\n      if (!props2.range && firstButtonRef.value) {\n        firstButtonRef.value.setPosition(percent);\n        return;\n      }\n      var button;\n      if (Math.abs(minValue.value - targetValue) < Math.abs(maxValue.value - targetValue)) {\n        button = firstValue.value < secondValue.value ? \"button1\" : \"button2\";\n      } else {\n        button = firstValue.value > secondValue.value ? \"button1\" : \"button2\";\n      }\n      if (button === \"button1\" && firstButtonRef.value) {\n        firstButtonRef.value.setPosition(percent);\n      }\n      if (button === \"button2\" && secondButtonRef.value) {\n        secondButtonRef.value.setPosition(percent);\n      }\n    };\n    var getFixValue = function getFixValue() {\n      var changeValue2 = props2.range ? [firstValue.value, secondValue.value] : firstValue.value;\n      return setValues(changeValue2);\n    };\n    var onSliderClick = function onSliderClick(event) {\n      var _props2$onChangeEnd;\n      if (disabled.value || dragging.value) {\n        return;\n      }\n      if (!sliderRef.value) return;\n      resetSize();\n      var value2 = 0;\n      if (vertical.value) {\n        var sliderOffsetBottom = sliderRef.value.getBoundingClientRect().bottom;\n        value2 = (sliderOffsetBottom - event.clientY) / sliderSize.value * 100;\n        setPosition(value2);\n      } else {\n        var sliderOffsetLeft = sliderRef.value.getBoundingClientRect().left;\n        value2 = (event.clientX - sliderOffsetLeft) / sliderSize.value * 100;\n        setPosition(value2);\n      }\n      var fixValue = getFixValue();\n      (_props2$onChangeEnd = props2.onChangeEnd) === null || _props2$onChangeEnd === void 0 || _props2$onChangeEnd.call(props2, fixValue);\n    };\n    var changeValue = function changeValue(point) {\n      var _props2$onChangeEnd2;\n      if (disabled.value || dragging.value) {\n        return;\n      }\n      resetSize();\n      var value2 = Number(point / rangeDiff.value * 100);\n      setPosition(value2);\n      emitChange(point);\n      var fixValue = getFixValue();\n      (_props2$onChangeEnd2 = props2.onChangeEnd) === null || _props2$onChangeEnd2 === void 0 || _props2$onChangeEnd2.call(props2, fixValue);\n    };\n    watch(function () {\n      return sliderValue.value;\n    }, function (newVal) {\n      if (dragging.value === true) return;\n      if (isArray_1(newVal) && props2.range) {\n        var _newVal = _slicedToArray(newVal, 2);\n        firstValue.value = _newVal[0];\n        secondValue.value = _newVal[1];\n      } else {\n        firstValue.value = newVal;\n      }\n    });\n    watch([firstValue, secondValue, dragging], function (newStates, prevStates) {\n      if (newStates[0] !== prevStates[0]) {\n        if (props2.range) {\n          emitChange([minValue.value, maxValue.value]);\n        } else {\n          emitChange(firstValue.value);\n        }\n      }\n      if (newStates[1] !== prevStates[1]) {\n        if (props2.range) {\n          emitChange([minValue.value, maxValue.value]);\n        }\n      }\n      if (newStates[2] !== prevStates[2] && newStates[2] === false) {\n        init();\n      }\n    });\n    onMounted(function () {\n      init();\n      isAlreadyMount.value = true;\n    });\n    onBeforeUnmount(function () {\n      window.removeEventListener(\"resize\", resetSize);\n    });\n    var markConfig = computed(function () {\n      return {\n        max: props2.max,\n        min: props2.min,\n        marks: props2.marks,\n        vertical: vertical.value,\n        prefixName: COMPONENT_NAME.value\n      };\n    });\n    var renderMask = useSliderMark(markConfig);\n    var inputConfig = computed(function () {\n      return {\n        max: props2.max,\n        min: props2.min,\n        inputNumberProps: props2.inputNumberProps,\n        step: props2.step,\n        prefixName: COMPONENT_NAME.value,\n        vertical: vertical.value,\n        disabled: disabled.value\n      };\n    });\n    var renderInputNumber = useSliderInput(inputConfig);\n    var renderInputButton = function renderInputButton() {\n      var firstInputVal = setValues(firstValue.value);\n      var firstInputOnChange = function firstInputOnChange(v) {\n        firstValue.value = setValues(v);\n      };\n      var secondInputVal = setValues(secondValue.value);\n      var secondInputOnChange = function secondInputOnChange(v) {\n        secondValue.value = setValues(v);\n      };\n      return createVNode(\"div\", {\n        \"class\": [\"\".concat(COMPONENT_NAME.value, \"__input-container\"), {\n          \"is-vertical\": vertical.value\n        }]\n      }, [renderInputNumber(firstInputVal, firstInputOnChange), props2.range && createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__center-line\")\n      }, null), props2.range && renderInputNumber(secondInputVal, secondInputOnChange)]);\n    };\n    var toggleDragging = function toggleDragging(toState) {\n      dragging.value = toState;\n    };\n    var _toRefs2 = toRefs(props2),\n      min = _toRefs2.min,\n      max = _toRefs2.max,\n      step = _toRefs2.step;\n    provide(sliderPropsInjectKey, reactive({\n      min: min,\n      max: max,\n      step: step,\n      dragging: dragging,\n      toggleDragging: toggleDragging,\n      precision: precision,\n      disabled: disabled,\n      resetSize: resetSize,\n      sliderSize: sliderSize\n    }));\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": containerClass.value,\n        \"ref\": sliderContainerRef\n      }, [createVNode(\"div\", {\n        \"class\": sliderClass.value,\n        \"role\": \"slider\",\n        \"aria-valuemin\": props2.min,\n        \"aria-valuemax\": props2.max,\n        \"aria-orientation\": props2.layout,\n        \"aria-disabled\": disabled.value,\n        \"tooltip-props\": props2.tooltipProps\n      }, [createVNode(\"div\", {\n        \"class\": sliderRailClass.value,\n        \"style\": runwayStyle.value,\n        \"onClick\": onSliderClick,\n        \"ref\": sliderRef\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__track\"),\n        \"style\": barStyle.value\n      }, null), createVNode(_SliderButton, {\n        \"vertical\": vertical.value,\n        \"value\": firstValue.value,\n        \"ref\": firstButtonRef,\n        \"disabled\": disabled.value,\n        \"range\": props2.range,\n        \"position\": \"start\",\n        \"tooltip-props\": props2.tooltipProps,\n        \"label\": props2.label,\n        \"onInput\": function onInput(v) {\n          firstValue.value = v;\n        },\n        \"onMouseup\": function onMouseup() {\n          var _props2$onChangeEnd3;\n          var fixValue = getFixValue();\n          (_props2$onChangeEnd3 = props2.onChangeEnd) === null || _props2$onChangeEnd3 === void 0 || _props2$onChangeEnd3.call(props2, fixValue);\n        }\n      }, null), props2.range && createVNode(_SliderButton, {\n        \"vertical\": vertical.value,\n        \"value\": secondValue.value,\n        \"ref\": secondButtonRef,\n        \"disabled\": disabled.value,\n        \"label\": props2.label,\n        \"range\": props2.range,\n        \"position\": \"end\",\n        \"tooltip-props\": props2.tooltipProps,\n        \"onInput\": function onInput(v) {\n          secondValue.value = v;\n        },\n        \"onMouseup\": function onMouseup() {\n          var _props2$onChangeEnd4;\n          var fixValue = getFixValue();\n          (_props2$onChangeEnd4 = props2.onChangeEnd) === null || _props2$onChangeEnd4 === void 0 || _props2$onChangeEnd4.call(props2, fixValue);\n        }\n      }, null), props2.showStep && createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__stops\")\n      }, [steps.value.map(function (item, key) {\n        if (item.position === 0 || item.position === 100) return null;\n        return createVNode(\"div\", {\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__stop\"),\n          \"key\": key,\n          \"style\": getStopStyle(item, vertical.value)\n        }, null);\n      })]), renderMask(changeValue)])]), isAlreadyMount.value && props2.inputNumberProps && renderInputButton()]);\n    };\n  }\n});\nexport { _Slider as default };","map":{"version":3,"names":["_Slider","defineComponent","name","model","prop","event","props","_objectSpread","setup","props2","disabled","useDisabled","COMPONENT_NAME","usePrefixClass","_useCommonClassName","useCommonClassName","STATUS","_toRefs","toRefs","value","modelValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","sliderValue","setSliderValue","sliderContainerRef","ref","sliderRef","firstButtonRef","secondButtonRef","firstValue","formatSliderValue","secondValue","dragging","sliderSize","vertical","computed","layout","containerClass","concat","sliderClass","_defineProperty","inputNumberProps","sliderRailClass","runwayStyle","height","barStyle","barStart","range","minValue","min","rangeDiff","currentDiff","maxValue","barSize","bottom","width","left","max","Math","steps","showStep","step","console","warn","stepCount","stepWidth","result","i","push","r","filter","step2","precision","precisions","map","item","decimalArr","split","length","apply","setValues","value2","_ref2","min2","max2","isArray_1","_ref3","_toConsumableArray","maxLimit","minLimit","_ref4","preValue","emitChange","changeValue2","fixValue","resetSize","isAlreadyMount","init","valuetext","isNumber_1","String","setAttribute","window","addEventListener","setPosition","percent","targetValue","button","abs","getFixValue","onSliderClick","_props2$onChangeEnd","sliderOffsetBottom","getBoundingClientRect","clientY","sliderOffsetLeft","clientX","onChangeEnd","call","changeValue","point","_props2$onChangeEnd2","Number","watch","newVal","_newVal","newStates","prevStates","onMounted","onBeforeUnmount","removeEventListener","markConfig","marks","prefixName","renderMask","useSliderMark","inputConfig","renderInputNumber","useSliderInput","renderInputButton","firstInputVal","firstInputOnChange","v","secondInputVal","secondInputOnChange","createVNode","toggleDragging","toState","_toRefs2","provide","sliderPropsInjectKey","reactive","tooltipProps","_SliderButton","label","onInput","onMouseup","_props2$onChangeEnd3","_props2$onChangeEnd4","key","position","getStopStyle"],"sources":["../../src/slider/slider.tsx"],"sourcesContent":["import {\n  defineComponent,\n  VNode,\n  ref,\n  reactive,\n  provide,\n  computed,\n  onBeforeUnmount,\n  onMounted,\n  watch,\n  toRefs,\n} from 'vue';\nimport isNumber from 'lodash/isNumber';\nimport isArray from 'lodash/isArray';\nimport props from './props';\nimport TSliderButton from './slider-button';\nimport { SliderValue } from './type';\n\n// hooks\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useSliderMark } from './hooks/useSliderMark';\nimport { useSliderInput } from './hooks/useSliderInput';\nimport { formatSliderValue, getStopStyle } from './util/common';\nimport { sliderPropsInjectKey } from './util/constants';\nimport useVModel from '../hooks/useVModel';\nimport { useDisabled } from '../hooks/useDisabled';\n\ninterface SliderButtonType {\n  setPosition: (param: number) => {};\n}\nexport default defineComponent({\n  name: 'TSlider',\n  model: {\n    prop: 'value',\n    event: 'change',\n  },\n  props: { ...props },\n\n  setup(props) {\n    const disabled = useDisabled();\n    const COMPONENT_NAME = usePrefixClass('slider');\n    const { STATUS } = useCommonClassName();\n    const { value, modelValue } = toRefs(props) as any;\n    const [sliderValue, setSliderValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n\n    const sliderContainerRef = ref<HTMLDivElement>();\n    const sliderRef = ref<HTMLDivElement>();\n    const firstButtonRef = ref<SliderButtonType>();\n    const secondButtonRef = ref<SliderButtonType>();\n\n    const firstValue = ref(formatSliderValue(sliderValue.value, 'first'));\n    const secondValue = ref(formatSliderValue(sliderValue.value, 'second'));\n    const dragging = ref(false);\n    const sliderSize = ref(1);\n\n    const vertical = computed(() => {\n      return props.layout === 'vertical';\n    });\n\n    /** ----------------- 样式计算 start ------------- */\n    const containerClass = computed(() => [`${COMPONENT_NAME.value}__container`, { 'is-vertical': vertical.value }]);\n    const sliderClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}`,\n        {\n          'is-vertical': vertical.value,\n          [`${COMPONENT_NAME.value}--with-input`]: props.inputNumberProps,\n          [`${COMPONENT_NAME.value}--vertical`]: vertical.value,\n          [STATUS.value.disabled]: disabled.value,\n        },\n      ];\n    });\n    const sliderRailClass = computed(() => [\n      `${COMPONENT_NAME.value}__rail`,\n      { 'show-input': props.inputNumberProps, disabled: disabled.value },\n    ]);\n    const runwayStyle = computed(() => {\n      return vertical.value ? { height: '100%' } : {};\n    });\n    const barStyle = computed(() => {\n      const barStart = props.range ? `${(100 * (minValue.value - props.min)) / rangeDiff.value}%` : '0%';\n      const currentDiff = props.range ? maxValue.value - minValue.value : firstValue.value - props.min;\n      const barSize = `${(100 * currentDiff) / rangeDiff.value}%`;\n      return vertical.value\n        ? {\n            height: barSize,\n            bottom: barStart,\n          }\n        : {\n            width: barSize,\n            left: barStart,\n          };\n    });\n    /** ----------------- 样式计算 end ------------- */\n\n    // 差值范围\n    const rangeDiff = computed(() => {\n      return props.max - props.min;\n    });\n    const minValue = computed(() => {\n      return Math.min(firstValue.value, secondValue.value);\n    });\n    const maxValue = computed(() => {\n      return Math.max(firstValue.value, secondValue.value);\n    });\n    const steps = computed(() => {\n      if (!props.showStep || props.min > props.max) return [];\n      if (props.step === 0) {\n        console.warn('[Element Warn][Slider]step should not be 0.');\n        return [];\n      }\n      const stepCount = rangeDiff.value / props.step;\n      const stepWidth = (100 * props.step) / rangeDiff.value;\n      const result = [];\n      for (let i = 1; i < stepCount; i++) {\n        result.push(i * stepWidth);\n      }\n      if (props.range) {\n        const r = result.filter(\n          (step) =>\n            step < (100 * (minValue.value - props.min)) / rangeDiff.value ||\n            props.step > (100 * (maxValue.value - props.max)) / rangeDiff.value,\n        );\n        return r;\n      }\n      return result.filter((step) => step > (100 * (firstValue.value - props.min)) / rangeDiff.value);\n    });\n    const precision = computed(() => {\n      const precisions = [props.min, props.max, props.step].map((item) => {\n        const decimalArr = `${item}`.split('.');\n        return decimalArr[1] ? decimalArr[1].length : 0;\n      });\n      return Math.max.apply(null, precisions);\n    });\n    // 防止值越级\n    const setValues = (value: SliderValue): SliderValue => {\n      const [min, max] = [props.min, props.max];\n      if (min > max) {\n        console.warn('[Slider] max should be greater than min.');\n        return;\n      }\n      // 双向滑块\n      if (props.range && isArray(value)) {\n        let [maxLimit, minLimit] = [Math.min(...value), Math.max(...value)];\n        if (maxLimit > max) {\n          maxLimit = firstValue.value;\n        }\n        if (maxLimit < min) {\n          maxLimit = min;\n        }\n        if (minLimit < min) {\n          minLimit = secondValue.value;\n        }\n        if (minLimit > max) {\n          minLimit = max;\n        }\n        [firstValue.value, secondValue.value] = [maxLimit, minLimit];\n        return [maxLimit, minLimit];\n      }\n      let preValue = value as number;\n      if (preValue < min) {\n        preValue = min;\n      }\n      if (preValue > max) {\n        preValue = max;\n      }\n      return preValue;\n    };\n    // 只要触发修改就要有这个方法抛出change事件\n    const emitChange = (value: SliderValue) => {\n      let changeValue = value;\n      if (changeValue === undefined) {\n        if (props.range) {\n          changeValue = [firstValue.value, secondValue.value];\n        } else {\n          changeValue = firstValue.value;\n        }\n      }\n      const fixValue: SliderValue = setValues(changeValue);\n      setSliderValue(fixValue);\n    };\n\n    const resetSize = () => {\n      if (sliderRef.value) {\n        sliderSize.value = sliderRef.value[`client${vertical.value ? 'Height' : 'Width'}`];\n      }\n    };\n\n    // 是否以完成挂载（部分组合组件如inputNumber依赖于首次init后的状态值进行渲染）\n    const isAlreadyMount = ref(false);\n    // 初始化传入的value\n    const init = () => {\n      let valuetext: string | number;\n      if (props.range) {\n        if (isArray(sliderValue.value)) {\n          firstValue.value = Math.max(props.min || 0, sliderValue.value[0]);\n          secondValue.value = Math.min(props.max || 100, sliderValue.value[1]);\n        } else {\n          firstValue.value = props.min || 0;\n          secondValue.value = props.max || 100;\n        }\n        valuetext = `${firstValue.value}-${secondValue.value}`;\n      } else {\n        if (!isNumber(sliderValue.value)) {\n          firstValue.value = props.min;\n        } else {\n          firstValue.value = Math.min(props.max, Math.max(props.min, sliderValue.value as number));\n        }\n        valuetext = String(firstValue.value);\n      }\n      if (sliderContainerRef.value) {\n        sliderContainerRef.value.setAttribute('aria-valuetext', valuetext);\n      }\n      resetSize();\n      window.addEventListener('resize', resetSize);\n    };\n    // 相应button的位置\n    const setPosition = (percent: number): void => {\n      let targetValue = (percent * rangeDiff.value) / 100;\n      targetValue = props.min + targetValue;\n      if (!props.range && firstButtonRef.value) {\n        firstButtonRef.value.setPosition(percent);\n        return;\n      }\n      let button;\n      if (Math.abs(minValue.value - targetValue) < Math.abs(maxValue.value - targetValue)) {\n        button = firstValue.value < secondValue.value ? 'button1' : 'button2';\n      } else {\n        button = firstValue.value > secondValue.value ? 'button1' : 'button2';\n      }\n      if (button === 'button1' && firstButtonRef.value) {\n        firstButtonRef.value.setPosition(percent);\n      }\n      if (button === 'button2' && secondButtonRef.value) {\n        secondButtonRef.value.setPosition(percent);\n      }\n    };\n\n    const getFixValue = () => {\n      const changeValue = props.range ? [firstValue.value, secondValue.value] : firstValue.value;\n      return setValues(changeValue);\n    };\n\n    // 全局点击\n    const onSliderClick = (event: MouseEvent): void => {\n      if (disabled.value || dragging.value) {\n        return;\n      }\n      if (!sliderRef.value) return;\n      resetSize();\n      let value = 0;\n      if (vertical.value) {\n        const sliderOffsetBottom = sliderRef.value.getBoundingClientRect().bottom;\n        value = ((sliderOffsetBottom - event.clientY) / sliderSize.value) * 100;\n        setPosition(value);\n      } else {\n        const sliderOffsetLeft = sliderRef.value.getBoundingClientRect().left;\n        value = ((event.clientX - sliderOffsetLeft) / sliderSize.value) * 100;\n        setPosition(value);\n      }\n      const fixValue = getFixValue();\n      props.onChangeEnd?.(fixValue);\n    };\n\n    // mark 点击触发修改事件\n    const changeValue = (point: number) => {\n      if (disabled.value || dragging.value) {\n        return;\n      }\n      resetSize();\n      const value = Number((point / rangeDiff.value) * 100);\n      setPosition(value);\n      emitChange(point);\n      const fixValue = getFixValue();\n      props.onChangeEnd?.(fixValue);\n    };\n\n    /** 副作用监听 */\n    watch(\n      () => sliderValue.value,\n      (newVal) => {\n        if (dragging.value === true) return;\n        if (isArray(newVal) && props.range) {\n          [firstValue.value, secondValue.value] = newVal;\n        } else {\n          firstValue.value = newVal as number;\n        }\n      },\n    );\n\n    watch([firstValue, secondValue, dragging], (newStates, prevStates) => {\n      if (newStates[0] !== prevStates[0]) {\n        if (props.range) {\n          emitChange([minValue.value, maxValue.value]);\n        } else {\n          emitChange(firstValue.value);\n        }\n      }\n      if (newStates[1] !== prevStates[1]) {\n        if (props.range) {\n          emitChange([minValue.value, maxValue.value]);\n        }\n      }\n      if (newStates[2] !== prevStates[2] && newStates[2] === false) {\n        init();\n      }\n    });\n\n    /** 挂载&卸载 */\n    onMounted(() => {\n      init();\n      isAlreadyMount.value = true;\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', resetSize);\n    });\n\n    /** -------------------------- 渲染相关逻辑 start --------------------------  */\n    const markConfig = computed(() => ({\n      max: props.max,\n      min: props.min,\n      marks: props.marks,\n      vertical: vertical.value,\n      prefixName: COMPONENT_NAME.value,\n    }));\n    const renderMask = useSliderMark(markConfig);\n\n    const inputConfig = computed(() => ({\n      max: props.max,\n      min: props.min,\n      inputNumberProps: props.inputNumberProps,\n      step: props.step,\n      prefixName: COMPONENT_NAME.value,\n      vertical: vertical.value,\n      disabled: disabled.value,\n    }));\n    const renderInputNumber = useSliderInput(inputConfig);\n\n    const renderInputButton = (): VNode => {\n      const firstInputVal = setValues(firstValue.value) as number;\n      const firstInputOnChange = (v: number) => {\n        firstValue.value = setValues(v) as number;\n      };\n      const secondInputVal = setValues(secondValue.value) as number;\n      const secondInputOnChange = (v: number) => {\n        secondValue.value = setValues(v) as number;\n      };\n      return (\n        <div\n          class={[\n            `${COMPONENT_NAME.value}__input-container`,\n            {\n              'is-vertical': vertical.value,\n            },\n          ]}\n        >\n          {renderInputNumber(firstInputVal, firstInputOnChange)}\n          {props.range && <div class={`${COMPONENT_NAME.value}__center-line`} />}\n          {props.range && renderInputNumber(secondInputVal, secondInputOnChange)}\n        </div>\n      );\n    };\n    /** -------------------------- 渲染相关逻辑 end --------------------------  */\n\n    /** 父子共用状态&方法 */\n    const toggleDragging = (toState: boolean) => {\n      dragging.value = toState;\n    };\n\n    const { min, max, step } = toRefs(props);\n    provide(\n      sliderPropsInjectKey,\n      reactive({\n        min,\n        max,\n        step,\n        dragging,\n        toggleDragging,\n        precision,\n        disabled,\n        resetSize,\n        sliderSize,\n      }),\n    );\n\n    return () => (\n      <div class={containerClass.value} ref={sliderContainerRef}>\n        <div\n          class={sliderClass.value}\n          role=\"slider\"\n          aria-valuemin={props.min}\n          aria-valuemax={props.max}\n          aria-orientation={props.layout}\n          aria-disabled={disabled.value}\n          tooltip-props={props.tooltipProps}\n        >\n          <div class={sliderRailClass.value} style={runwayStyle.value} onClick={onSliderClick} ref={sliderRef}>\n            <div class={`${COMPONENT_NAME.value}__track`} style={barStyle.value} />\n            <TSliderButton\n              vertical={vertical.value}\n              value={firstValue.value}\n              ref={firstButtonRef}\n              disabled={disabled.value}\n              range={props.range}\n              position=\"start\"\n              tooltip-props={props.tooltipProps}\n              label={props.label}\n              onInput={(v: number) => {\n                firstValue.value = v;\n              }}\n              onMouseup={() => {\n                const fixValue = getFixValue();\n                props.onChangeEnd?.(fixValue);\n              }}\n            />\n            {props.range && (\n              <TSliderButton\n                vertical={vertical.value}\n                value={secondValue.value}\n                ref={secondButtonRef}\n                disabled={disabled.value}\n                label={props.label}\n                range={props.range}\n                position=\"end\"\n                tooltip-props={props.tooltipProps}\n                onInput={(v: number) => {\n                  secondValue.value = v;\n                }}\n                onMouseup={() => {\n                  const fixValue = getFixValue();\n                  props.onChangeEnd?.(fixValue);\n                }}\n              />\n            )}\n            {props.showStep && (\n              <div class={`${COMPONENT_NAME.value}__stops`}>\n                {steps.value.map((item: any, key) => {\n                  if (item.position === 0 || item.position === 100) return null;\n                  return (\n                    <div class={`${COMPONENT_NAME.value}__stop`} key={key} style={getStopStyle(item, vertical.value)} />\n                  );\n                })}\n              </div>\n            )}\n            {renderMask(changeValue)}\n          </div>\n        </div>\n        {isAlreadyMount.value && props.inputNumberProps && renderInputButton()}\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}