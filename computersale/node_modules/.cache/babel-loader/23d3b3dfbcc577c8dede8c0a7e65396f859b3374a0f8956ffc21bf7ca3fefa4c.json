{"ast":null,"code":"import { reactive, ref, onMounted, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'MaintainComponent',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const formData = reactive({\n      labelAlign: 'right',\n      aid: ''\n    });\n    const data = ref([]);\n    const total = ref(0);\n    const editFormData = reactive({\n      sales_detail: '',\n      way: '',\n      service_time: '',\n      eid: ''\n    });\n    const visible = ref(false);\n    const stripe = ref(true);\n    const bordered = ref(true);\n    const hover = ref(false);\n    const tableLayout = ref(false);\n    const size = ref('medium');\n    const showHeader = ref(true);\n    const columns = ref([{\n      colKey: 'aid',\n      title: '维修单号',\n      width: '100'\n    }, {\n      colKey: 'apply_time',\n      title: '申请时间',\n      width: '150'\n    }, {\n      colKey: 'cname',\n      title: '顾客名',\n      width: '100'\n    }, {\n      colKey: 'status',\n      title: '订单状态',\n      width: '100'\n    }, {\n      colKey: 'sales_detail',\n      title: '售后详细',\n      width: '150'\n    }, {\n      colKey: 'way',\n      title: '售后方式',\n      width: '100'\n    }, {\n      colKey: 'service_time',\n      title: '服务时间',\n      width: '150'\n    }, {\n      colKey: 'eid',\n      title: '职工名',\n      width: '100'\n    }, {\n      colKey: 'profit',\n      title: '总价',\n      width: '100'\n    }, {\n      colKey: 'edit',\n      title: '编辑信息',\n      width: '100',\n      cell: (h, {\n        row\n      }) => {\n        return _createVNode(_resolveComponent(\"t-button\"), {\n          \"theme\": \"primary\",\n          \"onClick\": () => showEditDialog(row)\n        }, {\n          default: () => [_createTextVNode(\"\\u7F16\\u8F91\")]\n        });\n      }\n    }, {\n      colKey: 'confirm',\n      title: '确认',\n      width: '100',\n      cell: (h, {\n        row\n      }) => {\n        return _createVNode(_resolveComponent(\"t-button\"), {\n          \"theme\": \"primary\",\n          \"disabled\": row.status !== '待维修',\n          \"onClick\": () => confirmRepair(row.aid)\n        }, {\n          default: () => [_createTextVNode(\"\\u786E\\u8BA4\")]\n        });\n      }\n    }]);\n    const handleRowClick = e => {\n      console.log(e);\n    };\n    const pagination = {\n      defaultCurrent: 1,\n      defaultPageSize: 5,\n      total: total.value\n    };\n    const fetchData = async (aid = '') => {\n      try {\n        let response;\n        if (aid) {\n          response = await axios.get(`/api/repairs/${aid}`);\n          data.value = [response.data];\n        } else {\n          response = await axios.get('/api/repairs');\n          data.value = response.data;\n        }\n        total.value = data.value.length;\n        pagination.total = total.value;\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n    const handleQuery = () => {\n      fetchData(formData.aid);\n    };\n    const showEditDialog = row => {\n      editFormData.sales_detail = row.sales_detail;\n      editFormData.way = row.way;\n      editFormData.service_time = row.service_time;\n      editFormData.eid = row.eid;\n      visible.value = true;\n    };\n    const confirmRepair = aid => {\n      console.log('维修单已确认:', aid);\n      // 在此处添加确认维修单的逻辑，例如发送请求到后端\n    };\n    const onConfirm = () => {\n      console.log('编辑后的数据:', editFormData);\n      visible.value = false;\n    };\n    const employeeOptions = [{\n      label: '张三',\n      value: '1001'\n    }, {\n      label: '李四',\n      value: '1002'\n    }, {\n      label: '王五',\n      value: '1003'\n    }];\n    const close = context => {\n      console.log('关闭弹窗，点击关闭按钮、按下ESC、点击蒙层等触发', context);\n    };\n    const onCancel = context => {\n      console.log('点击了取消按钮', context);\n    };\n    const onEscKeydown = context => {\n      console.log('按下了ESC', context);\n    };\n    const onCloseBtnClick = context => {\n      console.log('点击了关闭按钮', context);\n    };\n    const onOverlayClick = context => {\n      console.log('点击了蒙层', context);\n    };\n    onMounted(() => {\n      fetchData();\n    });\n    const __returned__ = {\n      formData,\n      data,\n      total,\n      editFormData,\n      visible,\n      stripe,\n      bordered,\n      hover,\n      tableLayout,\n      size,\n      showHeader,\n      columns,\n      handleRowClick,\n      pagination,\n      fetchData,\n      handleQuery,\n      showEditDialog,\n      confirmRepair,\n      onConfirm,\n      employeeOptions,\n      close,\n      onCancel,\n      onEscKeydown,\n      onCloseBtnClick,\n      onOverlayClick,\n      reactive,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","onMounted","createTextVNode","_createTextVNode","resolveComponent","_resolveComponent","createVNode","_createVNode","axios","formData","labelAlign","aid","data","total","editFormData","sales_detail","way","service_time","eid","visible","stripe","bordered","hover","tableLayout","size","showHeader","columns","colKey","title","width","cell","h","row","onClick","showEditDialog","default","status","confirmRepair","handleRowClick","e","console","log","pagination","defaultCurrent","defaultPageSize","value","fetchData","response","get","length","error","handleQuery","onConfirm","employeeOptions","label","close","context","onCancel","onEscKeydown","onCloseBtnClick","onOverlayClick"],"sources":["E:/三年级上册/ComputerSale/computersale/src/views/MaintainComponent.vue"],"sourcesContent":["<script setup lang=\"jsx\">\r\nimport { reactive, ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\n\r\nconst formData = reactive({\r\n  labelAlign: 'right',\r\n  aid: '',\r\n});\r\n\r\nconst data = ref([]);\r\nconst total = ref(0);\r\nconst editFormData = reactive({ sales_detail: '', way: '', service_time: '', eid: '' });\r\nconst visible = ref(false);\r\n\r\nconst stripe = ref(true);\r\nconst bordered = ref(true);\r\nconst hover = ref(false);\r\nconst tableLayout = ref(false);\r\nconst size = ref('medium');\r\nconst showHeader = ref(true);\r\n\r\nconst columns = ref([\r\n  { colKey: 'aid', title: '维修单号', width: '100' },\r\n  { colKey: 'apply_time', title: '申请时间', width: '150' },\r\n  { colKey: 'cname', title: '顾客名', width: '100' },\r\n  { colKey: 'status', title: '订单状态', width: '100' },\r\n  { colKey: 'sales_detail', title: '售后详细', width: '150' },\r\n  { colKey: 'way', title: '售后方式', width: '100' },\r\n  { colKey: 'service_time', title: '服务时间', width: '150' },\r\n  { colKey: 'eid', title: '职工名', width: '100' },\r\n  { colKey: 'profit', title: '总价', width: '100' },\r\n  { colKey: 'edit', title: '编辑信息', width: '100', cell: (h, { row }) => {\r\n    return <t-button theme=\"primary\" onClick={() => showEditDialog(row)}>编辑</t-button>;\r\n  }},\r\n  { colKey: 'confirm', title: '确认', width: '100', cell: (h, { row }) => {\r\n    return (\r\n      <t-button\r\n        theme=\"primary\"\r\n        disabled={row.status !== '待维修'}\r\n        onClick={() => confirmRepair(row.aid)}\r\n      >\r\n        确认\r\n      </t-button>\r\n    );\r\n  }},\r\n]);\r\n\r\nconst handleRowClick = (e) => {\r\n  console.log(e);\r\n};\r\n\r\nconst pagination = {\r\n  defaultCurrent: 1,\r\n  defaultPageSize: 5,\r\n  total: total.value,\r\n};\r\n\r\nconst fetchData = async (aid = '') => {\r\n  try {\r\n    let response;\r\n    if (aid) {\r\n      response = await axios.get(`/api/repairs/${aid}`);\r\n      data.value = [response.data];\r\n    } else {\r\n      response = await axios.get('/api/repairs');\r\n      data.value = response.data;\r\n    }\r\n    total.value = data.value.length;\r\n    pagination.total = total.value;\r\n  } catch (error) {\r\n    console.error(\"Error fetching data:\", error);\r\n  }\r\n};\r\n\r\nconst handleQuery = () => {\r\n  fetchData(formData.aid);\r\n};\r\n\r\nconst showEditDialog = (row) => {\r\n  editFormData.sales_detail = row.sales_detail;\r\n  editFormData.way = row.way;\r\n  editFormData.service_time = row.service_time;\r\n  editFormData.eid = row.eid;\r\n  visible.value = true;\r\n};\r\n\r\nconst confirmRepair = (aid) => {\r\n  console.log('维修单已确认:', aid);\r\n  // 在此处添加确认维修单的逻辑，例如发送请求到后端\r\n};\r\n\r\nconst onConfirm = () => {\r\n  console.log('编辑后的数据:', editFormData);\r\n  visible.value = false;\r\n};\r\n\r\nconst employeeOptions = [\r\n  { label: '张三', value: '1001' },\r\n  { label: '李四', value: '1002' },\r\n  { label: '王五', value: '1003' },\r\n];\r\n\r\nconst close = (context) => {\r\n  console.log('关闭弹窗，点击关闭按钮、按下ESC、点击蒙层等触发', context);\r\n};\r\n\r\nconst onCancel = (context) => {\r\n  console.log('点击了取消按钮', context);\r\n};\r\n\r\nconst onEscKeydown = (context) => {\r\n  console.log('按下了ESC', context);\r\n};\r\n\r\nconst onCloseBtnClick = (context) => {\r\n  console.log('点击了关闭按钮', context);\r\n};\r\n\r\nconst onOverlayClick = (context) => {\r\n  console.log('点击了蒙层', context);\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}