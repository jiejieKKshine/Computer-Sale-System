{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { ref, watch } from 'vue';\nimport { getFileUrlByFileRaw } from '../_common/js/upload/utils.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_common/js/log/log.mjs';\nfunction useImagePreviewUrl(imgUrl) {\n  var previewUrl = ref(\"\");\n  watch([imgUrl], function (_ref, _ref2) {\n    var _ref3 = _slicedToArray(_ref, 1),\n      imgUrl2 = _ref3[0];\n    var _ref4 = _slicedToArray(_ref2, 1),\n      preImgUrl = _ref4[0];\n    if (preImgUrl === imgUrl2) return;\n    if (typeof imgUrl2 === \"string\") {\n      previewUrl.value = imgUrl2;\n      return;\n    }\n    getFileUrlByFileRaw(imgUrl2).then(function (url) {\n      previewUrl.value = url;\n    });\n  }, {\n    immediate: true\n  });\n  return {\n    previewUrl: previewUrl\n  };\n}\nexport { useImagePreviewUrl };","map":{"version":3,"names":["useImagePreviewUrl","imgUrl","previewUrl","ref","watch","_ref","_ref2","_ref3","_slicedToArray","imgUrl2","_ref4","preImgUrl","value","getFileUrlByFileRaw","then","url","immediate"],"sources":["../../src/hooks/useImagePreviewUrl.ts"],"sourcesContent":["import { ComputedRef, ref, Ref, watch } from 'vue';\nimport { getFileUrlByFileRaw } from '../_common/js/upload/utils';\n\nexport function useImagePreviewUrl(imgUrl: Ref<string | File> | ComputedRef<string | File>) {\n  const previewUrl = ref('');\n\n  watch(\n    [imgUrl],\n    ([imgUrl], [preImgUrl]) => {\n      if (preImgUrl === imgUrl) return;\n      if (typeof imgUrl === 'string') {\n        previewUrl.value = imgUrl;\n        return;\n      }\n      getFileUrlByFileRaw(imgUrl).then((url) => {\n        previewUrl.value = url;\n      });\n    },\n    { immediate: true },\n  );\n\n  return { previewUrl };\n}\n"],"mappings":";;;;;;;;;;;AAGO,SAASA,mBAAmBC,MAAyD;EACpF,IAAAC,UAAA,GAAaC,GAAA,CAAI,EAAE;EAEzBC,KAAA,CACE,CAACH,MAAM,GACP,UAAAI,IAAA,EAAAC,KAAA,EAA2B;IAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAH,IAAA;MAAzBI,OAAM,GAAAF,KAAA;IAAA,IAAAG,KAAA,GAAAF,cAAA,CAAAF,KAAA;MAAIK,SAAS,GAAAD,KAAA;IACnB,IAAIC,SAAc,KAAAF,OAAA,EAAQ;IACtB,WAAOA,OAAA,KAAW,QAAU;MAC9BP,UAAA,CAAWU,KAAQ,GAAAH,OAAA;MACnB;IACF;IACAI,mBAAA,CAAoBJ,OAAM,EAAEK,IAAK,WAACC,GAAQ;MACxCb,UAAA,CAAWU,KAAQ,GAAAG,GAAA;IACrB,CAAC;EACH,GACA;IAAEC,SAAA,EAAW;EAAK,CACpB;EAEA,OAAO;IAAEd,UAAW,EAAXA;GAAW;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}