{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { ref } from 'vue';\nimport { getFileList } from '../../_common/js/upload/utils.mjs';\nimport '../../_common/js/log/log.mjs';\nfunction useDrag(props, accept) {\n  var target = ref(null);\n  var dragActive = ref(false);\n  var handleDrop = function handleDrop(event) {\n    var _props$onDrop;\n    event.preventDefault();\n    dragActive.value = false;\n    var files = event.dataTransfer.files;\n    var dragFiles = getFileList(files, accept.value);\n    (_props$onDrop = props.onDrop) === null || _props$onDrop === void 0 || _props$onDrop.call(props, {\n      e: event\n    });\n    if (dragFiles !== null && dragFiles !== void 0 && dragFiles.length) {\n      var _props$onDragFileChan;\n      (_props$onDragFileChan = props.onDragFileChange) === null || _props$onDragFileChan === void 0 || _props$onDragFileChan.call(props, dragFiles);\n    }\n  };\n  var handleDragenter = function handleDragenter(event) {\n    var _props$onDragenter;\n    event.preventDefault();\n    target.value = event.target;\n    (_props$onDragenter = props.onDragenter) === null || _props$onDragenter === void 0 || _props$onDragenter.call(props, {\n      e: event\n    });\n    dragActive.value = true;\n  };\n  var handleDragleave = function handleDragleave(event) {\n    var _props$onDragleave;\n    if (event.target !== target.value) return;\n    event.preventDefault();\n    (_props$onDragleave = props.onDragleave) === null || _props$onDragleave === void 0 || _props$onDragleave.call(props, {\n      e: event\n    });\n    dragActive.value = false;\n  };\n  var handleDragover = function handleDragover(event) {\n    event.preventDefault();\n  };\n  return {\n    target: target,\n    dragActive: dragActive,\n    handleDrop: handleDrop,\n    handleDragenter: handleDragenter,\n    handleDragleave: handleDragleave,\n    handleDragover: handleDragover\n  };\n}\nexport { useDrag as default };","map":{"version":3,"names":["useDrag","props","accept","target","ref","dragActive","handleDrop","event","_props$onDrop","preventDefault","value","files","dataTransfer","dragFiles","getFileList","onDrop","call","e","length","_props$onDragFileChan","onDragFileChange","handleDragenter","_props$onDragenter","onDragenter","handleDragleave","_props$onDragleave","onDragleave","handleDragover"],"sources":["../../../src/upload/hooks/useDrag.ts"],"sourcesContent":["import { Ref, ref } from 'vue';\nimport { getFileList } from '../../_common/js/upload/utils';\nimport { TdUploadProps } from '../type';\n\nexport interface UploadDragEvents {\n  onDragFileChange?: (files: File[]) => void;\n  onDragenter?: TdUploadProps['onDragenter'];\n  onDragleave?: TdUploadProps['onDragleave'];\n  onDrop?: TdUploadProps['onDrop'];\n}\n\nexport default function useDrag(props: UploadDragEvents, accept: Ref<string>) {\n  const target = ref(null);\n  const dragActive = ref(false);\n\n  const handleDrop = (event: DragEvent) => {\n    event.preventDefault();\n    dragActive.value = false;\n\n    const { files } = event.dataTransfer;\n    const dragFiles: File[] = getFileList(files, accept.value);\n    props.onDrop?.({ e: event });\n    if (dragFiles?.length) {\n      props.onDragFileChange?.(dragFiles);\n    }\n  };\n\n  const handleDragenter = (event: DragEvent) => {\n    event.preventDefault();\n    target.value = event.target;\n    props.onDragenter?.({ e: event });\n    dragActive.value = true;\n  };\n\n  const handleDragleave = (event: DragEvent) => {\n    if (event.target !== target.value) return;\n    event.preventDefault();\n    props.onDragleave?.({ e: event });\n    dragActive.value = false;\n  };\n\n  const handleDragover = (event: DragEvent) => {\n    event.preventDefault();\n  };\n\n  return {\n    target,\n    dragActive,\n    handleDrop,\n    handleDragenter,\n    handleDragleave,\n    handleDragover,\n  };\n}\n"],"mappings":";;;;;;;;;AAWwB,SAAAA,QAAQC,KAAA,EAAyBC,MAAqB;EACtE,IAAAC,MAAA,GAASC,GAAA,CAAI,IAAI;EACjB,IAAAC,UAAA,GAAaD,GAAA,CAAI,KAAK;EAEtB,IAAAE,UAAA,GAAa,SAAbA,WAAcC,KAAqB;IAAA,IAAAC,aAAA;IACvCD,KAAA,CAAME,cAAe;IACrBJ,UAAA,CAAWK,KAAQ;IAEb,IAAEC,KAAM,GAAIJ,KAAM,CAAAK,YAAA,CAAhBD,KAAM;IACd,IAAME,SAAoB,GAAAC,WAAA,CAAYH,KAAO,EAAAT,MAAA,CAAOQ,KAAK;IACzD,CAAAF,aAAA,GAAAP,KAAA,CAAMc,MAAS,cAAAP,aAAA,eAAfA,aAAA,CAAAQ,IAAA,CAAAf,KAAA,EAAe;MAAEgB,CAAG,EAAAV;IAAM,CAAC;IAC3B,IAAIM,SAAA,aAAAA,SAAA,eAAAA,SAAA,CAAWK,MAAQ;MAAA,IAAAC,qBAAA;MACrB,CAAAA,qBAAA,GAAAlB,KAAA,CAAMmB,gBAAA,cAAAD,qBAAA,KAAN,UAAAA,qBAAA,CAAAH,IAAA,CAAAf,KAAA,EAAyBY,SAAS;IACpC;GACF;EAEM,IAAAQ,eAAA,GAAkB,SAAlBA,gBAAmBd,KAAqB;IAAA,IAAAe,kBAAA;IAC5Cf,KAAA,CAAME,cAAe;IACrBN,MAAA,CAAOO,KAAA,GAAQH,KAAM,CAAAJ,MAAA;IACrB,CAAAmB,kBAAA,GAAArB,KAAA,CAAMsB,WAAc,cAAAD,kBAAA,eAApBA,kBAAA,CAAAN,IAAA,CAAAf,KAAA,EAAoB;MAAEgB,CAAG,EAAAV;IAAM,CAAC;IAChCF,UAAA,CAAWK,KAAQ;GACrB;EAEM,IAAAc,eAAA,GAAkB,SAAlBA,gBAAmBjB,KAAqB;IAAA,IAAAkB,kBAAA;IACxC,IAAAlB,KAAA,CAAMJ,MAAA,KAAWA,MAAO,CAAAO,KAAA,EAAO;IACnCH,KAAA,CAAME,cAAe;IACrB,CAAAgB,kBAAA,GAAAxB,KAAA,CAAMyB,WAAc,cAAAD,kBAAA,eAApBA,kBAAA,CAAAT,IAAA,CAAAf,KAAA,EAAoB;MAAEgB,CAAG,EAAAV;IAAM,CAAC;IAChCF,UAAA,CAAWK,KAAQ;GACrB;EAEM,IAAAiB,cAAA,GAAiB,SAAjBA,eAAkBpB,KAAqB;IAC3CA,KAAA,CAAME,cAAe;GACvB;EAEO;IACLN,MAAA,EAAAA,MAAA;IACAE,UAAA,EAAAA,UAAA;IACAC,UAAA,EAAAA,UAAA;IACAe,eAAA,EAAAA,eAAA;IACAG,eAAA,EAAAA,eAAA;IACAG,cAAA,EAAAA;GACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}