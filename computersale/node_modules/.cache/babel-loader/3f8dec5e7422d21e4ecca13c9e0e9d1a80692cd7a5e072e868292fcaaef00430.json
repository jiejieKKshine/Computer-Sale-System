{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { _ as _typeof } from '../_chunks/dep-4659d73b.mjs';\nimport { defineComponent, ref, onMounted, onBeforeUnmount, computed, createVNode, Fragment, createTextVNode } from 'vue';\nimport { BacktopIcon } from 'tdesign-icons-vue-next';\nimport { scrollTo } from '../utils/dom.mjs';\nimport '../hooks/index.mjs';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon.mjs';\nimport props from './props.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport { useConfig } from '../config-provider/useConfig.mjs';\nimport { useContent } from '../hooks/tnode.mjs';\nimport { useChildSlots } from '../hooks/slot.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../utils/easing.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useVModel.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_chunks/dep-5efe53d1.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../config-provider/type.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nvar _BackTop = defineComponent({\n  name: \"TBackTop\",\n  props: props,\n  setup: function setup(props2) {\n    var visible = ref(false);\n    var containerRef = ref(null);\n    var componentName = usePrefixClass(\"back-top\");\n    var _useConfig = useConfig(\"alert\"),\n      classPrefix = _useConfig.classPrefix;\n    var _useGlobalIcon = useGlobalIcon({\n        BacktopIcon: BacktopIcon\n      }),\n      BacktopIcon$1 = _useGlobalIcon.BacktopIcon;\n    var renderContent = useContent();\n    var getContainer = function getContainer(container) {\n      if (typeof container === \"string\" && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) !== void 0) {\n        if (container === \"body\") {\n          return document;\n        }\n        return document.querySelector(container);\n      }\n      if (typeof container === \"function\") {\n        return container();\n      }\n      return null;\n    };\n    onMounted(function () {\n      containerRef.value = getContainer(props2.container);\n      var visibleHeight;\n      if (typeof props2.visibleHeight === \"string\") {\n        visibleHeight = Number(props2.visibleHeight.replace(\"px\", \"\"));\n      } else {\n        visibleHeight = props2.visibleHeight;\n      }\n      if (visibleHeight === 0) {\n        visible.value = true;\n        return;\n      }\n      var scrollDOM;\n      if (containerRef.value.scrollTop === void 0) {\n        scrollDOM = document.documentElement;\n      } else {\n        scrollDOM = containerRef.value;\n      }\n      containerRef.value.onscroll = function () {\n        var _scrollDOM;\n        var scrollTop = (_scrollDOM = scrollDOM) === null || _scrollDOM === void 0 ? void 0 : _scrollDOM.scrollTop;\n        if (scrollTop >= visibleHeight) {\n          visible.value = true;\n        }\n        if (scrollTop < visibleHeight && visible.value) {\n          visible.value = false;\n        }\n      };\n    });\n    onBeforeUnmount(function () {\n      containerRef.value.onscroll = null;\n    });\n    return function () {\n      var theme = props2.theme,\n        shape = props2.shape,\n        size = props2.size,\n        target = props2.target,\n        duration = props2.duration,\n        offset = props2.offset,\n        container = props2.container;\n      var getChild = useChildSlots();\n      var children = getChild();\n      if (children.length < 1) children = null;\n      var cls = computed(function () {\n        return _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, componentName.value, true), \"\".concat(componentName.value, \"--theme-\").concat(theme), true), \"\".concat(componentName.value, \"--\").concat(shape), true), \"\".concat(componentName.value, \"--show\"), visible.value), \"\".concat(classPrefix.value, \"-size-s\"), size === \"small\"), \"\".concat(classPrefix.value, \"-size-m\"), size === \"medium\");\n      });\n      var defaultContent = createVNode(Fragment, null, [createVNode(BacktopIcon$1, {\n        \"class\": \"\".concat(componentName.value, \"__icon\"),\n        \"size\": \"24\"\n      }, null), createVNode(\"span\", {\n        \"class\": \"\".concat(componentName.value, \"__text\")\n      }, [createTextVNode(\"TOP\")])]);\n      var getBackTo = function getBackTo() {\n        if (target === container) return 0;\n        if (target === \"body\") return 0;\n        if (!target) return 0;\n        var targetNode = getContainer(target);\n        if (!targetNode) return 0;\n        var y = targetNode.getBoundingClientRect().y;\n        return y;\n      };\n      var handleClick = function handleClick(e) {\n        var _props2$onClick;\n        var y = getBackTo();\n        scrollTo(y, {\n          container: containerRef.value,\n          duration: duration\n        });\n        (_props2$onClick = props2.onClick) === null || _props2$onClick === void 0 || _props2$onClick.call(props2, {\n          e: e\n        });\n      };\n      var positionStyle = computed(function () {\n        return {\n          insetInlineEnd: offset[0],\n          insetBlockEnd: offset[1]\n        };\n      });\n      return createVNode(\"button\", {\n        \"type\": \"button\",\n        \"class\": cls.value,\n        \"style\": positionStyle.value,\n        \"onClick\": handleClick\n      }, [renderContent(\"content\", \"default\", defaultContent)]);\n    };\n  }\n});\nexport { _BackTop as default };","map":{"version":3,"names":["_BackTop","defineComponent","name","props","setup","props2","visible","ref","containerRef","componentName","usePrefixClass","_useConfig","useConfig","classPrefix","_useGlobalIcon","useGlobalIcon","BacktopIcon","BacktopIcon$1","renderContent","useContent","getContainer","container","document","_typeof","querySelector","onMounted","value","visibleHeight","Number","replace","scrollDOM","scrollTop","documentElement","onscroll","_scrollDOM","onBeforeUnmount","theme","shape","size","target","duration","offset","getChild","useChildSlots","children","length","cls","computed","_defineProperty","concat","defaultContent","createVNode","Fragment","createTextVNode","getBackTo","targetNode","y","getBoundingClientRect","handleClick","e","_props2$onClick","scrollTo","onClick","call","positionStyle","insetInlineEnd","insetBlockEnd"],"sources":["../../src/back-top/back-top.tsx"],"sourcesContent":["import { computed, defineComponent, onBeforeUnmount, onMounted, ref } from 'vue';\nimport { BacktopIcon as TdBackTopIcon } from 'tdesign-icons-vue-next';\n\nimport { scrollTo } from '../utils/dom';\nimport { useChildSlots, usePrefixClass, useContent, useConfig } from '../hooks';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport props from './props';\n\nimport type { TdBackTopProps } from './type';\n\nexport default defineComponent({\n  name: 'TBackTop',\n  props,\n  setup(props: TdBackTopProps) {\n    const visible = ref(false);\n    const containerRef = ref(null);\n    const componentName = usePrefixClass('back-top');\n    const { classPrefix } = useConfig('alert');\n\n    const { BacktopIcon } = useGlobalIcon({\n      BacktopIcon: TdBackTopIcon,\n    });\n    const renderContent = useContent();\n    const getContainer = (container: TdBackTopProps['container']) => {\n      if (typeof container === 'string' && typeof document !== undefined) {\n        if (container === 'body') {\n          return document;\n        }\n        return document.querySelector(container);\n      }\n      if (typeof container === 'function') {\n        return container();\n      }\n      return null;\n    };\n    onMounted(() => {\n      containerRef.value = getContainer(props.container) as HTMLElement;\n      let visibleHeight: number;\n      if (typeof props.visibleHeight === 'string') {\n        visibleHeight = Number(props.visibleHeight.replace('px', ''));\n      } else {\n        visibleHeight = props.visibleHeight;\n      }\n      if (visibleHeight === 0) {\n        visible.value = true;\n        return;\n      }\n      let scrollDOM: HTMLElement;\n      if (containerRef.value.scrollTop === undefined) {\n        scrollDOM = document.documentElement;\n      } else {\n        scrollDOM = containerRef.value;\n      }\n      containerRef.value.onscroll = () => {\n        const scrollTop = scrollDOM?.scrollTop;\n        if (scrollTop >= visibleHeight) {\n          visible.value = true;\n        }\n        if (scrollTop < visibleHeight && visible.value) {\n          visible.value = false;\n        }\n      };\n    });\n\n    onBeforeUnmount(() => {\n      containerRef.value.onscroll = null;\n    });\n\n    return () => {\n      const { theme, shape, size, target, duration, offset, container } = props;\n      const getChild = useChildSlots();\n      let children = getChild();\n      if (children.length < 1) children = null;\n      const cls = computed(() => {\n        return {\n          [componentName.value]: true,\n          [`${componentName.value}--theme-${theme}`]: true,\n          [`${componentName.value}--${shape}`]: true,\n          [`${componentName.value}--show`]: visible.value,\n          [`${classPrefix.value}-size-s`]: size === 'small',\n          [`${classPrefix.value}-size-m`]: size === 'medium',\n        };\n      });\n      const defaultContent = (\n        <>\n          <BacktopIcon class={`${componentName.value}__icon`} size={'24'} />\n          <span class={`${componentName.value}__text`}>TOP</span>\n        </>\n      );\n      const getBackTo = () => {\n        if (target === container) return 0;\n        if (target === 'body') return 0;\n        if (!target) return 0;\n        const targetNode = getContainer(target);\n        if (!targetNode) return 0;\n        const y = (targetNode as HTMLElement).getBoundingClientRect().y;\n        return y;\n      };\n      const handleClick = (e: MouseEvent) => {\n        const y = getBackTo();\n        scrollTo(y, { container: containerRef.value, duration });\n        props.onClick?.({ e });\n      };\n      const positionStyle = computed(() => {\n        return {\n          insetInlineEnd: offset[0],\n          insetBlockEnd: offset[1],\n        };\n      });\n      return (\n        <button type=\"button\" class={cls.value} style={positionStyle.value} onClick={handleClick}>\n          {renderContent('content', 'default', defaultContent)}\n        </button>\n      );\n    };\n  },\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,IAAAA,QAAA,GAAeC,eAAgB;EAC7BC,IAAM;EACNC,KAAA,EAAAA,KAAA;EACAC,KAAA,WAAAA,MAAMC,MAAuB;IACrB,IAAAC,OAAA,GAAUC,GAAA,CAAI,KAAK;IACnB,IAAAC,YAAA,GAAeD,GAAA,CAAI,IAAI;IACvB,IAAAE,aAAA,GAAgBC,cAAA,CAAe,UAAU;IAC/C,IAAAC,UAAA,GAAwBC,SAAA,CAAU,OAAO;MAAjCC,WAAA,GAAAF,UAAA,CAAAE,WAAA;IAEF,IAAAC,cAAA,GAAkBC,aAAc;QACpCC,WAAa,EAAAA;MACf,CAAC;MAFOC,aAAY,GAAAH,cAAA,CAAZE,WAAY;IAGpB,IAAME,aAAA,GAAgBC,UAAW;IAC3B,IAAAC,YAAA,GAAe,SAAfA,aAAgBC,SAA2C;MAC/D,IAAI,OAAOA,SAAA,KAAc,QAAY,KAAO,OAAAC,QAAA,iCAAAC,OAAA,CAAAD,QAAA,CAAa,WAAW;QAClE,IAAID,SAAA,KAAc,MAAQ;UACjB,OAAAC,QAAA;QACT;QACO,OAAAA,QAAA,CAASE,aAAA,CAAcH,SAAS;MACzC;MACI,WAAOA,SAAA,KAAc,UAAY;QACnC,OAAOA,SAAU;MACnB;MACO;KACT;IACAI,SAAA,CAAU,YAAM;MACDjB,YAAA,CAAAkB,KAAA,GAAQN,YAAa,CAAAf,MAAA,CAAMgB,SAAS;MAC7C,IAAAM,aAAA;MACA,WAAOtB,MAAM,CAAAsB,aAAA,KAAkB,QAAU;QAC3CA,aAAA,GAAgBC,MAAA,CAAOvB,MAAM,CAAAsB,aAAA,CAAcE,OAAQ,OAAM,EAAE,CAAC;MAC9D,CAAO;QACLF,aAAA,GAAgBtB,MAAM,CAAAsB,aAAA;MACxB;MACA,IAAIA,aAAA,KAAkB,CAAG;QACvBrB,OAAA,CAAQoB,KAAQ;QAChB;MACF;MACI,IAAAI,SAAA;MACA,IAAAtB,YAAA,CAAakB,KAAM,CAAAK,SAAA,KAAc,KAAW;QAC9CD,SAAA,GAAYR,QAAS,CAAAU,eAAA;MACvB,CAAO;QACLF,SAAA,GAAYtB,YAAa,CAAAkB,KAAA;MAC3B;MACalB,YAAA,CAAAkB,KAAA,CAAMO,QAAA,GAAW,YAAM;QAAA,IAAAC,UAAA;QAClC,IAAMH,SAAA,IAAAG,UAAA,GAAYJ,SAAW,cAAAI,UAAA,uBAAXA,UAAA,CAAWH,SAAA;QAC7B,IAAIA,SAAA,IAAaJ,aAAe;UAC9BrB,OAAA,CAAQoB,KAAQ;QAClB;QACI,IAAAK,SAAA,GAAYJ,aAAiB,IAAArB,OAAA,CAAQoB,KAAO;UAC9CpB,OAAA,CAAQoB,KAAQ;QAClB;OACF;IACF,CAAC;IAEDS,eAAA,CAAgB,YAAM;MACpB3B,YAAA,CAAakB,KAAA,CAAMO,QAAW;IAChC,CAAC;IAED,OAAO,YAAM;MACL,IAAEG,KAAA,GAA4D/B,MAAA,CAA5D+B,KAAA;QAAOC,KAAO,GAA8ChC,MAAA,CAArDgC,KAAO;QAAAC,IAAA,GAA8CjC,MAAA,CAA9CiC,IAAA;QAAMC,MAAA,GAAwClC,MAAA,CAAxCkC,MAAA;QAAQC,QAAU,GAAsBnC,MAAA,CAAhCmC,QAAU;QAAAC,MAAA,GAAsBpC,MAAA,CAAtBoC,MAAA;QAAQpB,SAAA,GAAchB,MAAA,CAAdgB,SAAA;MACtD,IAAMqB,QAAA,GAAWC,aAAc;MAC/B,IAAIC,QAAA,GAAWF,QAAS;MACxB,IAAIE,QAAA,CAASC,MAAS,MAAcD,QAAA;MAC9B,IAAAE,GAAA,GAAMC,QAAA,CAAS,YAAM;QAClB,OAAAC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CACJ,IAAAvC,aAAA,CAAciB,KAAQ,YAAAuB,MAAA,CACnBxC,aAAc,CAAAiB,KAAA,cAAAuB,MAAA,CAAgBb,KAAU,aAAAa,MAAA,CACxCxC,aAAc,CAAAiB,KAAA,QAAAuB,MAAA,CAAUZ,KAAU,aAAAY,MAAA,CAClCxC,aAAc,CAAAiB,KAAA,aAAgBpB,OAAQ,CAAAoB,KAAA,MAAAuB,MAAA,CACtCpC,WAAY,CAAAa,KAAA,EAAiB,YAAAY,IAAS,kBAAAW,MAAA,CACtCpC,WAAY,CAAAa,KAAA,EAAiB,YAAAY,IAAS;MAE9C,CAAC;MACD,IAAMY,cACJ,GAAAC,WAAA,CAAAC,QAAA,SAAAD,WAAA,CAAAlC,aAAA;QAAA,YAAAgC,MAAA,CACyBxC,aAAc,CAAAiB,KAAA;QAAA;MAAA,UAAAyB,WAAA;QAAA,YAAAF,MAAA,CACrBxC,aAAc,CAAAiB,KAAA;MAAA,IAAA2B,eAAA,CAChC;MAEF,IAAMC,SAAA,GAAY,SAAZA,UAAA,EAAkB;QACtB,IAAIf,MAAW,KAAAlB,SAAA,EAAkB;QACjC,IAAIkB,MAAW,aAAe;QAC9B,IAAI,CAACA,MAAA,EAAe;QACd,IAAAgB,UAAA,GAAanC,YAAA,CAAamB,MAAM;QACtC,IAAI,CAACgB,UAAA,EAAmB;QAClB,IAAAC,CAAA,GAAKD,UAA2B,CAAAE,qBAAA,EAAwB,CAAAD,CAAA;QACvD,OAAAA,CAAA;OACT;MACM,IAAAE,WAAA,GAAc,SAAdA,YAAeC,CAAkB;QAAA,IAAAC,eAAA;QACrC,IAAMJ,CAAA,GAAIF,SAAU;QACpBO,QAAA,CAASL,CAAA,EAAG;UAAEnC,SAAA,EAAWb,YAAa,CAAAkB,KAAA;UAAOc,QAAA,EAAAA;QAAS,CAAC;QACvD,CAAAoB,eAAA,GAAAvD,MAAM,CAAAyD,OAAA,cAAAF,eAAA,eAANA,eAAA,CAAAG,IAAA,CAAA1D,MAAM,EAAU;UAAEsD,CAAA,EAAAA;QAAE,CAAC;OACvB;MACM,IAAAK,aAAA,GAAgBjB,QAAA,CAAS,YAAM;QAC5B;UACLkB,cAAA,EAAgBxB,MAAO;UACvByB,aAAA,EAAezB,MAAO;SACxB;MACF,CAAC;MACD,OAAAU,WAAA;QAAA;QAAA,OAC+B,EAAAL,GAAA,CAAIpB,KAAO;QAAA,OAAO,EAAAsC,aAAc,CAAAtC,KAAA;QAAA,SAAgB,EAAAgC;MAC1E,IAAAxC,aAAA,CAAc,WAAW,SAAW,EAAAgC,cAAc;KAGzD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}