{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { isVNode, Fragment, h } from 'vue';\nimport { i as isEmpty_1 } from '../_chunks/dep-b91a8171.mjs';\nimport { i as isString_1 } from '../_chunks/dep-03a7fb6c.mjs';\nimport { i as isFunction_1 } from '../_chunks/dep-06dcbf4c.mjs';\nimport { i as isObject_1 } from '../_chunks/dep-2b09875b.mjs';\nimport { c as camelCase_1 } from '../_chunks/dep-03ad9cda.mjs';\nimport { k as kebabCase_1 } from '../_chunks/dep-bad871d5.mjs';\nimport { i as isArray_1 } from '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nfunction getDefaultNode(options) {\n  var defaultNode;\n  if (isObject_1(options) && \"defaultNode\" in options) {\n    defaultNode = options.defaultNode;\n  } else if (isVNode(options) || isString_1(options)) {\n    defaultNode = options;\n  }\n  return defaultNode;\n}\nfunction getChildren(content) {\n  var childList = [];\n  var _innerGetChildren = function innerGetChildren(content2) {\n    if (!isArray_1(content2)) return;\n    content2.forEach(function (item) {\n      if (item.children && isArray_1(item.children)) {\n        if (item.type !== Fragment) return;\n        _innerGetChildren(item.children);\n      } else {\n        childList.push(item);\n      }\n    });\n    return childList;\n  };\n  return _innerGetChildren(content);\n}\nfunction getParams(options) {\n  return isObject_1(options) && \"params\" in options ? options.params : {};\n}\nfunction getSlotFirst(options) {\n  return isObject_1(options) && \"slotFirst\" in options ? options.slotFirst : {};\n}\nfunction handleSlots(instance, params, name) {\n  var _instance$$slots$came, _instance$$slots, _instance$$slots$keba, _instance$$slots2;\n  var node = (_instance$$slots$came = (_instance$$slots = instance.$slots)[camelCase_1(name)]) === null || _instance$$slots$came === void 0 ? void 0 : _instance$$slots$came.call(_instance$$slots, params);\n  if (node) return node;\n  node = (_instance$$slots$keba = (_instance$$slots2 = instance.$slots)[kebabCase_1(name)]) === null || _instance$$slots$keba === void 0 ? void 0 : _instance$$slots$keba.call(_instance$$slots2, params);\n  if (node) return node;\n  return null;\n}\nvar renderTNodeJSX = function renderTNodeJSX(instance, name, options) {\n  var params = getParams(options);\n  var defaultNode = getDefaultNode(options);\n  var propsNode;\n  if (name in instance) {\n    propsNode = instance[name];\n  }\n  if (propsNode === false || propsNode === null) return;\n  if (propsNode === true && defaultNode) {\n    return handleSlots(instance, params, name) || defaultNode;\n  }\n  if (isFunction_1(propsNode)) return propsNode(h, params);\n  var isPropsEmpty = [void 0, params, \"\"].includes(propsNode);\n  if (isPropsEmpty && (instance.$slots[camelCase_1(name)] || instance.$slots[kebabCase_1(name)])) {\n    return handleSlots(instance, params, name);\n  }\n  return propsNode;\n};\nvar renderTNodeJSXDefault = function renderTNodeJSXDefault(vm, name, options) {\n  var defaultNode = getDefaultNode(options);\n  return renderTNodeJSX(vm, name, options) || defaultNode;\n};\nvar renderContent = function renderContent(vm, name1, name2, options) {\n  var params = getParams(options);\n  var defaultNode = getDefaultNode(options);\n  var toParams = params ? {\n    params: params\n  } : void 0;\n  var node1 = renderTNodeJSX(vm, name1, toParams);\n  var node2 = renderTNodeJSX(vm, name2, toParams);\n  var res = isEmpty_1(node1) ? node2 : node1;\n  return isEmpty_1(res) ? defaultNode : res;\n};\nexport { getChildren, getDefaultNode, getParams, getSlotFirst, handleSlots, renderContent, renderTNodeJSX, renderTNodeJSXDefault };","map":{"version":3,"names":["getDefaultNode","options","defaultNode","isObject_1","isVNode","isString_1","getChildren","content","childList","_innerGetChildren","innerGetChildren","content2","isArray_1","forEach","item","children","type","Fragment","push","getParams","params","getSlotFirst","slotFirst","handleSlots","instance","name","_instance$$slots$came","_instance$$slots","_instance$$slots$keba","_instance$$slots2","node","$slots","camelCase_1","call","kebabCase_1","renderTNodeJSX","propsNode","isFunction_1","h","isPropsEmpty","includes","renderTNodeJSXDefault","vm","renderContent","name1","name2","toParams","node1","node2","res","isEmpty_1"],"sources":["../../src/utils/render-tnode.ts"],"sourcesContent":["import { h, ComponentPublicInstance, VNode, isVNode, Fragment } from 'vue';\nimport isEmpty from 'lodash/isEmpty';\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\nimport isObject from 'lodash/isObject';\nimport camelCase from 'lodash/camelCase';\nimport kebabCase from 'lodash/kebabCase';\nimport isArray from 'lodash/isArray';\n\nexport interface JSXRenderContext {\n  defaultNode?: VNode | string;\n  params?: Record<string, any>;\n  slotFirst?: boolean;\n  // 是否不打印 LOG\n  silent?: boolean;\n}\n\nexport type OptionsType = VNode | JSXRenderContext | string;\n\nexport function getDefaultNode(options?: OptionsType) {\n  let defaultNode;\n  if (isObject(options) && 'defaultNode' in options) {\n    defaultNode = options.defaultNode;\n  } else if (isVNode(options) || isString(options)) {\n    defaultNode = options;\n  }\n\n  return defaultNode;\n}\n\nexport function getChildren(content: VNode[]) {\n  const childList: VNode[] = [];\n  const innerGetChildren = (content: VNode[]) => {\n    if (!isArray(content)) return;\n    content.forEach((item: VNode) => {\n      if (item.children && isArray(item.children)) {\n        if (item.type !== Fragment) return;\n        innerGetChildren(item.children as VNode[]);\n      } else {\n        childList.push(item);\n      }\n    });\n    return childList;\n  };\n\n  return innerGetChildren(content);\n}\n\nexport function getParams(options?: OptionsType) {\n  return isObject(options) && 'params' in options ? options.params : {};\n}\n\nexport function getSlotFirst(options?: OptionsType) {\n  return isObject(options) && 'slotFirst' in options ? options.slotFirst : {};\n}\n\n// 同时支持驼峰命名和中划线命名的插槽，示例：value-display 和 valueDisplay\nexport function handleSlots(instance: ComponentPublicInstance, params: Record<string, any>, name: string) {\n  // 检查是否存在 驼峰命名 的插槽\n  let node = instance.$slots[camelCase(name)]?.(params);\n  if (node) return node;\n  // 检查是否存在 中划线命名 的插槽\n  node = instance.$slots[kebabCase(name)]?.(params);\n  if (node) return node;\n  return null;\n}\n\n/**\n * 通过JSX的方式渲染 TNode，props 和 插槽同时处理，也能处理默认值为 true 则渲染默认节点的情况\n * @param vm 组件实例\n * @param name 插槽和属性名称\n * @param options 值可能为默认渲染节点，也可能是默认渲染节点和参数的集合\n * @example renderTNodeJSX(this, 'closeBtn')  优先级 props function 大于 插槽\n * @example renderTNodeJSX(this, 'closeBtn', <close-icon />)。 当属性值为 true 时则渲染 <close-icon />\n * @example renderTNodeJSX(this, 'closeBtn', { defaultNode: <close-icon />, params })。 params 为渲染节点时所需的参数\n */\nexport const renderTNodeJSX = (instance: ComponentPublicInstance, name: string, options?: OptionsType) => {\n  // assemble params && defaultNode\n  const params = getParams(options);\n  const defaultNode = getDefaultNode(options);\n\n  // 处理 props 类型的Node\n  let propsNode;\n  if (name in instance) {\n    propsNode = instance[name];\n  }\n\n  // 是否静默日志\n  // const isSilent = Boolean(isObject(options) && 'silent' in options && options.silent);\n  // // 同名插槽和属性同时存在，则提醒用户只需要选择一种方式即可\n  // if (instance.$slots[name] && propsNode && propsNode !== true && !isSilent) {\n  //   console.warn(`Both $slots.${name} and $props.${name} exist, $props.${name} is preferred`);\n  // }\n\n  // propsNode 为 false 不渲染\n  if (propsNode === false || propsNode === null) return;\n  if (propsNode === true && defaultNode) {\n    return handleSlots(instance, params, name) || defaultNode;\n  }\n\n  // 同名 props 和 slot 优先处理 props\n  if (isFunction(propsNode)) return propsNode(h, params);\n  const isPropsEmpty = [undefined, params, ''].includes(propsNode);\n  // Props 为空，但插槽存在\n  if (isPropsEmpty && (instance.$slots[camelCase(name)] || instance.$slots[kebabCase(name)])) {\n    return handleSlots(instance, params, name);\n  }\n  return propsNode;\n};\n\n/**\n * 通过JSX的方式渲染 TNode，props 和 插槽同时处理。与 renderTNodeJSX 区别在于 属性值为 undefined 时会渲染默认节点\n * @param vm 组件实例\n * @param name 插槽和属性名称\n * @example renderTNodeJSX(this, 'closeBtn')\n * @example renderTNodeJSX(this, 'closeBtn', <close-icon />)。this.closeBtn 为空时，则兜底渲染 <close-icon />\n * @example renderTNodeJSX(this, 'closeBtn', { defaultNode: <close-icon />, params }) 。params 为渲染节点时所需的参数\n */\nexport const renderTNodeJSXDefault = (vm: ComponentPublicInstance, name: string, options?: OptionsType) => {\n  const defaultNode = getDefaultNode(options);\n  return renderTNodeJSX(vm, name, options) || defaultNode;\n};\n\n/**\n * 用于处理相同名称的 TNode 渲染\n * @param vm 组件实例\n * @param name1 第一个名称，优先级高于 name2\n * @param name2 第二个名称\n * @param defaultNode 默认渲染内容：当 name1 和 name2 都为空时会启动默认内容渲染\n * @example renderContent(this, 'default', 'content')\n * @example renderContent(this, 'default', 'content', '我是默认内容')\n * @example renderContent(this, 'default', 'content', { defaultNode: '我是默认内容', params })\n */\nexport const renderContent = (vm: ComponentPublicInstance, name1: string, name2: string, options?: OptionsType) => {\n  const params = getParams(options);\n  const defaultNode = getDefaultNode(options);\n\n  const toParams = params ? { params } : undefined;\n\n  const node1 = renderTNodeJSX(vm, name1, toParams);\n  const node2 = renderTNodeJSX(vm, name2, toParams);\n\n  const res = isEmpty(node1) ? node2 : node1;\n  return isEmpty(res) ? defaultNode : res;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}