{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { PLACEMENT_LIST } from './const.mjs';\nvar ANIMATION_OPTION = {\n  duration: 200,\n  easing: \"linear\"\n};\nfunction fadeIn(dom, placement) {\n  if (!dom) return;\n  var offsetWidth = (dom === null || dom === void 0 ? void 0 : dom.offsetWidth) || 0;\n  var offsetHeight = (dom === null || dom === void 0 ? void 0 : dom.offsetHeight) || 0;\n  var fadeInKeyframes = getFadeInKeyframes(placement, offsetWidth, offsetHeight);\n  if (!fadeInKeyframes) return;\n  var styleAfterFadeIn = fadeInKeyframes[fadeInKeyframes.length - 1];\n  setDomStyleAfterAnimation(dom, styleAfterFadeIn);\n  dom.animate && dom.animate(fadeInKeyframes, ANIMATION_OPTION);\n}\nfunction fadeOut(dom, placement, onFinish) {\n  if (!dom) return;\n  var offsetHeight = (dom === null || dom === void 0 ? void 0 : dom.offsetHeight) || 0;\n  var fadeOutKeyframes = getFadeOutKeyframes(placement, offsetHeight);\n  if (!fadeOutKeyframes) return onFinish();\n  var styleAfterFadeOut = fadeOutKeyframes[fadeOutKeyframes.length - 1];\n  setDomStyleAfterAnimation(dom, styleAfterFadeOut);\n  var animation = dom.animate && dom.animate(fadeOutKeyframes, ANIMATION_OPTION);\n  if (animation) {\n    animation.onfinish = function () {\n      dom.style.display = \"none\";\n      onFinish();\n    };\n  } else {\n    dom.style.display = \"none\";\n    onFinish();\n  }\n}\nfunction setDomStyleAfterAnimation(dom, styleAfterAnimation) {\n  var keys = Object.keys(styleAfterAnimation);\n  for (var i = 0; i < keys.length; i += 1) {\n    var key = keys[i];\n    dom.style[key] = styleAfterAnimation[key];\n  }\n}\nfunction getFadeInKeyframes(placement, offsetWidth, offsetHeight) {\n  if (!PLACEMENT_LIST.includes(placement)) return null;\n  if ([\"top-left\", \"left\", \"bottom-left\"].includes(placement)) {\n    return [{\n      opacity: 0,\n      marginLeft: \"-\".concat(offsetWidth, \"px\")\n    }, {\n      opacity: 1,\n      marginLeft: \"0\"\n    }];\n  }\n  if ([\"top-right\", \"right\", \"bottom-right\"].includes(placement)) {\n    return [{\n      opacity: 0,\n      marginRight: \"-\".concat(offsetWidth, \"px\")\n    }, {\n      opacity: 1,\n      marginRight: \"0\"\n    }];\n  }\n  if ([\"top\", \"center\"].includes(placement)) {\n    return [{\n      opacity: 0,\n      marginTop: \"-\".concat(offsetHeight, \"px\")\n    }, {\n      opacity: 1,\n      marginTop: \"0\"\n    }];\n  }\n  if ([\"bottom\"].includes(placement)) {\n    return [{\n      opacity: 0,\n      transform: \"translate3d(0, \".concat(offsetHeight, \"px, 0)\")\n    }, {\n      opacity: 1,\n      transform: \"translate3d(0, 0, 0)\"\n    }];\n  }\n}\nfunction getFadeOutKeyframes(placement, offsetHeight) {\n  if (!PLACEMENT_LIST.includes(placement)) return null;\n  if ([\"bottom-left\", \"bottom\", \"bottom-right\"].includes(placement)) {\n    var marginOffset2 = \"\".concat(offsetHeight, \"px\");\n    return [{\n      opacity: 1,\n      marginTop: \"0px\"\n    }, {\n      opacity: 0,\n      marginTop: marginOffset2\n    }];\n  }\n  var marginOffset = \"-\".concat(offsetHeight, \"px\");\n  return [{\n    opacity: 1,\n    marginTop: \"0px\"\n  }, {\n    opacity: 0,\n    marginTop: marginOffset\n  }];\n}\nexport { fadeIn, fadeOut };","map":{"version":3,"names":["ANIMATION_OPTION","duration","easing","fadeIn","dom","placement","offsetWidth","offsetHeight","fadeInKeyframes","getFadeInKeyframes","styleAfterFadeIn","length","setDomStyleAfterAnimation","animate","fadeOut","onFinish","fadeOutKeyframes","getFadeOutKeyframes","styleAfterFadeOut","animation","onfinish","style","display","styleAfterAnimation","keys","Object","i","key","PLACEMENT_LIST","includes","opacity","marginLeft","concat","marginRight","marginTop","transform","marginOffset2","marginOffset"],"sources":["../../src/message/animation.ts"],"sourcesContent":["import { PLACEMENT_LIST } from './const';\n\ninterface Keyframe {\n  composite?: CompositeOperationOrAuto;\n  easing?: string;\n  offset?: number | null;\n  [property: string]: string | number | null | undefined;\n}\ntype CompositeOperationOrAuto = 'accumulate' | 'add' | 'auto' | 'replace';\n\nconst ANIMATION_OPTION = {\n  duration: 200,\n  easing: 'linear',\n};\n\nfunction fadeIn(dom: HTMLElement, placement: string) {\n  if (!dom) return;\n  const offsetWidth = dom?.offsetWidth || 0;\n  const offsetHeight = dom?.offsetHeight || 0;\n  const fadeInKeyframes: Array<Keyframe> | null = getFadeInKeyframes(placement, offsetWidth, offsetHeight);\n  if (!fadeInKeyframes) return;\n  const styleAfterFadeIn = fadeInKeyframes[fadeInKeyframes.length - 1];\n  setDomStyleAfterAnimation(dom, styleAfterFadeIn);\n  dom.animate && dom.animate(fadeInKeyframes, ANIMATION_OPTION);\n}\n\nfunction fadeOut(dom: HTMLElement, placement: string, onFinish: Function) {\n  if (!dom) return;\n  const offsetHeight = dom?.offsetHeight || 0;\n  const fadeOutKeyframes: Array<Keyframe> | null = getFadeOutKeyframes(placement, offsetHeight);\n  if (!fadeOutKeyframes) return onFinish();\n  const styleAfterFadeOut = fadeOutKeyframes[fadeOutKeyframes.length - 1];\n  setDomStyleAfterAnimation(dom, styleAfterFadeOut);\n\n  const animation = dom.animate && dom.animate(fadeOutKeyframes, ANIMATION_OPTION);\n  if (animation) {\n    animation.onfinish = () => {\n      // eslint-disable-next-line no-param-reassign\n      dom.style.display = 'none';\n      onFinish();\n    };\n  } else {\n    // eslint-disable-next-line no-param-reassign\n    dom.style.display = 'none';\n    onFinish();\n  }\n}\n\nfunction setDomStyleAfterAnimation(dom: HTMLElement, styleAfterAnimation: Keyframe) {\n  const keys = Object.keys(styleAfterAnimation);\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    // eslint-disable-next-line no-param-reassign\n    dom.style[key] = styleAfterAnimation[key];\n  }\n}\n\nfunction getFadeInKeyframes(placement: string, offsetWidth: Number, offsetHeight: Number): Array<Keyframe> | null {\n  if (!PLACEMENT_LIST.includes(placement)) return null;\n  if (['top-left', 'left', 'bottom-left'].includes(placement)) {\n    return [\n      { opacity: 0, marginLeft: `-${offsetWidth}px` },\n      { opacity: 1, marginLeft: '0' },\n    ];\n  }\n  if (['top-right', 'right', 'bottom-right'].includes(placement)) {\n    return [\n      { opacity: 0, marginRight: `-${offsetWidth}px` },\n      { opacity: 1, marginRight: '0' },\n    ];\n  }\n  if (['top', 'center'].includes(placement)) {\n    return [\n      { opacity: 0, marginTop: `-${offsetHeight}px` },\n      { opacity: 1, marginTop: '0' },\n    ];\n  }\n  if (['bottom'].includes(placement)) {\n    return [\n      { opacity: 0, transform: `translate3d(0, ${offsetHeight}px, 0)` },\n      { opacity: 1, transform: 'translate3d(0, 0, 0)' },\n    ];\n  }\n}\n\nfunction getFadeOutKeyframes(placement: string, offsetHeight: Number): Array<Keyframe> | null {\n  if (!PLACEMENT_LIST.includes(placement)) return null;\n  if (['bottom-left', 'bottom', 'bottom-right'].includes(placement)) {\n    const marginOffset = `${offsetHeight}px`;\n    return [\n      { opacity: 1, marginTop: '0px' },\n      { opacity: 0, marginTop: marginOffset },\n    ];\n  }\n  const marginOffset = `-${offsetHeight}px`;\n  return [\n    { opacity: 1, marginTop: '0px' },\n    { opacity: 0, marginTop: marginOffset },\n  ];\n}\n\nexport { fadeIn, fadeOut };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}