{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { d as dayjs } from '../../_chunks/dep-7f65fc46.mjs';\nimport { i as isArray_1 } from '../../_chunks/dep-eae2a67e.mjs';\nimport { i as isFunction_1 } from '../../_chunks/dep-06dcbf4c.mjs';\nimport { i as isObject_1 } from '../../_chunks/dep-2b09875b.mjs';\nimport '../../_chunks/dep-4659d73b.mjs';\nimport '../../_chunks/dep-eca422c3.mjs';\nimport '../../_chunks/dep-bf7257e7.mjs';\nimport '../../_chunks/dep-cda4f568.mjs';\nfunction useDisableDate(props) {\n  return {\n    disableDate: function disableDate(value) {\n      return !isEnabled({\n        disableDate: props.disableDate,\n        format: props.format,\n        mode: props.mode,\n        value: value\n      });\n    },\n    minDate: isObject_1(props.disableDate) && \"before\" in props.disableDate ? new Date(props.disableDate.before) : props.start,\n    maxDate: isObject_1(props.disableDate) && \"after\" in props.disableDate ? new Date(props.disableDate.after) : props.end\n  };\n}\nfunction isEnabled(props) {\n  if (!props.disableDate) return true;\n  var isEnabled2 = true;\n  if (isFunction_1(props.disableDate)) {\n    return !props.disableDate(props.value);\n  }\n  if (isArray_1(props.disableDate)) {\n    var isIncludes = false;\n    var formatedDisabledDate = props.disableDate.map(function (item) {\n      return dayjs(item, props.format);\n    });\n    formatedDisabledDate.forEach(function (item) {\n      if (item.isSame(dayjs(props.value))) {\n        isIncludes = true;\n      }\n    });\n    return !isIncludes;\n  }\n  if (props.disableDate.from && props.disableDate.to) {\n    var compareMin = dayjs(new Date(props.disableDate.from));\n    var compareMax = dayjs(new Date(props.disableDate.to));\n    return !dayjs(props.value).isBetween(compareMin, compareMax, props.mode, \"[]\");\n  }\n  var min = props.disableDate.before ? new Date(props.disableDate.before) : null;\n  var max = props.disableDate.after ? new Date(props.disableDate.after) : null;\n  if (max && min) {\n    var _compareMin = dayjs(new Date(min));\n    var _compareMax = dayjs(new Date(max));\n    isEnabled2 = dayjs(props.value).isBetween(_compareMin, _compareMax, props.mode, \"[]\");\n  } else if (min) {\n    var _compareMin2 = dayjs(new Date(min));\n    isEnabled2 = !dayjs(props.value).isBefore(_compareMin2, props.mode);\n  } else if (max) {\n    var _compareMax2 = dayjs(new Date(max));\n    isEnabled2 = !dayjs(props.value).isAfter(_compareMax2, props.mode);\n  }\n  return isEnabled2;\n}\nexport { useDisableDate as default };","map":{"version":3,"names":["useDisableDate","props","disableDate","value","isEnabled","format","mode","minDate","isObject_1","Date","before","start","maxDate","after","end","isEnabled2","isFunction_1","isArray_1","isIncludes","formatedDisabledDate","map","item","dayjs","forEach","isSame","from","to","compareMin","compareMax","isBetween","min","max","_compareMin","_compareMax","_compareMin2","isBefore","_compareMax2","isAfter"],"sources":["../../../src/date-picker/hooks/useDisableDate.ts"],"sourcesContent":["import dayjs from 'dayjs';\nimport isArray from 'lodash/isArray';\nimport isFunction from 'lodash/isFunction';\nimport isObject from 'lodash/isObject';\n\nimport type { TdDatePickerProps, TdDateRangePickerProps } from '../type';\n\nexport interface disableDateProps {\n  disableDate?: TdDatePickerProps['disableDate'] | TdDateRangePickerProps['disableDate'];\n  format?: TdDatePickerProps['format'];\n  mode?: TdDatePickerProps['mode'];\n  start?: Date;\n  end?: Date;\n}\n\nexport default function useDisableDate(props: disableDateProps) {\n  return {\n    disableDate: (value: Date) =>\n      !isEnabled({ disableDate: props.disableDate, format: props.format, mode: props.mode, value }),\n    minDate:\n      isObject(props.disableDate) && 'before' in props.disableDate ? new Date(props.disableDate.before) : props.start,\n    maxDate:\n      isObject(props.disableDate) && 'after' in props.disableDate ? new Date(props.disableDate.after) : props.end,\n  };\n}\n\nfunction isEnabled(props: any): boolean {\n  if (!props.disableDate) return true;\n\n  let isEnabled = true;\n  // 值类型为 Function 则表示返回值为 true 的日期会被禁用\n  if (isFunction(props.disableDate)) {\n    return !props.disableDate(props.value);\n  }\n\n  // 禁用日期，示例：['A', 'B'] 表示日期 A 和日期 B 会被禁用。\n  if (isArray(props.disableDate)) {\n    let isIncludes = false;\n    const formatedDisabledDate = props.disableDate.map((item: string) => dayjs(item, props.format));\n    formatedDisabledDate.forEach((item: any) => {\n      if (item.isSame(dayjs(props.value))) {\n        isIncludes = true;\n      }\n    });\n    return !isIncludes;\n  }\n\n  // { from: 'A', to: 'B' } 表示在 A 到 B 之间的日期会被禁用。\n  if (props.disableDate.from && props.disableDate.to) {\n    const compareMin = dayjs(new Date(props.disableDate.from));\n    const compareMax = dayjs(new Date(props.disableDate.to));\n\n    return !dayjs(props.value).isBetween(compareMin, compareMax, props.mode, '[]');\n  }\n\n  const min = props.disableDate.before ? new Date(props.disableDate.before) : null;\n  const max = props.disableDate.after ? new Date(props.disableDate.after) : null;\n\n  // { before: 'A', after: 'B' } 表示在 A 之前和在 B 之后的日期都会被禁用。\n  if (max && min) {\n    const compareMin = dayjs(new Date(min));\n    const compareMax = dayjs(new Date(max));\n\n    isEnabled = dayjs(props.value).isBetween(compareMin, compareMax, props.mode, '[]');\n  } else if (min) {\n    const compareMin = dayjs(new Date(min));\n    isEnabled = !dayjs(props.value).isBefore(compareMin, props.mode);\n  } else if (max) {\n    const compareMax = dayjs(new Date(max));\n    isEnabled = !dayjs(props.value).isAfter(compareMax, props.mode);\n  }\n  return isEnabled;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}