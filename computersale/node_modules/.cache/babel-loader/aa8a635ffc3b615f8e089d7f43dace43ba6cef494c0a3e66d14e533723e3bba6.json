{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { d as dayjs } from '../../../_chunks/dep-7f65fc46.mjs';\nimport { a as advancedFormat, c as customParseFormat } from '../../../_chunks/dep-b36eaefe.mjs';\nimport { EPickerCols, TIME_FORMAT } from './const.mjs';\nimport '../../../_chunks/dep-4659d73b.mjs';\nimport '../../../_chunks/dep-eca422c3.mjs';\ndayjs.extend(advancedFormat);\ndayjs.extend(customParseFormat);\nfunction validateInputValue(value, format) {\n  return dayjs(value, format).format(format) === value;\n}\nfunction formatInputValue(value, format) {\n  return dayjs(value, format).format(format);\n}\nfunction closestLookup(availableArr, calcVal, step) {\n  if (step <= 1) return calcVal;\n  return availableArr.sort(function (a, b) {\n    return Math.abs(calcVal + 1 - a) - Math.abs(calcVal + 1 - b);\n  })[0];\n}\nfunction getPickerCols(format) {\n  var renderCol = [];\n  var meridiem = EPickerCols.meridiem,\n    hour = EPickerCols.hour,\n    minute = EPickerCols.minute,\n    second = EPickerCols.second,\n    milliSecond = EPickerCols.milliSecond;\n  var match = format.match(TIME_FORMAT);\n  match.forEach(function (m) {\n    switch (m) {\n      case \"H\":\n      case \"HH\":\n      case \"h\":\n      case \"hh\":\n        renderCol.push(hour);\n        break;\n      case \"a\":\n      case \"A\":\n        renderCol.push(meridiem);\n        break;\n      case \"m\":\n      case \"mm\":\n        renderCol.push(minute);\n        break;\n      case \"s\":\n      case \"ss\":\n        renderCol.push(second);\n        break;\n      case \"SSS\":\n        renderCol.push(milliSecond);\n        break;\n      default:\n        break;\n    }\n  });\n  return renderCol;\n}\nexport { closestLookup, formatInputValue, getPickerCols, validateInputValue };","map":{"version":3,"names":["dayjs","extend","advancedFormat","customParseFormat","validateInputValue","value","format","formatInputValue","closestLookup","availableArr","calcVal","step","sort","a","b","Math","abs","getPickerCols","renderCol","meridiem","EPickerCols","hour","minute","second","milliSecond","match","TIME_FORMAT","forEach","m","push"],"sources":["../../../../src/_common/js/time-picker/utils.ts"],"sourcesContent":["import dayjs from 'dayjs';\nimport advancedFormat from 'dayjs/plugin/advancedFormat';\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\nimport { EPickerCols, TIME_FORMAT } from './const';\n\ndayjs.extend(advancedFormat);\ndayjs.extend(customParseFormat);\n\n// 判断是否输入的值是合法的timepicker的值\nexport function validateInputValue(value: string, format: string) {\n  return dayjs(value, format).format(format) === value;\n}\n\n// 转换输入值为标准格式的timepicker的值\nexport function formatInputValue(value: string, format: string) {\n  return dayjs(value, format).format(format);\n}\n\n// 计算最接近的时间点\nexport function closestLookup(\n  availableArr: Array<any>,\n  calcVal: number,\n  step: number\n) {\n  if (step <= 1) return calcVal;\n  return availableArr.sort(\n    (a, b) => Math.abs(calcVal + 1 - a) - Math.abs(calcVal + 1 - b)\n  )[0];\n}\n\nexport function getPickerCols(format:string) {\n  const renderCol: EPickerCols[] = [];\n  const {\n    meridiem, hour, minute, second, milliSecond,\n  } = EPickerCols;\n  const match = format.match(TIME_FORMAT);\n  match.forEach((m) => {\n    switch (m) {\n      case 'H':\n      case 'HH':\n      case 'h':\n      case 'hh':\n        renderCol.push(hour);\n        break;\n      case 'a':\n      case 'A':\n        renderCol.push(meridiem);\n        break;\n      case 'm':\n      case 'mm':\n        renderCol.push(minute);\n        break;\n      case 's':\n      case 'ss':\n        renderCol.push(second);\n        break;\n      case 'SSS':\n        renderCol.push(milliSecond);\n        break;\n      default:\n        break;\n    }\n  });\n  return renderCol;\n}\n"],"mappings":";;;;;;;;;;;;;;AAKAA,KAAA,CAAMC,MAAA,CAAOC,cAAc;AAC3BF,KAAA,CAAMC,MAAA,CAAOE,iBAAiB;AAGd,SAAAC,mBAAmBC,KAAA,EAAeC,MAAgB;EAChE,OAAON,KAAA,CAAMK,KAAO,EAAAC,MAAM,CAAE,CAAAA,MAAA,CAAOA,MAAM,CAAM,KAAAD,KAAA;AACjD;AAGgB,SAAAE,iBAAiBF,KAAA,EAAeC,MAAgB;EAC9D,OAAON,KAAM,CAAAK,KAAA,EAAOC,MAAM,EAAEA,MAAA,CAAOA,MAAM;AAC3C;AAGgB,SAAAE,cACdC,YACA,EAAAC,OAAA,EACAC,IACA;EACA,IAAIA,IAAQ,OAAU,OAAAD,OAAA;EACtB,OAAOD,YAAa,CAAAG,IAAA,CAClB,UAACC,CAAA,EAAGC,CAAM;IAAA,OAAAC,IAAA,CAAKC,GAAI,CAAAN,OAAA,GAAU,CAAI,GAAAG,CAAC,CAAI,GAAAE,IAAA,CAAKC,GAAI,CAAAN,OAAA,GAAU,IAAII,CAAC;GAChE,CAAE;AACJ;AAEO,SAASG,cAAcX,MAAe;EAC3C,IAAMY,SAAA,GAA2B,EAAC;EAC5B,IACJC,QAAA,GACEC,WAAA,CADFD,QAAA;IAAUE,IAAA,GACRD,WAAA,CADQC,IAAA;IAAMC,MAAA,GACdF,WAAA,CADcE,MAAA;IAAQC,MAAA,GACtBH,WAAA,CADsBG,MAAA;IAAQC,WAAA,GAC9BJ,WAAA,CAD8BI,WAAA;EAE5B,IAAAC,KAAA,GAAQnB,MAAO,CAAAmB,KAAA,CAAMC,WAAW;EAChCD,KAAA,CAAAE,OAAA,CAAQ,UAACC,CAAM;IACX,QAAAA,CAAA;MACD;MACA;MACA;MACA;QACHV,SAAA,CAAUW,IAAA,CAAKR,IAAI;QACnB;MACG;MACA;QACHH,SAAA,CAAUW,IAAA,CAAKV,QAAQ;QACvB;MACG;MACA;QACHD,SAAA,CAAUW,IAAA,CAAKP,MAAM;QACrB;MACG;MACA;QACHJ,SAAA,CAAUW,IAAA,CAAKN,MAAM;QACrB;MACG;QACHL,SAAA,CAAUW,IAAA,CAAKL,WAAW;QAC1B;MAAA;QAEA;IAAA;EAEN,CAAC;EACM,OAAAN,SAAA;AACT","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}