{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _asyncToGenerator, r as regenerator } from '../_chunks/dep-0d047dce.mjs';\nimport { isVNode, defineComponent, ref, reactive, nextTick, createVNode, onMounted, onUnmounted, watchEffect, provide, mergeProps } from 'vue';\nimport { getOffsetTop, ANCHOR_SHARP_REGEXP } from './utils.mjs';\nimport { isServer, getScrollContainer, on, getScroll, scrollTo, off } from '../utils/dom.mjs';\nimport props from './props.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { Affix } from '../affix/index.mjs';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig.mjs';\nimport { AnchorInjectionKey } from './constants.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../utils/easing.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../affix/affix.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../affix/props.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../affix/type.mjs';\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !isVNode(s);\n}\nvar _Anchor = defineComponent({\n  name: \"TAnchor\",\n  inheritAttrs: false,\n  props: props,\n  setup: function setup(props2, _ref) {\n    var attrs = _ref.attrs;\n    var anchorRef = ref(null);\n    var links = ref([]);\n    var active = ref(\"\");\n    var scrollContainer = ref(null);\n    var handleScrollLock = ref(false);\n    var activeLineStyle = reactive({});\n    var COMPONENT_NAME = usePrefixClass(\"anchor\");\n    var ANCHOR_LINE_CLASSNAME = usePrefixClass(\"anchor__line\");\n    var ANCHOR_LINE_CURSOR_CLASSNAME = usePrefixClass(\"anchor__line-cursor\");\n    var _useCommonClassName = useCommonClassName(),\n      STATUS = _useCommonClassName.STATUS,\n      SIZE = _useCommonClassName.SIZE;\n    var renderTNodeJSX = useTNodeJSX();\n    var getScrollContainer$1 = function getScrollContainer$1() {\n      if (isServer) {\n        return;\n      }\n      var container = props2.container;\n      scrollContainer.value = getScrollContainer(container);\n      on(scrollContainer.value, \"scroll\", handleScroll);\n      handleScroll();\n    };\n    var handleScroll = function handleScroll() {\n      if (handleScrollLock.value) return;\n      var bounds = props2.bounds,\n        targetOffset = props2.targetOffset;\n      var filters = [];\n      var active2 = \"\";\n      links.value.forEach(function (link) {\n        var anchor = getAnchorTarget(link);\n        if (!anchor) {\n          return;\n        }\n        var top = getOffsetTop(anchor, scrollContainer.value);\n        if (top < bounds + targetOffset) {\n          filters.push({\n            link: link,\n            top: top\n          });\n        }\n      });\n      if (filters.length) {\n        var latest = filters.reduce(function (prev, cur) {\n          return prev.top > cur.top ? prev : cur;\n        });\n        active2 = latest.link;\n      }\n      setCurrentActiveLink(active2);\n    };\n    var getAnchorTarget = function getAnchorTarget(link) {\n      var matcher = link.match(ANCHOR_SHARP_REGEXP);\n      if (!matcher) {\n        return;\n      }\n      var anchor = document.getElementById(matcher[1]);\n      if (!anchor) {\n        return;\n      }\n      return anchor;\n    };\n    var registerLink = function registerLink(link) {\n      if (!ANCHOR_SHARP_REGEXP.test(link) || links.value.indexOf(link) !== -1) {\n        return;\n      }\n      links.value.push(link);\n    };\n    var unregisterLink = function unregisterLink(link) {\n      links.value = links.value.filter(function (each) {\n        return each !== link;\n      });\n    };\n    var setCurrentActiveLink = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/regenerator.mark(function _callee(link) {\n        var _props2$onChange;\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(active.value === link)) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              active.value = link;\n              (_props2$onChange = props2.onChange) === null || _props2$onChange === void 0 || _props2$onChange.call(props2, link, active.value);\n              _context.next = 6;\n              return nextTick();\n            case 6:\n              updateActiveLine();\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function setCurrentActiveLink(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var updateActiveLine = function updateActiveLine() {\n      var _anchorRef$value;\n      var ele = (_anchorRef$value = anchorRef.value) === null || _anchorRef$value === void 0 ? void 0 : _anchorRef$value.querySelector(\".\".concat(STATUS.value.active, \">a\"));\n      if (!ele) {\n        Object.assign(activeLineStyle, {});\n        return;\n      }\n      var top = ele.offsetTop,\n        height = ele.offsetHeight;\n      Object.assign(activeLineStyle, {\n        top: \"\".concat(top, \"px\"),\n        height: \"\".concat(height, \"px\"),\n        opacity: 1\n      });\n    };\n    var handleLinkClick = function handleLinkClick(link) {\n      var _props2$onClick;\n      (_props2$onClick = props2.onClick) === null || _props2$onClick === void 0 || _props2$onClick.call(props2, link);\n    };\n    var handleScrollTo = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/regenerator.mark(function _callee2(link) {\n        var anchor, targetOffset, scrollTop, offsetTop, top;\n        return regenerator.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              anchor = getAnchorTarget(link);\n              setCurrentActiveLink(link);\n              if (anchor) {\n                _context2.next = 4;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 4:\n              handleScrollLock.value = true;\n              targetOffset = props2.targetOffset;\n              scrollTop = getScroll(scrollContainer.value);\n              offsetTop = getOffsetTop(anchor, scrollContainer.value);\n              top = scrollTop + offsetTop - targetOffset;\n              _context2.next = 11;\n              return scrollTo(top, {\n                container: scrollContainer.value\n              });\n            case 11:\n              handleScrollLock.value = false;\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function handleScrollTo(_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var renderCursor = function renderCursor() {\n      var titleContent = renderTNodeJSX(\"cursor\");\n      return titleContent || createVNode(\"div\", {\n        \"class\": ANCHOR_LINE_CURSOR_CLASSNAME.value\n      }, null);\n    };\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regenerator.mark(function _callee3() {\n      return regenerator.wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            getScrollContainer$1();\n            if (!active.value) {\n              _context3.next = 5;\n              break;\n            }\n            _context3.next = 4;\n            return nextTick();\n          case 4:\n            handleScrollTo(active.value);\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    })));\n    onUnmounted(function () {\n      if (!scrollContainer.value) return;\n      off(scrollContainer.value, \"scroll\", handleScroll);\n    });\n    watchEffect(function () {\n      if (scrollContainer.value) {\n        off(scrollContainer.value, \"scroll\", handleScroll);\n      }\n      getScrollContainer$1();\n    });\n    provide(AnchorInjectionKey, reactive({\n      registerLink: registerLink,\n      unregisterLink: unregisterLink,\n      handleScrollTo: handleScrollTo,\n      handleLinkClick: handleLinkClick,\n      active: active\n    }));\n    return function () {\n      var size = props2.size,\n        affixProps = props2.affixProps;\n      var className = [COMPONENT_NAME.value, SIZE.value[size]];\n      var content = createVNode(\"div\", mergeProps({\n        \"ref\": anchorRef,\n        \"class\": className\n      }, attrs), [createVNode(\"div\", {\n        \"class\": ANCHOR_LINE_CLASSNAME.value\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(ANCHOR_LINE_CURSOR_CLASSNAME.value, \"-wrapper\"),\n        \"style\": activeLineStyle\n      }, [renderCursor()])]), renderTNodeJSX(\"default\")]);\n      if (affixProps) {\n        return createVNode(Affix, affixProps, _isSlot(content) ? content : {\n          \"default\": function _default() {\n            return [content];\n          }\n        });\n      }\n      return content;\n    };\n  }\n});\nexport { _Anchor as default };","map":{"version":3,"names":["_isSlot","s","Object","prototype","toString","call","isVNode","_Anchor","defineComponent","name","inheritAttrs","props","setup","props2","_ref","attrs","anchorRef","ref","links","active","scrollContainer","handleScrollLock","activeLineStyle","reactive","COMPONENT_NAME","usePrefixClass","ANCHOR_LINE_CLASSNAME","ANCHOR_LINE_CURSOR_CLASSNAME","_useCommonClassName","useCommonClassName","STATUS","SIZE","renderTNodeJSX","useTNodeJSX","getScrollContainer$1","isServer","container","value","getScrollContainer","on","handleScroll","bounds","targetOffset","filters","active2","forEach","link","anchor","getAnchorTarget","top","getOffsetTop","push","length","latest","reduce","prev","cur","setCurrentActiveLink","matcher","match","ANCHOR_SHARP_REGEXP","document","getElementById","registerLink","test","indexOf","unregisterLink","filter","each","_ref2","_asyncToGenerator","regenerator","mark","_callee","_props2$onChange","wrap","_callee$","_context","next","abrupt","onChange","nextTick","updateActiveLine","stop","_x","apply","arguments","_anchorRef$value","ele","querySelector","concat","assign","offsetTop","height","offsetHeight","opacity","handleLinkClick","_props2$onClick","onClick","handleScrollTo","_ref3","_callee2","scrollTop","_callee2$","_context2","getScroll","scrollTo","_x2","renderCursor","titleContent","createVNode","onMounted","_callee3","_callee3$","_context3","onUnmounted","off","watchEffect","provide","AnchorInjectionKey","size","affixProps","className","content","mergeProps","Affix","_default"],"sources":["../../src/anchor/anchor.tsx"],"sourcesContent":["import {\n  defineComponent,\n  nextTick,\n  ComponentPublicInstance,\n  ref,\n  reactive,\n  onMounted,\n  onUnmounted,\n  watchEffect,\n  provide,\n} from 'vue';\nimport { ANCHOR_SHARP_REGEXP, ANCHOR_CONTAINER, getOffsetTop } from './utils';\nimport { isServer, on, off, getScroll, scrollTo, getScrollContainer as utilsGetScrollContainer } from '../utils/dom';\nimport props from './props';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { SlotReturnValue } from '../common';\nimport Affix from '../affix';\nimport { TdAnchorProps } from './type';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { AnchorInjectionKey } from './constants';\n\nexport interface Anchor extends ComponentPublicInstance {\n  scrollContainer: ANCHOR_CONTAINER;\n  // 执行scrollTo设置的flag, 用来禁止执行handleScroll\n  handleScrollLock: boolean;\n}\n\nexport default defineComponent({\n  name: 'TAnchor',\n  inheritAttrs: false,\n  props,\n  setup(props: TdAnchorProps, { attrs }) {\n    const anchorRef = ref<HTMLElement | null>(null);\n    const links = ref<string[]>([]);\n    const active = ref('');\n    const scrollContainer = ref<ANCHOR_CONTAINER>(null);\n    const handleScrollLock = ref<boolean>(false);\n    const activeLineStyle = reactive({});\n    const COMPONENT_NAME = usePrefixClass('anchor');\n    const ANCHOR_LINE_CLASSNAME = usePrefixClass('anchor__line');\n    const ANCHOR_LINE_CURSOR_CLASSNAME = usePrefixClass('anchor__line-cursor');\n    const { STATUS, SIZE } = useCommonClassName();\n    const renderTNodeJSX = useTNodeJSX();\n    /**\n     * 获取滚动容器\n     * 1. 如果是string则通过id获取\n     * 2. 如果是method则获取方法返回值\n     */\n    const getScrollContainer = () => {\n      if (isServer) {\n        return;\n      }\n      const { container } = props;\n      scrollContainer.value = utilsGetScrollContainer(container) as HTMLElement;\n      on(scrollContainer.value, 'scroll', handleScroll);\n      handleScroll();\n    };\n    /**\n     * 监听滚动事件\n     */\n    const handleScroll = () => {\n      if (handleScrollLock.value) return;\n      const { bounds, targetOffset } = props;\n      const filters: { top: number; link: string }[] = [];\n      let active = '';\n      // 找出所有当前top小于预设值\n      links.value.forEach((link) => {\n        const anchor = getAnchorTarget(link);\n        if (!anchor) {\n          return;\n        }\n        const top = getOffsetTop(anchor, scrollContainer.value);\n        if (top < bounds + targetOffset) {\n          filters.push({\n            link,\n            top,\n          });\n        }\n      });\n      // 找出小于预设值集合中top最大的\n      if (filters.length) {\n        const latest = filters.reduce((prev, cur) => (prev.top > cur.top ? prev : cur));\n        active = latest.link;\n      }\n      setCurrentActiveLink(active);\n    };\n    /**\n     * 获取锚点对应的target元素\n     *\n     * @param {string} link\n     */\n    const getAnchorTarget = (link: string): HTMLElement => {\n      const matcher = link.match(ANCHOR_SHARP_REGEXP);\n      if (!matcher) {\n        return;\n      }\n      const anchor = document.getElementById(matcher[1]);\n      if (!anchor) {\n        return;\n      }\n      return anchor;\n    };\n    /**\n     * 注册锚点\n     *\n     * @param {string} link\n     */\n    const registerLink = (link: string) => {\n      if (!ANCHOR_SHARP_REGEXP.test(link) || links.value.indexOf(link) !== -1) {\n        return;\n      }\n      links.value.push(link);\n    };\n    /**\n     * 注销锚点\n     *\n     * @param {string} link\n     */\n    const unregisterLink = (link: string) => {\n      links.value = links.value.filter((each) => each !== link);\n    };\n    /**\n     * 设置当前激活状态锚点\n     *\n     * @param {string} link\n     */\n    const setCurrentActiveLink = async (link: string): Promise<void> => {\n      if (active.value === link) {\n        return;\n      }\n      active.value = link;\n      props.onChange?.(link, active.value);\n      await nextTick();\n      updateActiveLine();\n    };\n    /**\n     * 计算active-line所在的位置\n     * 当前active-item的top + height, 以及ANCHOR_ITEM_PADDING修正\n     */\n    const updateActiveLine = () => {\n      const ele = anchorRef.value?.querySelector(`.${STATUS.value.active}>a`) as HTMLAnchorElement;\n      if (!ele) {\n        Object.assign(activeLineStyle, {});\n        return;\n      }\n      const { offsetTop: top, offsetHeight: height } = ele;\n      Object.assign(activeLineStyle, {\n        top: `${top}px`,\n        height: `${height}px`,\n        opacity: 1,\n      });\n    };\n    /**\n     * 监听AnchorLink点击事件\n     * @param {{ href: string; title: string }} link\n     */\n    const handleLinkClick = (link: { href: string; title: string; e: MouseEvent }) => {\n      props.onClick?.(link);\n    };\n    /**\n     * 滚动到指定锚点\n     *\n     * @param {string} link\n     */\n    const handleScrollTo = async (link: string): Promise<void> => {\n      const anchor = getAnchorTarget(link);\n      setCurrentActiveLink(link);\n      if (!anchor) return;\n      handleScrollLock.value = true;\n      const { targetOffset } = props;\n      const scrollTop = getScroll(scrollContainer.value);\n      const offsetTop = getOffsetTop(anchor, scrollContainer.value);\n      const top = scrollTop + offsetTop - targetOffset;\n      await scrollTo(top, {\n        container: scrollContainer.value,\n      });\n      handleScrollLock.value = false;\n    };\n    const renderCursor = () => {\n      const titleContent: SlotReturnValue = renderTNodeJSX('cursor');\n      return titleContent || <div class={ANCHOR_LINE_CURSOR_CLASSNAME.value}></div>;\n    };\n    onMounted(async () => {\n      getScrollContainer();\n      if (active.value) {\n        await nextTick();\n        handleScrollTo(active.value);\n      }\n    });\n    onUnmounted(() => {\n      if (!scrollContainer.value) return;\n      off(scrollContainer.value, 'scroll', handleScroll);\n    });\n    watchEffect(() => {\n      // 清空上一个container的事件监听\n      if (scrollContainer.value) {\n        off(scrollContainer.value, 'scroll', handleScroll);\n      }\n      getScrollContainer();\n    });\n    provide(\n      AnchorInjectionKey,\n      reactive({\n        registerLink,\n        unregisterLink,\n        handleScrollTo,\n        handleLinkClick,\n        active,\n      }),\n    );\n    return () => {\n      const { size, affixProps } = props;\n      const className = [COMPONENT_NAME.value, SIZE.value[size]];\n\n      const content = (\n        <div ref={anchorRef} class={className} {...attrs}>\n          <div class={ANCHOR_LINE_CLASSNAME.value}>\n            <div class={`${ANCHOR_LINE_CURSOR_CLASSNAME.value}-wrapper`} style={activeLineStyle}>\n              {renderCursor()}\n            </div>\n          </div>\n          {renderTNodeJSX('default')}\n        </div>\n      );\n\n      if (affixProps) {\n        return <Affix {...affixProps}>{content}</Affix>;\n      }\n\n      return content;\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}