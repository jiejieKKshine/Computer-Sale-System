{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, toRefs, provide, reactive, ref, createVNode, mergeProps, computed } from 'vue';\nimport { i as isObject_1 } from '../_chunks/dep-2b09875b.mjs';\nimport props from './props.mjs';\nimport stepItemProps from './step-item-props.mjs';\nimport _StepItem from './step-item.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport '../hooks/index.mjs';\nimport { useChildComponentSlots } from '../hooks/slot.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../hooks/useGlobalIcon.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../hooks/tnode.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar _Steps = defineComponent({\n  name: \"TSteps\",\n  props: _objectSpread({}, props),\n  setup: function setup(props2) {\n    var COMPONENT_NAME = usePrefixClass(\"steps\");\n    var _toRefs = toRefs(props2),\n      current = _toRefs.current,\n      modelValue = _toRefs.modelValue;\n    var _useVModel = useVModel(current, modelValue, props2.defaultCurrent, props2.onChange, \"current\"),\n      _useVModel2 = _slicedToArray(_useVModel, 2),\n      innerCurrent = _useVModel2[0],\n      setInnerCurrent = _useVModel2[1];\n    provide(\"StepsState\", reactive({\n      current: innerCurrent,\n      setCurrent: setInnerCurrent\n    }));\n    provide(\"StepsProps\", props2);\n    var indexMap = ref({});\n    var handleStatus = function handleStatus(itemProps, index) {\n      if (itemProps.status && itemProps.status !== \"default\") return itemProps.status;\n      if (innerCurrent.value === \"FINISH\") return \"finish\";\n      if (itemProps.value === void 0 && index < innerCurrent.value) return \"finish\";\n      if (itemProps.value !== void 0) {\n        var matchIndex = indexMap.value[innerCurrent.value];\n        if (matchIndex === void 0) {\n          console.warn(\"TDesign Steps Warn: The current `value` is not exist.\");\n          return \"default\";\n        }\n        if (props2.sequence === \"positive\" && index < matchIndex) return \"finish\";\n        if (props2.sequence === \"reverse\" && index > matchIndex) return \"finish\";\n      }\n      var key = itemProps.value === void 0 ? index : itemProps.value;\n      if (key === innerCurrent.value) return \"process\";\n      return \"default\";\n    };\n    var getChildComponentByName = useChildComponentSlots();\n    var getOptionListBySlots = function getOptionListBySlots(nodes) {\n      var arr = [];\n      nodes === null || nodes === void 0 || nodes.forEach(function (node) {\n        var option = (node === null || node === void 0 ? void 0 : node.props) || {};\n        var children = node === null || node === void 0 ? void 0 : node.children;\n        if (!option && !children) return;\n        if (children && isObject_1(children)) {\n          for (var key in children) {\n            if (key in stepItemProps && !option[key]) {\n              option[key] = children[key];\n            }\n          }\n        }\n        props2.sequence === \"reverse\" ? arr.unshift(option) : arr.push(option);\n      });\n      return arr;\n    };\n    var getOptions = function getOptions() {\n      var _props2$options;\n      var options;\n      if ((_props2$options = props2.options) !== null && _props2$options !== void 0 && _props2$options.length) {\n        options = props2.sequence === \"reverse\" ? props2.options.slice().reverse() : props2.options;\n      } else {\n        var nodes = getChildComponentByName(\"StepItem\");\n        options = getOptionListBySlots(nodes);\n      }\n      (options || []).forEach(function (item, index) {\n        if (item.value !== void 0) indexMap.value[item.value] = index;\n      });\n      return options;\n    };\n    var renderContent = function renderContent() {\n      var options = getOptions();\n      return options.map(function (item, index) {\n        var stepIndex = props2.sequence === \"reverse\" ? options.length - index - 1 : index;\n        index = item.value !== void 0 ? index : stepIndex;\n        return createVNode(_StepItem, mergeProps(item, {\n          \"index\": stepIndex,\n          \"status\": handleStatus(item, index),\n          \"key\": item.value || index\n        }), null);\n      });\n    };\n    var handleTheme = function handleTheme() {\n      var theme = props2.theme;\n      var options = getOptions();\n      options.forEach(function (item) {\n        if ((item === null || item === void 0 ? void 0 : item.icon) !== void 0) {\n          theme = \"default\";\n        }\n      });\n      return theme;\n    };\n    var baseClass = computed(function () {\n      return [COMPONENT_NAME.value, \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.layout), \"\".concat(COMPONENT_NAME.value, \"--\").concat(handleTheme(), \"-anchor\"), \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.sequence), \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.separator, \"-separator\")];\n    });\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": baseClass.value\n      }, [renderContent()]);\n    };\n  }\n});\nexport { _Steps as default };","map":{"version":3,"names":["_Steps","defineComponent","name","props","_objectSpread","setup","props2","COMPONENT_NAME","usePrefixClass","_toRefs","toRefs","current","modelValue","_useVModel","useVModel","defaultCurrent","onChange","_useVModel2","_slicedToArray","innerCurrent","setInnerCurrent","provide","reactive","setCurrent","indexMap","ref","handleStatus","itemProps","index","status","value","matchIndex","console","warn","sequence","key","getChildComponentByName","useChildComponentSlots","getOptionListBySlots","nodes","arr","forEach","node","option","children","isObject_1","stepItemProps","unshift","push","getOptions","_props2$options","options","length","slice","reverse","item","renderContent","map","stepIndex","createVNode","_StepItem","mergeProps","handleTheme","theme","icon","baseClass","computed","concat","layout","separator"],"sources":["../../src/steps/steps.tsx"],"sourcesContent":["import { computed, defineComponent, provide, reactive, ref, toRefs, VNode } from 'vue';\nimport isObject from 'lodash/isObject';\nimport props from './props';\nimport stepItemProps from './step-item-props';\nimport { TdStepItemProps } from './type';\nimport StepItem from './step-item';\n\nimport { usePrefixClass } from '../hooks/useConfig';\nimport useVModel from '../hooks/useVModel';\nimport { useChildComponentSlots } from '../hooks';\n\nexport default defineComponent({\n  name: 'TSteps',\n  props: { ...props },\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('steps');\n\n    const { current, modelValue } = toRefs(props);\n    const [innerCurrent, setInnerCurrent] = useVModel(\n      current,\n      modelValue,\n      props.defaultCurrent,\n      props.onChange,\n      'current',\n    );\n\n    provide(\n      'StepsState',\n      reactive({\n        current: innerCurrent,\n        setCurrent: setInnerCurrent,\n      }),\n    );\n\n    provide('StepsProps', props);\n\n    const indexMap = ref({});\n\n    const handleStatus = (itemProps: TdStepItemProps, index: number) => {\n      if (itemProps.status && itemProps.status !== 'default') return itemProps.status;\n      if (innerCurrent.value === 'FINISH') return 'finish';\n      // value 不存在时，使用 index 进行区分每一个步骤\n      if (itemProps.value === undefined && index < innerCurrent.value) return 'finish';\n      // value 存在，找匹配位置\n      if (itemProps.value !== undefined) {\n        const matchIndex = indexMap.value[innerCurrent.value];\n        if (matchIndex === undefined) {\n          console.warn('TDesign Steps Warn: The current `value` is not exist.');\n          return 'default';\n        }\n        if (props.sequence === 'positive' && index < matchIndex) return 'finish';\n        if (props.sequence === 'reverse' && index > matchIndex) return 'finish';\n      }\n      const key = itemProps.value === undefined ? index : itemProps.value;\n      if (key === innerCurrent.value) return 'process';\n      return 'default';\n    };\n\n    const getChildComponentByName = useChildComponentSlots();\n\n    const getOptionListBySlots = (nodes: VNode[]) => {\n      const arr: Array<TdStepItemProps> = [];\n      nodes?.forEach((node) => {\n        const option = node?.props || {};\n        const children = node?.children;\n        if (!option && !children) return;\n        if (children && isObject(children)) {\n          for (const key in children) {\n            if (key in stepItemProps && !option[key]) {\n              option[key] = children[key];\n            }\n          }\n        }\n        props.sequence === 'reverse' ? arr.unshift(option as TdStepItemProps) : arr.push(option as TdStepItemProps);\n      });\n      return arr;\n    };\n    const getOptions = () => {\n      let options: Array<TdStepItemProps>;\n      if (props.options?.length) {\n        options = props.sequence === 'reverse' ? props.options.slice().reverse() : props.options;\n      } else {\n        const nodes: VNode[] = getChildComponentByName('StepItem') as VNode[];\n        options = getOptionListBySlots(nodes);\n      }\n\n      (options || []).forEach((item, index) => {\n        if (item.value !== undefined) indexMap.value[item.value] = index;\n      });\n      return options;\n    };\n\n    const renderContent = () => {\n      const options = getOptions();\n\n      return options.map((item, index) => {\n        const stepIndex = props.sequence === 'reverse' ? options.length - index - 1 : index;\n        index = item.value !== undefined ? index : stepIndex;\n\n        return <StepItem {...item} index={stepIndex} status={handleStatus(item, index)} key={item.value || index} />;\n      });\n    };\n\n    /** class calculate */\n    const handleTheme = () => {\n      let { theme } = props;\n      const options = getOptions();\n      options.forEach((item) => {\n        if (item?.icon !== undefined) {\n          // icon > theme\n          theme = 'default';\n        }\n      });\n      return theme;\n    };\n    const baseClass = computed(() => {\n      return [\n        COMPONENT_NAME.value,\n        `${COMPONENT_NAME.value}--${props.layout}`,\n        `${COMPONENT_NAME.value}--${handleTheme()}-anchor`,\n        `${COMPONENT_NAME.value}--${props.sequence}`,\n        `${COMPONENT_NAME.value}--${props.separator}-separator`,\n      ];\n    });\n    /** class calculate END */\n\n    return () => <div class={baseClass.value}>{renderContent()}</div>;\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}