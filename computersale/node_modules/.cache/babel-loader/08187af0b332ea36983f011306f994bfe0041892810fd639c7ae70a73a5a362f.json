{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { defineComponent, toRefs, ref, computed, createVNode, h, nextTick, watch, onMounted, Fragment, mergeProps, Teleport } from 'vue';\nimport { i as isFunction_1 } from '../_chunks/dep-06dcbf4c.mjs';\nimport props from './props.mjs';\nimport './utils/index.mjs';\nimport setStyle from '../_common/js/utils/set-style.mjs';\nimport { isFixed, getWindowScroll, removeClass, addClass } from '../utils/dom.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport { Button } from '../button/index.mjs';\nimport { Popup } from '../popup/index.mjs';\nimport { useConfig } from '../config-provider/useConfig.mjs';\nimport getRelativePosition from './utils/getRelativePosition.mjs';\nimport getTargetElm from './utils/getTargetElm.mjs';\nimport { scrollToParentVisibleArea } from './utils/getScrollParent.mjs';\nimport scrollToElm from './utils/scrollToElm.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../utils/easing.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../button/button.mjs';\nimport '../_chunks/dep-4a990ea3.mjs';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-bff7e93a.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-0b414bea.mjs';\nimport '../_chunks/dep-4d4e2af1.mjs';\nimport '../_chunks/dep-fbd4eddb.mjs';\nimport '../_chunks/dep-ae202bc0.mjs';\nimport '../_chunks/dep-aeaef131.mjs';\nimport '../_chunks/dep-69e0f6fc.mjs';\nimport '../_chunks/dep-ea20409b.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-5d3f7c0e.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../_chunks/dep-889e457b.mjs';\nimport '../loading/props.mjs';\nimport '../hooks/useTeleport.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../loading/type.mjs';\nimport '../button/props.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useDisabled.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../button/type.mjs';\nimport '../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../_chunks/dep-5993931e.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/slot.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../popup/container.mjs';\nimport '../popup/props.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../popup/type.mjs';\nvar _Guide = defineComponent({\n  name: \"TGuide\",\n  props: props,\n  setup: function setup(props2, context) {\n    var renderTNodeJSX = useTNodeJSX();\n    var COMPONENT_NAME = usePrefixClass(\"guide\");\n    var LOCK_CLASS = usePrefixClass(\"guide--lock\");\n    var _useConfig = useConfig(\"guide\"),\n      globalConfig = _useConfig.globalConfig;\n    var _toRefs = toRefs(props2),\n      current = _toRefs.current,\n      modelValue = _toRefs.modelValue,\n      hideCounter = _toRefs.hideCounter,\n      hidePrev = _toRefs.hidePrev,\n      hideSkip = _toRefs.hideSkip,\n      steps = _toRefs.steps,\n      zIndex = _toRefs.zIndex;\n    var _useVModel = useVModel(current, modelValue, props2.defaultCurrent, props2.onChange, \"current\"),\n      _useVModel2 = _slicedToArray(_useVModel, 2),\n      innerCurrent = _useVModel2[0],\n      setInnerCurrent = _useVModel2[1];\n    var overlayLayerRef = ref();\n    var highlightLayerRef = ref();\n    var referenceLayerRef = ref();\n    var currentHighlightLayerElm = ref();\n    var dialogWrapperRef = ref();\n    var dialogTooltipRef = ref();\n    var popupTooltipRef = ref();\n    var actived = ref(false);\n    var stepsTotal = computed(function () {\n      return steps.value.length;\n    });\n    var currentStepInfo = computed(function () {\n      return steps.value[innerCurrent.value];\n    });\n    var isPopup = computed(function () {\n      return getCurrentCrossProps(\"mode\") === \"popup\";\n    });\n    var currentElmIsFixed = computed(function () {\n      return isFixed(currentHighlightLayerElm.value || document.body);\n    });\n    var getCurrentCrossProps = function getCurrentCrossProps(propsName) {\n      var _currentStepInfo$valu;\n      return (_currentStepInfo$valu = currentStepInfo.value[propsName]) !== null && _currentStepInfo$valu !== void 0 ? _currentStepInfo$valu : props2[propsName];\n    };\n    var currentCustomHighlightContent = computed(function () {\n      var highlightContent = currentStepInfo.value.highlightContent;\n      var node = highlightContent;\n      if (isFunction_1(highlightContent)) {\n        node = highlightContent(hWithParams());\n      } else if (context.slots.highlightContent) {\n        node = context.slots.highlightContent(hWithParams());\n      } else if (context.slots[\"highlight-content\"]) {\n        node = context.slots[\"highlight-content\"](hWithParams());\n      } else if (!!highlightContent) {\n        node = createVNode(node, null, null);\n      }\n      if (node) {\n        if (!node.props) node.props = {};\n        node.props[\"class\"] = node.props[\"class\"] || \"\";\n      }\n      return node;\n    });\n    var showCustomHighlightContent = computed(function () {\n      return Boolean(currentCustomHighlightContent.value && isPopup.value);\n    });\n    var popupVisible = ref(false);\n    var hWithParams = function hWithParams() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        currentStepInfo: currentStepInfo.value\n      };\n      var newH = new Function(\"return \" + h.toString())();\n      return Object.assign({}, newH, params);\n    };\n    var setHighlightLayerPosition = function setHighlightLayerPosition(highlightLayer) {\n      var isReference = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _getRelativePosition = getRelativePosition(currentHighlightLayerElm.value),\n        top = _getRelativePosition.top,\n        left = _getRelativePosition.left;\n      var _currentHighlightLaye = currentHighlightLayerElm.value.getBoundingClientRect(),\n        width = _currentHighlightLaye.width,\n        height = _currentHighlightLaye.height;\n      var highlightPadding = getCurrentCrossProps(\"highlightPadding\");\n      if (isPopup.value) {\n        width += highlightPadding * 2;\n        height += highlightPadding * 2;\n        top -= highlightPadding;\n        left -= highlightPadding;\n      } else {\n        var _getWindowScroll = getWindowScroll(),\n          scrollTop = _getWindowScroll.scrollTop,\n          scrollLeft = _getWindowScroll.scrollLeft;\n        top += scrollTop;\n        left += scrollLeft;\n      }\n      var style = {\n        top: \"\".concat(top, \"px\"),\n        left: \"\".concat(left, \"px\")\n      };\n      if (showCustomHighlightContent.value) {\n        if (isReference) {\n          var _highlightLayerRef$va = highlightLayerRef.value.getBoundingClientRect(),\n            width2 = _highlightLayerRef$va.width,\n            height2 = _highlightLayerRef$va.height;\n          Object.assign(style, {\n            width: \"\".concat(width2, \"px\"),\n            height: \"\".concat(height2, \"px\")\n          });\n        } else {\n          Object.assign(style, {\n            width: \"auto\",\n            height: \"auto\"\n          });\n        }\n      } else {\n        Object.assign(style, {\n          width: \"\".concat(width, \"px\"),\n          height: \"\".concat(height, \"px\")\n        });\n      }\n      setStyle(highlightLayer, style);\n    };\n    var showPopupGuide = function showPopupGuide() {\n      nextTick(function () {\n        var _popupTooltipRef$valu;\n        currentHighlightLayerElm.value = getTargetElm(currentStepInfo.value.element);\n        if (!currentHighlightLayerElm.value) return;\n        scrollToParentVisibleArea(currentHighlightLayerElm.value);\n        setHighlightLayerPosition(highlightLayerRef.value);\n        setHighlightLayerPosition(referenceLayerRef.value, true);\n        scrollToElm(currentHighlightLayerElm.value);\n        (_popupTooltipRef$valu = popupTooltipRef.value) === null || _popupTooltipRef$valu === void 0 || _popupTooltipRef$valu.update();\n      });\n    };\n    var destroyTooltipElm = function destroyTooltipElm() {\n      var _referenceLayerRef$va;\n      (_referenceLayerRef$va = referenceLayerRef.value) === null || _referenceLayerRef$va === void 0 || _referenceLayerRef$va.parentNode.removeChild(referenceLayerRef.value);\n    };\n    var showDialogGuide = function showDialogGuide() {\n      nextTick(function () {\n        currentHighlightLayerElm.value = dialogTooltipRef.value;\n        scrollToParentVisibleArea(currentHighlightLayerElm.value);\n        setHighlightLayerPosition(highlightLayerRef.value);\n        scrollToElm(currentHighlightLayerElm.value);\n      });\n    };\n    var destroyDialogTooltipElm = function destroyDialogTooltipElm() {\n      var _dialogTooltipRef$val, _dialogWrapperRef$val;\n      (_dialogTooltipRef$val = dialogTooltipRef.value) === null || _dialogTooltipRef$val === void 0 || _dialogTooltipRef$val.parentNode.removeChild(dialogTooltipRef.value);\n      (_dialogWrapperRef$val = dialogWrapperRef.value) === null || _dialogWrapperRef$val === void 0 || _dialogWrapperRef$val.parentNode.removeChild(dialogWrapperRef.value);\n    };\n    var showGuide = function showGuide() {\n      if (isPopup.value) {\n        destroyDialogTooltipElm();\n        showPopupGuide();\n      } else {\n        destroyTooltipElm();\n        showDialogGuide();\n      }\n      popupVisible.value = true;\n    };\n    var destroyGuide = function destroyGuide() {\n      var _highlightLayerRef$va2, _overlayLayerRef$valu;\n      destroyTooltipElm();\n      destroyDialogTooltipElm();\n      (_highlightLayerRef$va2 = highlightLayerRef.value) === null || _highlightLayerRef$va2 === void 0 || _highlightLayerRef$va2.parentNode.removeChild(highlightLayerRef.value);\n      (_overlayLayerRef$valu = overlayLayerRef.value) === null || _overlayLayerRef$valu === void 0 || _overlayLayerRef$valu.parentNode.removeChild(overlayLayerRef.value);\n      removeClass(document.body, LOCK_CLASS.value);\n    };\n    var handleSkip = function handleSkip(e) {\n      var _props2$onSkip;\n      var total = stepsTotal.value;\n      actived.value = false;\n      setInnerCurrent(-1, {\n        e: e,\n        total: total\n      });\n      (_props2$onSkip = props2.onSkip) === null || _props2$onSkip === void 0 || _props2$onSkip.call(props2, {\n        e: e,\n        current: innerCurrent.value,\n        total: total\n      });\n    };\n    var handlePrev = function handlePrev(e) {\n      var _props2$onPrevStepCli;\n      var total = stepsTotal.value;\n      setInnerCurrent(innerCurrent.value - 1, {\n        e: e,\n        total: total\n      });\n      (_props2$onPrevStepCli = props2.onPrevStepClick) === null || _props2$onPrevStepCli === void 0 || _props2$onPrevStepCli.call(props2, {\n        e: e,\n        prev: innerCurrent.value - 1,\n        current: innerCurrent.value,\n        total: total\n      });\n    };\n    var handleNext = function handleNext(e) {\n      var _props2$onNextStepCli;\n      var total = stepsTotal.value;\n      setInnerCurrent(innerCurrent.value + 1, {\n        e: e,\n        total: total\n      });\n      (_props2$onNextStepCli = props2.onNextStepClick) === null || _props2$onNextStepCli === void 0 || _props2$onNextStepCli.call(props2, {\n        e: e,\n        next: innerCurrent.value + 1,\n        current: innerCurrent.value,\n        total: total\n      });\n    };\n    var handleFinish = function handleFinish(e) {\n      var _props2$onFinish;\n      var total = stepsTotal.value;\n      actived.value = false;\n      setInnerCurrent(-1, {\n        e: e,\n        total: total\n      });\n      (_props2$onFinish = props2.onFinish) === null || _props2$onFinish === void 0 || _props2$onFinish.call(props2, {\n        e: e,\n        current: innerCurrent.value,\n        total: total\n      });\n    };\n    var initGuide = function initGuide() {\n      if (innerCurrent.value >= 0 && innerCurrent.value < steps.value.length) {\n        if (!actived.value) {\n          actived.value = true;\n          addClass(document.body, LOCK_CLASS.value);\n        }\n        showGuide();\n      }\n    };\n    watch(innerCurrent, function (val) {\n      if (val >= 0 && val < steps.value.length) {\n        popupVisible.value = false;\n        initGuide();\n      } else {\n        actived.value = false;\n        destroyGuide();\n      }\n    });\n    onMounted(function () {\n      initGuide();\n    });\n    return function () {\n      var renderOverlayLayer = function renderOverlayLayer() {\n        return createVNode(\"div\", {\n          \"ref\": overlayLayerRef,\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__overlay\"),\n          \"style\": {\n            zIndex: zIndex.value - 2\n          }\n        }, null);\n      };\n      var renderHighlightLayer = function renderHighlightLayer() {\n        var style = {\n          zIndex: zIndex.value - 1\n        };\n        var highlightClass = [\"\".concat(COMPONENT_NAME.value, \"__highlight\"), \"\".concat(COMPONENT_NAME.value, \"__highlight--\").concat(isPopup.value ? \"popup\" : \"dialog\"), \"\".concat(COMPONENT_NAME.value, \"--\").concat(currentElmIsFixed.value && isPopup.value ? \"fixed\" : \"absolute\")];\n        var showOverlay = getCurrentCrossProps(\"showOverlay\");\n        var maskClass = [\"\".concat(COMPONENT_NAME.value, \"__highlight--\").concat(showOverlay ? \"mask\" : \"nomask\")];\n        return createVNode(\"div\", {\n          \"ref\": highlightLayerRef,\n          \"class\": [].concat(highlightClass, maskClass),\n          \"style\": style\n        }, [showCustomHighlightContent.value && currentCustomHighlightContent.value]);\n      };\n      var renderCounter = function renderCounter() {\n        var popupSlotCounter = renderTNodeJSX(\"counter\", {\n          params: {\n            total: stepsTotal.value,\n            current: innerCurrent.value\n          }\n        });\n        var popupDefaultCounter = createVNode(\"div\", {\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__counter\")\n        }, [popupSlotCounter || \"\".concat(innerCurrent.value + 1, \"/\").concat(stepsTotal.value)]);\n        return createVNode(Fragment, null, [!hideCounter.value && popupDefaultCounter]);\n      };\n      var renderAction = function renderAction(mode) {\n        var _getCurrentCrossProps, _getCurrentCrossProps2, _getCurrentCrossProps3, _props2$finishButtonP;\n        var isLast = innerCurrent.value === stepsTotal.value - 1;\n        var isFirst = innerCurrent.value === 0;\n        var buttonSize = mode === \"popup\" ? \"small\" : \"medium\";\n        return createVNode(\"div\", {\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__action\")\n        }, [!hideSkip.value && !isLast && createVNode(Button, mergeProps({\n          \"key\": \"skip\",\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__skip\"),\n          \"theme\": \"default\",\n          \"size\": buttonSize,\n          \"variant\": \"base\",\n          \"onClick\": handleSkip\n        }, (_getCurrentCrossProps = getCurrentCrossProps(\"skipButtonProps\")) !== null && _getCurrentCrossProps !== void 0 ? _getCurrentCrossProps : globalConfig.value.skipButtonProps), null), !hidePrev.value && !isFirst && createVNode(Button, mergeProps({\n          \"key\": \"prev\",\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__prev\"),\n          \"theme\": \"default\",\n          \"size\": buttonSize,\n          \"variant\": \"base\",\n          \"onClick\": handlePrev\n        }, (_getCurrentCrossProps2 = getCurrentCrossProps(\"prevButtonProps\")) !== null && _getCurrentCrossProps2 !== void 0 ? _getCurrentCrossProps2 : globalConfig.value.prevButtonProps), null), !isLast && createVNode(Button, mergeProps({\n          \"key\": \"next\",\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__next\"),\n          \"theme\": \"primary\",\n          \"size\": buttonSize,\n          \"variant\": \"base\",\n          \"onClick\": handleNext\n        }, (_getCurrentCrossProps3 = getCurrentCrossProps(\"nextButtonProps\")) !== null && _getCurrentCrossProps3 !== void 0 ? _getCurrentCrossProps3 : globalConfig.value.nextButtonProps), null), isLast && createVNode(Button, mergeProps({\n          \"key\": \"finish\",\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__finish\"),\n          \"theme\": \"primary\",\n          \"size\": buttonSize,\n          \"variant\": \"base\",\n          \"onClick\": handleFinish\n        }, (_props2$finishButtonP = props2.finishButtonProps) !== null && _props2$finishButtonP !== void 0 ? _props2$finishButtonP : globalConfig.value.finishButtonProps), null)]);\n      };\n      var renderTitle = function renderTitle() {\n        var functionTitle = isFunction_1(currentStepInfo.value.title) ? currentStepInfo.value.title() : void 0;\n        var slotTitle = context.slots.title ? context.slots.title(hWithParams()) : void 0;\n        return functionTitle || slotTitle || currentStepInfo.value.title;\n      };\n      var renderTooltipBody = function renderTooltipBody() {\n        var title = createVNode(\"div\", {\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__title\")\n        }, [renderTitle()]);\n        var bodyRender = currentStepInfo.value.body;\n        var descBody;\n        if (isFunction_1(bodyRender)) {\n          descBody = bodyRender(hWithParams());\n        } else if (context.slots.body) {\n          descBody = context.slots.body({\n            currentStepInfo: currentStepInfo.value\n          });\n        } else if (typeof bodyRender === \"string\") {\n          descBody = bodyRender;\n        } else {\n          descBody = createVNode(bodyRender, null, null);\n        }\n        var desc = createVNode(\"div\", {\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__desc\")\n        }, [descBody]);\n        return createVNode(Fragment, null, [title, desc]);\n      };\n      var renderPopupContent = function renderPopupContent() {\n        var footerClasses = [\"\".concat(COMPONENT_NAME.value, \"__footer\"), \"\".concat(COMPONENT_NAME.value, \"__footer--popup\")];\n        var action = createVNode(\"div\", {\n          \"class\": footerClasses\n        }, [renderCounter(), renderAction(\"popup\")]);\n        return createVNode(\"div\", {\n          \"class\": \"\".concat(COMPONENT_NAME.value, \"__tooltip\")\n        }, [renderTooltipBody(), action]);\n      };\n      var renderPopupGuide = function renderPopupGuide() {\n        var _currentStepInfo$valu2;\n        var content = currentStepInfo.value.content;\n        var contentProps = {\n          handlePrev: handlePrev,\n          handleNext: handleNext,\n          handleSkip: handleSkip,\n          handleFinish: handleFinish,\n          current: innerCurrent.value,\n          total: stepsTotal.value\n        };\n        var renderBody;\n        if (isFunction_1(content)) {\n          renderBody = function renderBody() {\n            return content(hWithParams(contentProps));\n          };\n        } else if (context.slots.content) {\n          renderBody = function renderBody() {\n            return context.slots.content(hWithParams(contentProps));\n          };\n        } else if (content) {\n          renderBody = function renderBody() {\n            return createVNode(content, contentProps, null);\n          };\n        } else {\n          renderBody = renderPopupContent;\n        }\n        var classes = [\"\".concat(COMPONENT_NAME.value, \"__reference\"), \"\".concat(COMPONENT_NAME.value, \"--\").concat(currentElmIsFixed.value ? \"fixed\" : \"absolute\")];\n        var innerClassName = [_defineProperty({}, \"\".concat(COMPONENT_NAME.value, \"__popup--content\"), !!content)];\n        return createVNode(Popup, mergeProps({\n          \"ref\": popupTooltipRef,\n          \"visible\": popupVisible.value,\n          \"show-arrow\": !content,\n          \"zIndex\": zIndex.value,\n          \"placement\": currentStepInfo.value.placement\n        }, currentStepInfo.value.popupProps, {\n          \"content\": renderBody,\n          \"overlayClassName\": [\"\".concat(COMPONENT_NAME.value, \"__popup\"), currentStepInfo.value.stepOverlayClass],\n          \"overlayInnerClassName\": innerClassName.concat((_currentStepInfo$valu2 = currentStepInfo.value.popupProps) === null || _currentStepInfo$valu2 === void 0 ? void 0 : _currentStepInfo$valu2.overlayInnerClassName)\n        }), {\n          \"default\": function _default() {\n            return [createVNode(\"div\", {\n              \"ref\": referenceLayerRef,\n              \"class\": classes\n            }, null)];\n          }\n        });\n      };\n      var renderDialogGuide = function renderDialogGuide() {\n        var style = {\n          zIndex: zIndex.value\n        };\n        var wrapperClasses = [\"\".concat(COMPONENT_NAME.value, \"__wrapper\"), _defineProperty({}, \"\".concat(COMPONENT_NAME.value, \"__wrapper--center\"), currentStepInfo.value.placement === \"center\")];\n        var dialogClasses = [\"\".concat(COMPONENT_NAME.value, \"__reference\"), \"\".concat(COMPONENT_NAME.value, \"--absolute\"), \"\".concat(COMPONENT_NAME.value, \"__dialog\"), _defineProperty(_defineProperty({}, \"\".concat(COMPONENT_NAME.value, \"__dialog--nomask\"), !getCurrentCrossProps(\"showOverlay\")), currentStepInfo.value.stepOverlayClass, !!currentStepInfo.value.stepOverlayClass)];\n        var footerClasses = [\"\".concat(COMPONENT_NAME.value, \"__footer\"), \"\".concat(COMPONENT_NAME.value, \"__footer--popup\")];\n        return createVNode(Fragment, null, [createVNode(\"div\", {\n          \"ref\": dialogWrapperRef,\n          \"class\": wrapperClasses,\n          \"style\": style\n        }, [createVNode(\"div\", {\n          \"ref\": dialogTooltipRef,\n          \"class\": dialogClasses\n        }, [renderTooltipBody(), createVNode(\"div\", {\n          \"class\": footerClasses\n        }, [renderCounter(), renderAction(\"dialog\")])])])]);\n      };\n      var renderGuide = function renderGuide() {\n        return createVNode(Fragment, null, [createVNode(Teleport, {\n          \"to\": \"body\"\n        }, {\n          \"default\": function _default() {\n            return [renderOverlayLayer(), renderHighlightLayer(), isPopup.value ? renderPopupGuide() : renderDialogGuide()];\n          }\n        })]);\n      };\n      return createVNode(Fragment, null, [actived.value && renderGuide()]);\n    };\n  }\n});\nexport { _Guide as default };","map":{"version":3,"names":["_Guide","defineComponent","name","props","setup","props2","context","renderTNodeJSX","useTNodeJSX","COMPONENT_NAME","usePrefixClass","LOCK_CLASS","_useConfig","useConfig","globalConfig","_toRefs","toRefs","current","modelValue","hideCounter","hidePrev","hideSkip","steps","zIndex","_useVModel","useVModel","defaultCurrent","onChange","_useVModel2","_slicedToArray","innerCurrent","setInnerCurrent","overlayLayerRef","ref","highlightLayerRef","referenceLayerRef","currentHighlightLayerElm","dialogWrapperRef","dialogTooltipRef","popupTooltipRef","actived","stepsTotal","computed","value","length","currentStepInfo","isPopup","getCurrentCrossProps","currentElmIsFixed","isFixed","document","body","propsName","_currentStepInfo$valu","currentCustomHighlightContent","highlightContent","node","isFunction_1","hWithParams","slots","createVNode","showCustomHighlightContent","Boolean","popupVisible","params","arguments","undefined","newH","Function","h","toString","Object","assign","setHighlightLayerPosition","highlightLayer","isReference","_getRelativePosition","getRelativePosition","top","left","_currentHighlightLaye","getBoundingClientRect","width","height","highlightPadding","_getWindowScroll","getWindowScroll","scrollTop","scrollLeft","style","concat","_highlightLayerRef$va","width2","height2","setStyle","showPopupGuide","nextTick","_popupTooltipRef$valu","getTargetElm","element","scrollToParentVisibleArea","scrollToElm","update","destroyTooltipElm","_referenceLayerRef$va","parentNode","removeChild","showDialogGuide","destroyDialogTooltipElm","_dialogTooltipRef$val","_dialogWrapperRef$val","showGuide","destroyGuide","_highlightLayerRef$va2","_overlayLayerRef$valu","removeClass","handleSkip","e","_props2$onSkip","total","onSkip","call","handlePrev","_props2$onPrevStepCli","onPrevStepClick","prev","handleNext","_props2$onNextStepCli","onNextStepClick","next","handleFinish","_props2$onFinish","onFinish","initGuide","addClass","watch","val","onMounted","renderOverlayLayer","renderHighlightLayer","highlightClass","showOverlay","maskClass","renderCounter","popupSlotCounter","popupDefaultCounter","Fragment","renderAction","mode","_getCurrentCrossProps","_getCurrentCrossProps2","_getCurrentCrossProps3","_props2$finishButtonP","isLast","isFirst","buttonSize","Button","mergeProps","skipButtonProps","prevButtonProps","nextButtonProps","finishButtonProps","renderTitle","functionTitle","title","slotTitle","renderTooltipBody","bodyRender","descBody","desc","renderPopupContent","footerClasses","action","renderPopupGuide","_currentStepInfo$valu2","content","contentProps","renderBody","classes","innerClassName","_defineProperty","Popup","placement","popupProps","stepOverlayClass","overlayInnerClassName","renderDialogGuide","wrapperClasses","dialogClasses","renderGuide","Teleport","_default"],"sources":["../../src/guide/guide.tsx"],"sourcesContent":["import { defineComponent, computed, nextTick, onMounted, ref, toRefs, watch, h, Teleport } from 'vue';\nimport isFunction from 'lodash/isFunction';\nimport props from './props';\nimport { GuideCrossProps } from './interface';\nimport { TdGuideProps, GuideStep } from './type';\nimport { scrollToParentVisibleArea, getRelativePosition, getTargetElm, scrollToElm } from './utils';\nimport setStyle from '../_common/js/utils/set-style';\nimport { addClass, removeClass, isFixed, getWindowScroll } from '../utils/dom';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass, useConfig } from '../hooks/useConfig';\nimport Button from '../button';\nimport Popup, { PopupProps } from '../popup';\n\nexport default defineComponent({\n  name: 'TGuide',\n  props,\n  setup(props: TdGuideProps, context) {\n    const renderTNodeJSX = useTNodeJSX();\n    const COMPONENT_NAME = usePrefixClass('guide');\n    const LOCK_CLASS = usePrefixClass('guide--lock');\n    const { globalConfig } = useConfig('guide');\n\n    const { current, modelValue, hideCounter, hidePrev, hideSkip, steps, zIndex } = toRefs(props);\n    const [innerCurrent, setInnerCurrent] = useVModel(\n      current,\n      modelValue,\n      props.defaultCurrent,\n      props.onChange,\n      'current',\n    );\n\n    // 覆盖层，用于覆盖所有元素\n    const overlayLayerRef = ref<HTMLElement>();\n    // 高亮层，用于高亮元素\n    const highlightLayerRef = ref<HTMLElement>();\n    // 提示层，用于高亮元素\n    const referenceLayerRef = ref<HTMLElement>();\n    // 当前高亮的元素\n    const currentHighlightLayerElm = ref<HTMLElement>();\n    // dialog wrapper ref\n    const dialogWrapperRef = ref<HTMLElement>();\n    // dialog ref\n    const dialogTooltipRef = ref<HTMLElement>();\n    // ! popup ref 不确定这里的类型是否完全正确\n    const popupTooltipRef = ref<InstanceType<typeof Popup>>();\n    // 是否开始展示\n    const actived = ref<boolean>(false);\n    // 步骤总数\n    const stepsTotal = computed(() => steps.value.length);\n    // 当前步骤的信息\n    const currentStepInfo = computed<GuideStep>(() => steps.value[innerCurrent.value]);\n    // 当前是否为 popup\n    const isPopup = computed(() => getCurrentCrossProps('mode') === 'popup');\n    // 当前元素位置状态\n    const currentElmIsFixed = computed(() => isFixed(currentHighlightLayerElm.value || document.body));\n    // 获取当前步骤的属性值 用户当前步骤设置 > 用户组件设置的\n    const getCurrentCrossProps = <Key extends keyof GuideCrossProps>(propsName: Key) =>\n      currentStepInfo.value[propsName] ?? props[propsName];\n    // 获取当前步骤的用户设定的高亮内容\n    const currentCustomHighlightContent = computed(() => {\n      const { highlightContent } = currentStepInfo.value;\n\n      let node: any = highlightContent;\n      if (isFunction(highlightContent)) {\n        // 支持函数\n        node = highlightContent(hWithParams());\n      } else if (context.slots.highlightContent) {\n        // 支持插槽\n        node = context.slots.highlightContent(hWithParams());\n      } else if (context.slots['highlight-content']) {\n        // 支持插槽\n        node = context.slots['highlight-content'](hWithParams());\n      } else if (!!highlightContent) {\n        // 支持组件\n        node = <node />;\n      }\n\n      // 给自定义元素添加类名\n      if (node) {\n        if (!node.props) node.props = {};\n        node.props.class = node.props.class || '';\n      }\n      return node;\n    });\n\n    // 是否展示高亮区域\n    const showCustomHighlightContent = computed(() => Boolean(currentCustomHighlightContent.value && isPopup.value));\n    //\n    const popupVisible = ref(false);\n    const hWithParams = (params: Record<string, any> = { currentStepInfo: currentStepInfo.value }) => {\n      const newH = new Function('return ' + h.toString())();\n      return Object.assign({}, newH, params);\n    };\n\n    // 设置高亮层的位置\n    const setHighlightLayerPosition = (highlightLayer: HTMLElement, isReference = false) => {\n      // 这里预留了一个相对元素的功能，暂未使用，也是这里导致了 fix #2111\n      let { top, left } = getRelativePosition(currentHighlightLayerElm.value);\n      let { width, height } = currentHighlightLayerElm.value.getBoundingClientRect();\n      const highlightPadding = getCurrentCrossProps('highlightPadding');\n\n      if (isPopup.value) {\n        width += highlightPadding * 2;\n        height += highlightPadding * 2;\n        top -= highlightPadding;\n        left -= highlightPadding;\n      } else {\n        const { scrollTop, scrollLeft } = getWindowScroll();\n        top += scrollTop;\n        left += scrollLeft;\n      }\n\n      const style = {\n        top: `${top}px`,\n        left: `${left}px`,\n      };\n\n      // 展示自定义高亮\n      if (showCustomHighlightContent.value) {\n        // 高亮框本身不设定宽高，引用用框的宽高设定为用户自定义的宽高\n        if (isReference) {\n          const { width, height } = highlightLayerRef.value.getBoundingClientRect();\n          Object.assign(style, {\n            width: `${width}px`,\n            height: `${height}px`,\n          });\n        } else {\n          Object.assign(style, {\n            width: 'auto',\n            height: 'auto',\n          });\n        }\n      } else {\n        Object.assign(style, {\n          width: `${width}px`,\n          height: `${height}px`,\n        });\n      }\n      setStyle(highlightLayer, style);\n    };\n\n    const showPopupGuide = () => {\n      nextTick(() => {\n        currentHighlightLayerElm.value = getTargetElm(currentStepInfo.value.element);\n        if (!currentHighlightLayerElm.value) return;\n        scrollToParentVisibleArea(currentHighlightLayerElm.value);\n        setHighlightLayerPosition(highlightLayerRef.value);\n        setHighlightLayerPosition(referenceLayerRef.value, true);\n        scrollToElm(currentHighlightLayerElm.value);\n        // fix: https://github.com/Tencent/tdesign-vue-next/issues/2536\n        // 这里其实是一个临时解决方案，最合理的是 popup 内部处理\n        popupTooltipRef.value?.update();\n      });\n    };\n\n    const destroyTooltipElm = () => {\n      referenceLayerRef.value?.parentNode.removeChild(referenceLayerRef.value);\n    };\n\n    const showDialogGuide = () => {\n      nextTick(() => {\n        currentHighlightLayerElm.value = dialogTooltipRef.value;\n        scrollToParentVisibleArea(currentHighlightLayerElm.value);\n        setHighlightLayerPosition(highlightLayerRef.value);\n        scrollToElm(currentHighlightLayerElm.value);\n      });\n    };\n\n    const destroyDialogTooltipElm = () => {\n      dialogTooltipRef.value?.parentNode.removeChild(dialogTooltipRef.value);\n      dialogWrapperRef.value?.parentNode.removeChild(dialogWrapperRef.value);\n    };\n\n    const showGuide = () => {\n      if (isPopup.value) {\n        destroyDialogTooltipElm();\n        showPopupGuide();\n      } else {\n        destroyTooltipElm();\n        showDialogGuide();\n      }\n      popupVisible.value = true;\n    };\n\n    const destroyGuide = () => {\n      destroyTooltipElm();\n      destroyDialogTooltipElm();\n      highlightLayerRef.value?.parentNode.removeChild(highlightLayerRef.value);\n      overlayLayerRef.value?.parentNode.removeChild(overlayLayerRef.value);\n      removeClass(document.body, LOCK_CLASS.value);\n    };\n\n    const handleSkip = (e: MouseEvent) => {\n      const total = stepsTotal.value;\n      actived.value = false;\n      setInnerCurrent(-1, { e, total });\n      props.onSkip?.({ e, current: innerCurrent.value, total });\n    };\n\n    const handlePrev = (e: MouseEvent) => {\n      const total = stepsTotal.value;\n      setInnerCurrent(innerCurrent.value - 1, { e, total });\n      props.onPrevStepClick?.({\n        e,\n        prev: innerCurrent.value - 1,\n        current: innerCurrent.value,\n        total,\n      });\n    };\n\n    const handleNext = (e: MouseEvent) => {\n      const total = stepsTotal.value;\n      setInnerCurrent(innerCurrent.value + 1, { e, total });\n      props.onNextStepClick?.({\n        e,\n        next: innerCurrent.value + 1,\n        current: innerCurrent.value,\n        total,\n      });\n    };\n\n    const handleFinish = (e: MouseEvent) => {\n      const total = stepsTotal.value;\n      actived.value = false;\n      setInnerCurrent(-1, { e, total });\n      props.onFinish?.({ e, current: innerCurrent.value, total });\n    };\n\n    const initGuide = () => {\n      if (innerCurrent.value >= 0 && innerCurrent.value < steps.value.length) {\n        if (!actived.value) {\n          actived.value = true;\n          addClass(document.body, LOCK_CLASS.value);\n        }\n        showGuide();\n      }\n    };\n\n    watch(innerCurrent, (val) => {\n      if (val >= 0 && val < steps.value.length) {\n        popupVisible.value = false;\n        initGuide();\n      } else {\n        actived.value = false;\n        destroyGuide();\n      }\n    });\n\n    onMounted(() => {\n      initGuide();\n    });\n\n    return () => {\n      const renderOverlayLayer = () => (\n        <div ref={overlayLayerRef} class={`${COMPONENT_NAME.value}__overlay`} style={{ zIndex: zIndex.value - 2 }} />\n      );\n\n      const renderHighlightLayer = () => {\n        const style = { zIndex: zIndex.value - 1 };\n        const highlightClass = [\n          `${COMPONENT_NAME.value}__highlight`,\n          `${COMPONENT_NAME.value}__highlight--${isPopup.value ? 'popup' : 'dialog'}`,\n          `${COMPONENT_NAME.value}--${currentElmIsFixed.value && isPopup.value ? 'fixed' : 'absolute'}`,\n        ];\n        const showOverlay = getCurrentCrossProps('showOverlay');\n        const maskClass = [`${COMPONENT_NAME.value}__highlight--${showOverlay ? 'mask' : 'nomask'}`];\n\n        return (\n          <div ref={highlightLayerRef} class={[...highlightClass, ...maskClass]} style={style}>\n            {showCustomHighlightContent.value && currentCustomHighlightContent.value}\n          </div>\n        );\n      };\n\n      const renderCounter = () => {\n        const popupSlotCounter = renderTNodeJSX('counter', {\n          params: { total: stepsTotal.value, current: innerCurrent.value },\n        });\n\n        const popupDefaultCounter = (\n          <div class={`${COMPONENT_NAME.value}__counter`}>\n            {popupSlotCounter || `${innerCurrent.value + 1}/${stepsTotal.value}`}\n          </div>\n        );\n        return <>{!hideCounter.value && popupDefaultCounter}</>;\n      };\n\n      const renderAction = (mode: TdGuideProps['mode']) => {\n        const isLast = innerCurrent.value === stepsTotal.value - 1;\n        const isFirst = innerCurrent.value === 0;\n        const buttonSize = mode === 'popup' ? 'small' : 'medium';\n\n        return (\n          <div class={`${COMPONENT_NAME.value}__action`}>\n            {!hideSkip.value && !isLast && (\n              <Button\n                key=\"skip\"\n                class={`${COMPONENT_NAME.value}__skip`}\n                theme=\"default\"\n                size={buttonSize}\n                variant=\"base\"\n                onClick={handleSkip}\n                {...(getCurrentCrossProps('skipButtonProps') ?? globalConfig.value.skipButtonProps)}\n              />\n            )}\n            {!hidePrev.value && !isFirst && (\n              <Button\n                key=\"prev\"\n                class={`${COMPONENT_NAME.value}__prev`}\n                theme=\"default\"\n                size={buttonSize}\n                variant=\"base\"\n                onClick={handlePrev}\n                {...(getCurrentCrossProps('prevButtonProps') ?? globalConfig.value.prevButtonProps)}\n              />\n            )}\n            {!isLast && (\n              <Button\n                key=\"next\"\n                class={`${COMPONENT_NAME.value}__next`}\n                theme=\"primary\"\n                size={buttonSize}\n                variant=\"base\"\n                onClick={handleNext}\n                {...(getCurrentCrossProps('nextButtonProps') ?? globalConfig.value.nextButtonProps)}\n              />\n            )}\n            {isLast && (\n              <Button\n                key=\"finish\"\n                class={`${COMPONENT_NAME.value}__finish`}\n                theme=\"primary\"\n                size={buttonSize}\n                variant=\"base\"\n                onClick={handleFinish}\n                {...(props.finishButtonProps ?? globalConfig.value.finishButtonProps)}\n              />\n            )}\n          </div>\n        );\n      };\n\n      const renderTitle = () => {\n        const functionTitle = isFunction(currentStepInfo.value.title) ? currentStepInfo.value.title() : undefined;\n        const slotTitle = context.slots.title ? context.slots.title(hWithParams()) : undefined;\n        return functionTitle || slotTitle || currentStepInfo.value.title;\n      };\n\n      const renderTooltipBody = () => {\n        const title = <div class={`${COMPONENT_NAME.value}__title`}>{renderTitle()}</div>;\n        const bodyRender = currentStepInfo.value.body;\n\n        let descBody: any;\n        if (isFunction(bodyRender)) {\n          descBody = bodyRender(hWithParams());\n        } else if (context.slots.body) {\n          descBody = context.slots.body({ currentStepInfo: currentStepInfo.value });\n        } else if (typeof bodyRender === 'string') {\n          descBody = bodyRender;\n        } else {\n          descBody = <bodyRender />;\n        }\n        const desc = <div class={`${COMPONENT_NAME.value}__desc`}>{descBody}</div>;\n\n        return (\n          <>\n            {title}\n            {desc}\n          </>\n        );\n      };\n\n      const renderPopupContent = () => {\n        const footerClasses = [`${COMPONENT_NAME.value}__footer`, `${COMPONENT_NAME.value}__footer--popup`];\n        const action = (\n          <div class={footerClasses}>\n            {renderCounter()}\n            {renderAction('popup')}\n          </div>\n        );\n\n        return (\n          <div class={`${COMPONENT_NAME.value}__tooltip`}>\n            {renderTooltipBody()}\n            {action}\n          </div>\n        );\n      };\n\n      const renderPopupGuide = () => {\n        const { content } = currentStepInfo.value;\n        const contentProps = {\n          handlePrev,\n          handleNext,\n          handleSkip,\n          handleFinish,\n          current: innerCurrent.value,\n          total: stepsTotal.value,\n        };\n        let renderBody;\n        if (isFunction(content)) {\n          renderBody = () => content(hWithParams(contentProps));\n        } else if (context.slots.content) {\n          renderBody = () => context.slots.content(hWithParams(contentProps));\n        } else if (content) {\n          renderBody = () => <content {...contentProps} />;\n        } else {\n          renderBody = renderPopupContent;\n        }\n        const classes = [\n          `${COMPONENT_NAME.value}__reference`,\n          `${COMPONENT_NAME.value}--${currentElmIsFixed.value ? 'fixed' : 'absolute'}`,\n        ];\n\n        const innerClassName: PopupProps['overlayInnerClassName'] = [\n          {\n            [`${COMPONENT_NAME.value}__popup--content`]: !!content,\n          },\n        ];\n\n        return (\n          <Popup\n            ref={popupTooltipRef}\n            visible={popupVisible.value}\n            show-arrow={!content}\n            zIndex={zIndex.value}\n            placement={currentStepInfo.value.placement as any}\n            {...currentStepInfo.value.popupProps}\n            content={renderBody}\n            overlayClassName={[`${COMPONENT_NAME.value}__popup`, currentStepInfo.value.stepOverlayClass]}\n            overlayInnerClassName={innerClassName.concat(currentStepInfo.value.popupProps?.overlayInnerClassName)}\n          >\n            <div ref={referenceLayerRef} class={classes} />\n          </Popup>\n        );\n      };\n\n      const renderDialogGuide = () => {\n        const style = { zIndex: zIndex.value };\n        const wrapperClasses = [\n          `${COMPONENT_NAME.value}__wrapper`,\n          { [`${COMPONENT_NAME.value}__wrapper--center`]: currentStepInfo.value.placement === 'center' },\n        ];\n        const dialogClasses = [\n          `${COMPONENT_NAME.value}__reference`,\n          `${COMPONENT_NAME.value}--absolute`,\n          `${COMPONENT_NAME.value}__dialog`,\n          {\n            [`${COMPONENT_NAME.value}__dialog--nomask`]: !getCurrentCrossProps('showOverlay'),\n            [currentStepInfo.value.stepOverlayClass]: !!currentStepInfo.value.stepOverlayClass,\n          },\n        ];\n        const footerClasses = [`${COMPONENT_NAME.value}__footer`, `${COMPONENT_NAME.value}__footer--popup`];\n        return (\n          <>\n            <div ref={dialogWrapperRef} class={wrapperClasses} style={style}>\n              <div ref={dialogTooltipRef} class={dialogClasses}>\n                {renderTooltipBody()}\n                <div class={footerClasses}>\n                  {renderCounter()}\n                  {renderAction('dialog')}\n                </div>\n              </div>\n            </div>\n          </>\n        );\n      };\n\n      const renderGuide = () => {\n        return (\n          <>\n            <Teleport to=\"body\">\n              {renderOverlayLayer()}\n              {renderHighlightLayer()}\n              {isPopup.value ? renderPopupGuide() : renderDialogGuide()}\n            </Teleport>\n          </>\n        );\n      };\n\n      return <>{actived.value && renderGuide()}</>;\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}