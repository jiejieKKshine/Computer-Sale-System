{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, toRefs, ref, computed, onMounted, createVNode, mergeProps, h, getCurrentInstance } from 'vue';\nimport { g as get_1 } from '../_chunks/dep-ae202bc0.mjs';\nimport { o as omit_1 } from '../_chunks/dep-88ae49da.mjs';\nimport baseTableProps from './base-table-props.mjs';\nimport primaryTableProps from './primary-table-props.mjs';\nimport _BaseTable from './base-table.mjs';\nexport { BASE_TABLE_ALL_EVENTS } from './base-table.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport useColumnController from './hooks/useColumnController.mjs';\nimport useRowExpand from './hooks/useRowExpand.mjs';\nimport useTableHeader, { renderTitle } from './hooks/useTableHeader.mjs';\nimport useRowSelect from './hooks/useRowSelect.mjs';\nimport useSorter from './hooks/useSorter.mjs';\nimport useFilter from './hooks/useFilter.mjs';\nimport useDragSort from './hooks/useDragSort.mjs';\nimport useAsyncLoading from './hooks/useAsyncLoading.mjs';\nimport EditableCell from './editable-cell.mjs';\nimport useClassName from './hooks/useClassName.mjs';\nimport '../hooks/useConfig.mjs';\nimport useRowEdit from './hooks/useEditableRow.mjs';\nimport useStyle from './hooks/useStyle.mjs';\nimport { useConfig } from '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-aeaef131.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-88c8d9ed.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-4ec29b23.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-5efe53d1.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-4de7e2ca.mjs';\nimport '../_chunks/dep-0e581ac0.mjs';\nimport '../_chunks/dep-69e0f6fc.mjs';\nimport './hooks/useColumnResize.mjs';\nimport '../_chunks/dep-889e457b.mjs';\nimport '../utils/dom.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../utils/easing.mjs';\nimport './hooks/useFixed.mjs';\nimport '../_chunks/dep-5993931e.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-6a7115de.mjs';\nimport '../_chunks/dep-4d4e2af1.mjs';\nimport '../_chunks/dep-3c4e4325.mjs';\nimport '../_chunks/dep-fbd4eddb.mjs';\nimport '../_common/js/log/index.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../_common/js/utils/getScrollbarWidth.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-4a990ea3.mjs';\nimport '../_chunks/dep-5d3f7c0e.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport './hooks/usePagination.mjs';\nimport '../pagination/index.mjs';\nimport '../pagination/pagination.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../hooks/useGlobalIcon.mjs';\nimport '../input-number/index.mjs';\nimport '../input-number/input-number.mjs';\nimport '../button/index.mjs';\nimport '../button/button.mjs';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-bff7e93a.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../_chunks/dep-0b414bea.mjs';\nimport '../_chunks/dep-ea20409b.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../loading/props.mjs';\nimport '../hooks/useTeleport.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../loading/type.mjs';\nimport '../button/props.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useDisabled.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../button/type.mjs';\nimport '../input/index.mjs';\nimport '../input/input.mjs';\nimport '../input/props.mjs';\nimport '../hooks/useReadonly.mjs';\nimport '../input/useInput.mjs';\nimport '../form/const.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/slot.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useVModel.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../input/useLengthLimit.mjs';\nimport '../input/useInputEventHandler.mjs';\nimport '../input/useInputWidth.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../input/input-group.mjs';\nimport '../input/input-group-props.mjs';\nimport '../input/type.mjs';\nimport '../input-number/props.mjs';\nimport '../input-number/hooks/useInputNumber.mjs';\nimport '../_common/js/input-number/number.mjs';\nimport '../_common/js/input-number/large-number.mjs';\nimport '../input-number/type.mjs';\nimport '../select/index.mjs';\nimport '../select/select.mjs';\nimport '../_chunks/dep-0d047dce.mjs';\nimport '../_chunks/dep-64c2053b.mjs';\nimport '../common-components/fake-arrow.mjs';\nimport '../select-input/index.mjs';\nimport '../select-input/select-input.mjs';\nimport '../popup/index.mjs';\nimport '../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../popup/container.mjs';\nimport '../popup/props.mjs';\nimport '../popup/type.mjs';\nimport '../select-input/props.mjs';\nimport '../select-input/useSingle.mjs';\nimport '../select-input/useMultiple.mjs';\nimport '../tag-input/index.mjs';\nimport '../tag-input/tag-input.mjs';\nimport '../tag-input/props.mjs';\nimport '../tag-input/hooks/useTagScroll.mjs';\nimport '../tag-input/useTagList.mjs';\nimport '../tag/index.mjs';\nimport '../tag/tag.mjs';\nimport '../_chunks/dep-9ac991f3.mjs';\nimport '../tag/props.mjs';\nimport '../tag/check-tag.mjs';\nimport '../tag/check-tag-props.mjs';\nimport '../_common/js/common.mjs';\nimport '../tag/check-tag-group.mjs';\nimport '../tag/check-tag-group-props.mjs';\nimport '../tag/type.mjs';\nimport '../tag-input/hooks/useHover.mjs';\nimport '../tag-input/hooks/useDragSorter.mjs';\nimport '../tag-input/type.mjs';\nimport '../select-input/useOverlayInnerStyle.mjs';\nimport '../select-input/type.mjs';\nimport '../select/select-panel.mjs';\nimport '../select/option.mjs';\nimport '../select/option-props.mjs';\nimport '../checkbox/index.mjs';\nimport '../checkbox/checkbox.mjs';\nimport '../checkbox/props.mjs';\nimport '../checkbox/constants.mjs';\nimport '../checkbox/hooks/useCheckboxLazyLoad.mjs';\nimport '../_common/js/utils/observe.mjs';\nimport '../checkbox/hooks/useKeyboardEvent.mjs';\nimport '../checkbox/group.mjs';\nimport '../checkbox/checkbox-group-props.mjs';\nimport '../checkbox/type.mjs';\nimport '../select/helper.mjs';\nimport '../select/optionGroup.mjs';\nimport '../select/option-group-props.mjs';\nimport '../select/props.mjs';\nimport '../select/hooks/usePanelVirtualScroll.mjs';\nimport '../select/hooks/useSelectOptions.mjs';\nimport '../select/hooks/useKeyboardControl.mjs';\nimport '../select/type.mjs';\nimport '../input-adornment/index.mjs';\nimport '../input-adornment/input-adornment.mjs';\nimport '../input-adornment/props.mjs';\nimport '../input-adornment/type.mjs';\nimport '../pagination/props.mjs';\nimport '../pagination/usePaginationClasses.mjs';\nimport '../pagination/useMoreAction.mjs';\nimport '../pagination/pagination-mini.mjs';\nimport '../pagination/pagination-mini-props.mjs';\nimport '../pagination/type.mjs';\nimport '../hooks/useVirtualScrollNew.mjs';\nimport '../_chunks/dep-525a54df.mjs';\nimport './hooks/useAffix.mjs';\nimport './tbody.mjs';\nimport './tr.mjs';\nimport './utils.mjs';\nimport './ellipsis.mjs';\nimport '../tooltip/index.mjs';\nimport '../tooltip/tooltip.mjs';\nimport '../tooltip/props.mjs';\nimport '../tooltip/util.mjs';\nimport '../tooltip/type.mjs';\nimport './hooks/useLazyLoad.mjs';\nimport './hooks/useRowspanAndColspan.mjs';\nimport '../affix/index.mjs';\nimport '../affix/affix.mjs';\nimport '../affix/props.mjs';\nimport '../affix/type.mjs';\nimport './thead.mjs';\nimport './tfoot.mjs';\nimport './hooks/useRowHighlight.mjs';\nimport './hooks/useHoverKeyboardEvent.mjs';\nimport '../hooks/useElementLazyRender.mjs';\nimport './hooks/useMultiHeader.mjs';\nimport '../dialog/plugin.mjs';\nimport '../dialog/dialog.mjs';\nimport '../dialog/props.mjs';\nimport '../dialog/hooks.mjs';\nimport '../hooks/usePopupManager.mjs';\nimport '../_chunks/dep-f909a041.mjs';\nimport './column-checkbox-group.mjs';\nimport '../_common/js/table/utils.mjs';\nimport '../radio/index.mjs';\nimport '../radio/radio.mjs';\nimport '../utils/helper.mjs';\nimport '../radio/props.mjs';\nimport '../radio/constants.mjs';\nimport '../radio/group.mjs';\nimport '../_chunks/dep-d2f4e062.mjs';\nimport '../radio/radio-group-props.mjs';\nimport '../radio/useKeyboard.mjs';\nimport '../watermark/hooks.mjs';\nimport '../radio/radio-button.mjs';\nimport '../radio/type.mjs';\nimport './sorter-button.mjs';\nimport './filter-controller.mjs';\nimport 'sortablejs';\nimport '../_common/js/utils/swapDragArrayElement.mjs';\nimport '../_chunks/dep-b874078b.mjs';\nimport '../_chunks/dep-ed41e004.mjs';\nimport '../form/form-model.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar OMIT_PROPS = [\"hideSortTips\", \"dragSort\", \"defaultExpandedRowKeys\", \"defaultSelectedRowKeys\", \"columnController\", \"filterRow\", \"sortOnRowDraggable\", \"expandOnRowClick\", \"expand-on-row-click\", \"expanded-row\", \"editable-row-keys\", \"editable-cell-state\", \"filter-value\", \"multipleSort\", \"expandIcon\", \"expand-icon\", \"reserveSelectedRowOnPaginate\", \"expandedRowKeys\", \"expandedRow\", \"reserve-selected-row-on-paginate\", \"reserveSelectedRowOnPaginate\", \"selected-row-keys\", \"selectedRowKeys\", \"selectOnRowClick\", \"column-controller\", \"columnController\", \"dragSort\", \"drag-sort\", \"hideSortTips\", \"showSortColumnBgColor\", \"filter-row\", \"filterRow\", \"multiple-sort\", \"multipleSort\", \"async-loading\", \"onChange\", \"onAsyncLoadingClick\", \"onColumnChange\", \"onColumnControllerVisibleChange\", \"onDataChange\", \"onDisplayColumnsChange\", \"onDragSort\", \"onExpandChange\", \"onFilterChange\", \"onSelectChange\", \"onSortChange\"];\nvar _PrimaryTable = defineComponent({\n  name: \"TPrimaryTable\",\n  props: _objectSpread(_objectSpread({}, baseTableProps), primaryTableProps),\n  setup: function setup(props, context) {\n    var renderTNode = useTNodeJSX();\n    var _toRefs = toRefs(props),\n      columns = _toRefs.columns,\n      columnController = _toRefs.columnController;\n    var primaryTableRef = ref(null);\n    var showElement = ref(false);\n    var _useClassName = useClassName(),\n      classPrefix = _useClassName.classPrefix,\n      tableDraggableClasses = _useClassName.tableDraggableClasses,\n      tableBaseClass = _useClassName.tableBaseClass,\n      tableSelectedClasses = _useClassName.tableSelectedClasses,\n      tableSortClasses = _useClassName.tableSortClasses;\n    var _useConfig = useConfig(\"table\", props.locale),\n      globalConfig = _useConfig.globalConfig;\n    var _useStyle = useStyle(props),\n      sizeClassNames = _useStyle.sizeClassNames;\n    var tableSize = computed(function () {\n      var _props$size;\n      return (_props$size = props.size) !== null && _props$size !== void 0 ? _props$size : globalConfig.value.size;\n    });\n    var _useColumnController = useColumnController(props, context),\n      tDisplayColumns = _useColumnController.tDisplayColumns,\n      renderColumnController = _useColumnController.renderColumnController;\n    var _useRowExpand = useRowExpand(props, context),\n      showExpandedRow = _useRowExpand.showExpandedRow,\n      showExpandIconColumn = _useRowExpand.showExpandIconColumn,\n      getExpandColumn = _useRowExpand.getExpandColumn,\n      renderExpandedRow = _useRowExpand.renderExpandedRow,\n      onInnerExpandRowClick = _useRowExpand.onInnerExpandRowClick,\n      getExpandedRowClass = _useRowExpand.getExpandedRowClass;\n    var _useSorter = useSorter(props, context),\n      renderSortIcon = _useSorter.renderSortIcon;\n    var _useRowSelect = useRowSelect(props, tableSelectedClasses),\n      selectColumn = _useRowSelect.selectColumn,\n      showRowSelect = _useRowSelect.showRowSelect,\n      selectedRowClassNames = _useRowSelect.selectedRowClassNames,\n      currentPaginateData = _useRowSelect.currentPaginateData,\n      formatToRowSelectColumn = _useRowSelect.formatToRowSelectColumn,\n      setTSelectedRowKeys = _useRowSelect.setTSelectedRowKeys,\n      onInnerSelectRowClick = _useRowSelect.onInnerSelectRowClick,\n      handleRowSelectWithAreaSelection = _useRowSelect.handleRowSelectWithAreaSelection;\n    var _useFilter = useFilter(props, context),\n      hasEmptyCondition = _useFilter.hasEmptyCondition,\n      isTableOverflowHidden = _useFilter.isTableOverflowHidden,\n      renderFilterIcon = _useFilter.renderFilterIcon,\n      renderFirstFilterRow = _useFilter.renderFirstFilterRow,\n      setFilterPrimaryTableRef = _useFilter.setFilterPrimaryTableRef;\n    var dragSortParams = computed(function () {\n      return {\n        showElement: showElement.value\n      };\n    });\n    var _useDragSort = useDragSort(props, context, dragSortParams),\n      isRowHandlerDraggable = _useDragSort.isRowHandlerDraggable,\n      isRowDraggable = _useDragSort.isRowDraggable,\n      isColDraggable = _useDragSort.isColDraggable,\n      innerPagination = _useDragSort.innerPagination,\n      setDragSortPrimaryTableRef = _useDragSort.setDragSortPrimaryTableRef,\n      setDragSortColumns = _useDragSort.setDragSortColumns;\n    var _useTableHeader = useTableHeader(props),\n      renderTitleWidthIcon = _useTableHeader.renderTitleWidthIcon;\n    var _useAsyncLoading = useAsyncLoading(props),\n      renderAsyncLoading = _useAsyncLoading.renderAsyncLoading;\n    var _useEditableRow = useRowEdit(props),\n      errorListMap = _useEditableRow.errorListMap,\n      editableKeysMap = _useEditableRow.editableKeysMap,\n      validateRowData = _useEditableRow.validateRowData,\n      validateTableData = _useEditableRow.validateTableData,\n      onRuleChange = _useEditableRow.onRuleChange,\n      clearValidateData = _useEditableRow.clearValidateData,\n      onUpdateEditedCell = _useEditableRow.onUpdateEditedCell,\n      onPrimaryTableCellEditChange = _useEditableRow.onPrimaryTableCellEditChange;\n    var innerKeyboardRowHover = computed(function () {\n      return Boolean(showExpandedRow.value || showRowSelect.value);\n    });\n    var innerDisableSpaceInactiveRow = computed(function () {\n      return Boolean(showExpandedRow.value || showRowSelect.value);\n    });\n    var primaryTableClasses = computed(function () {\n      var _selectColumn$value;\n      return _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, tableDraggableClasses.colDraggable, isColDraggable.value), tableDraggableClasses.rowHandlerDraggable, isRowHandlerDraggable.value), tableDraggableClasses.rowDraggable, isRowDraggable.value), tableBaseClass.overflowVisible, isTableOverflowHidden.value === false), tableBaseClass.tableRowEdit, props.editableRowKeys), \"\".concat(classPrefix, \"-table--select-\").concat((_selectColumn$value = selectColumn.value) === null || _selectColumn$value === void 0 ? void 0 : _selectColumn$value.type), selectColumn.value), \"\".concat(classPrefix, \"-table--row-select\"), showRowSelect.value), \"\".concat(classPrefix, \"-table--row-expandable\"), showExpandedRow.value);\n    });\n    var tRowClassNames = computed(function () {\n      var tClassNames = [props.rowClassName, selectedRowClassNames.value, getExpandedRowClass];\n      return tClassNames.filter(function (v) {\n        return v;\n      });\n    });\n    var tRowAttributes = computed(function () {\n      var tAttributes = [props.rowAttributes];\n      if (isRowHandlerDraggable.value || isRowDraggable.value) {\n        tAttributes.push(function (_ref2) {\n          var row = _ref2.row;\n          return {\n            \"data-id\": get_1(row, props.rowKey || \"id\")\n          };\n        });\n      }\n      return tAttributes.filter(function (v) {\n        return v;\n      });\n    });\n    onMounted(function () {\n      setFilterPrimaryTableRef(primaryTableRef.value);\n      setDragSortPrimaryTableRef(primaryTableRef.value);\n    });\n    context.expose({\n      validateRowData: validateRowData,\n      validateTableData: validateTableData,\n      clearValidateData: clearValidateData,\n      refreshTable: function refreshTable() {\n        primaryTableRef.value.refreshTable();\n      },\n      scrollToElement: function scrollToElement(data) {\n        primaryTableRef.value.scrollToElement(data);\n      },\n      scrollColumnIntoView: function scrollColumnIntoView(colKey) {\n        primaryTableRef.value.scrollColumnIntoView(colKey);\n      },\n      baseTableRef: primaryTableRef\n    });\n    var onEditableCellChange = function onEditableCellChange(params) {\n      var _props$onRowEdit;\n      (_props$onRowEdit = props.onRowEdit) === null || _props$onRowEdit === void 0 || _props$onRowEdit.call(props, params);\n      var rowValue = get_1(params.editedRow, props.rowKey || \"id\");\n      onUpdateEditedCell(rowValue, params.row, _defineProperty({}, params.col.colKey, params.value));\n    };\n    var _getColumns = function getColumns(columns2) {\n      var parentDisplay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var arr = [];\n      var _loop = function _loop() {\n        var _item$children, _tDisplayColumns$valu, _item$edit, _item$children2, _item$children3;\n        var item = _objectSpread({}, columns2[i]);\n        var isDisplayColumn = ((_item$children = item.children) === null || _item$children === void 0 ? void 0 : _item$children.length) || ((_tDisplayColumns$valu = tDisplayColumns.value) === null || _tDisplayColumns$valu === void 0 ? void 0 : _tDisplayColumns$valu.includes(item.colKey));\n        if (!isDisplayColumn && (props.columnController || props.displayColumns || props.defaultDisplayColumns) && !parentDisplay) return 1; // continue\n        item = formatToRowSelectColumn(item);\n        var sort = props.sort;\n        if (item.sorter && props.showSortColumnBgColor) {\n          var sorts = sort instanceof Array ? sort : [sort];\n          var sortedColumn = sorts.find(function (sort2) {\n            return sort2 && sort2.sortBy === item.colKey && sort2.descending !== void 0;\n          });\n          if (sortedColumn) {\n            item.className = item.className instanceof Array ? item.className.concat(tableSortClasses.sortColumn) : [item.className, tableSortClasses.sortColumn];\n          }\n        }\n        if (item.sorter || item.filter) {\n          var titleContent = renderTitle(context.slots, item, i);\n          var _item = item,\n            ellipsisTitle = _item.ellipsisTitle;\n          item.title = function (h2, p) {\n            var _primaryTableRef$valu;\n            var sortIcon = item.sorter ? renderSortIcon(p) : null;\n            var filterIcon = item.filter ? renderFilterIcon(p) : null;\n            var attach = (_primaryTableRef$valu = primaryTableRef.value) === null || _primaryTableRef$valu === void 0 ? void 0 : _primaryTableRef$valu.tableContentRef;\n            return renderTitleWidthIcon([titleContent, sortIcon, filterIcon], p.col, p.colIndex, ellipsisTitle, attach, {\n              classPrefix: classPrefix,\n              ellipsisOverlayClassName: tableSize.value !== \"medium\" ? sizeClassNames[tableSize.value] : \"\"\n            });\n          };\n          item.ellipsisTitle = false;\n        }\n        if ((_item$edit = item.edit) !== null && _item$edit !== void 0 && _item$edit.component) {\n          var oldCell = item.cell;\n          item.cell = function (h2, p) {\n            var cellProps = _objectSpread(_objectSpread({}, p), {}, {\n              oldCell: oldCell,\n              rowKey: props.rowKey || \"id\",\n              tableBaseClass: tableBaseClass,\n              cellEmptyContent: props.cellEmptyContent,\n              onChange: props.onRowEdit,\n              onValidate: props.onRowValidate,\n              onRuleChange: onRuleChange,\n              onEditableChange: onPrimaryTableCellEditChange\n            });\n            if (props.editableRowKeys) {\n              var _errorListMap$value;\n              var rowValue = get_1(p.row, props.rowKey || \"id\");\n              cellProps.editable = editableKeysMap.value[rowValue] || false;\n              var key = [rowValue, p.col.colKey].join(\"__\");\n              var errorList = (_errorListMap$value = errorListMap.value) === null || _errorListMap$value === void 0 ? void 0 : _errorListMap$value[key];\n              errorList && (cellProps.errors = errorList);\n            }\n            if (props.editableCellState) {\n              cellProps.readonly = !props.editableCellState(p);\n            }\n            return createVNode(EditableCell, mergeProps(cellProps, {\n              \"onUpdateEditedCell\": onUpdateEditedCell\n            }), context.slots);\n          };\n        }\n        if ((_item$children2 = item.children) !== null && _item$children2 !== void 0 && _item$children2.length) {\n          var _tDisplayColumns$valu2;\n          item.children = _getColumns(item.children, parentDisplay || ((_tDisplayColumns$valu2 = tDisplayColumns.value) === null || _tDisplayColumns$valu2 === void 0 ? void 0 : _tDisplayColumns$valu2.includes(item.colKey)));\n        }\n        if (!item.children || (_item$children3 = item.children) !== null && _item$children3 !== void 0 && _item$children3.length) {\n          arr.push(item);\n        }\n      };\n      for (var i = 0, len = columns2.length; i < len; i++) {\n        if (_loop()) continue;\n      }\n      return arr;\n    };\n    var tColumns = computed(function () {\n      var cols = _getColumns(columns.value);\n      if (showExpandIconColumn.value) {\n        cols.unshift(getExpandColumn());\n      }\n      return cols;\n    });\n    var onInnerPageChange = function onInnerPageChange(pageInfo, newData) {\n      var _props$onPageChange, _props$onChange;\n      innerPagination.value = _objectSpread(_objectSpread({}, innerPagination.value), pageInfo);\n      currentPaginateData.value = newData;\n      (_props$onPageChange = props.onPageChange) === null || _props$onPageChange === void 0 || _props$onPageChange.call(props, pageInfo, newData);\n      var changeParams = [{\n        pagination: pageInfo\n      }, {\n        trigger: \"pagination\",\n        currentData: newData\n      }];\n      (_props$onChange = props.onChange) === null || _props$onChange === void 0 || _props$onChange.call.apply(_props$onChange, [props].concat(changeParams));\n      if (!props.reserveSelectedRowOnPaginate) {\n        setTSelectedRowKeys([], {\n          selectedRowData: [],\n          type: \"uncheck\",\n          currentRowKey: \"CLEAR_ON_PAGINATE\"\n        });\n      }\n    };\n    var onInnerActiveRowAction = function onInnerActiveRowAction(params) {\n      var _props$onActiveRowAct;\n      (_props$onActiveRowAct = props.onActiveRowAction) === null || _props$onActiveRowAct === void 0 || _props$onActiveRowAct.call(props, params);\n      handleRowSelectWithAreaSelection(params);\n    };\n    var onSingleRowClick = function onSingleRowClick(params) {\n      if (props.expandOnRowClick) {\n        onInnerExpandRowClick(params);\n      }\n      if (props.selectOnRowClick) {\n        onInnerSelectRowClick(params);\n      }\n    };\n    var timer;\n    var DURATION = 250;\n    var onInnerRowClick = function onInnerRowClick(params) {\n      if (!props.onRowDblclick) {\n        onSingleRowClick(params);\n        return;\n      }\n      if (timer) {\n        clearTimeout(timer);\n        timer = void 0;\n      } else {\n        timer = setTimeout(function () {\n          onSingleRowClick(params);\n          timer = void 0;\n        }, DURATION);\n      }\n    };\n    var onShowElementChange = function onShowElementChange(val) {\n      showElement.value = val;\n    };\n    return function () {\n      var _props$keyboardRowHov, _props$disableSpaceIn;\n      var formatNode = function formatNode(api, renderInnerNode, condition, extra) {\n        if (!condition) return props[api];\n        var innerNode = renderInnerNode(h);\n        var propsNode = renderTNode(api);\n        if (innerNode && !propsNode) return function () {\n          return innerNode;\n        };\n        if (propsNode && !innerNode) return function () {\n          return propsNode;\n        };\n        if (innerNode && propsNode) {\n          return function () {\n            return extra !== null && extra !== void 0 && extra.reverse ? createVNode(\"div\", null, [innerNode, propsNode]) : createVNode(\"div\", null, [propsNode, innerNode]);\n          };\n        }\n        return null;\n      };\n      var isColumnController = !!(columnController.value && Object.keys(columnController.value).length);\n      var placement = isColumnController ? columnController.value.placement || \"top-right\" : \"\";\n      var isBottomController = isColumnController && (placement === null || placement === void 0 ? void 0 : placement.indexOf(\"bottom\")) !== -1;\n      var topContent = formatNode(\"topContent\", renderColumnController, isColumnController && !isBottomController);\n      var bottomContent = formatNode(\"bottomContent\", renderColumnController, isBottomController, {\n        reverse: true\n      });\n      var firstFullRow = formatNode(\"firstFullRow\", renderFirstFilterRow, !hasEmptyCondition.value);\n      var lastFullRow = formatNode(\"lastFullRow\", renderAsyncLoading, !!props.asyncLoading);\n      var _getCurrentInstance = getCurrentInstance(),\n        vnode = _getCurrentInstance.vnode;\n      var baseTableProps2 = _objectSpread(_objectSpread({}, omit_1(vnode.props, OMIT_PROPS)), {}, {\n        rowKey: props.rowKey,\n        rowClassName: tRowClassNames.value,\n        rowAttributes: tRowAttributes.value,\n        columns: tColumns.value,\n        keyboardRowHover: (_props$keyboardRowHov = props.keyboardRowHover) !== null && _props$keyboardRowHov !== void 0 ? _props$keyboardRowHov : innerKeyboardRowHover.value,\n        disableSpaceInactiveRow: (_props$disableSpaceIn = props.disableSpaceInactiveRow) !== null && _props$disableSpaceIn !== void 0 ? _props$disableSpaceIn : innerDisableSpaceInactiveRow.value,\n        topContent: topContent,\n        bottomContent: bottomContent,\n        firstFullRow: firstFullRow,\n        lastFullRow: lastFullRow,\n        thDraggable: [\"col\", \"row-handler-col\"].includes(props.dragSort),\n        onShowElementChange: onShowElementChange,\n        onPageChange: onInnerPageChange,\n        renderExpandedRow: showExpandedRow.value ? renderExpandedRow : void 0,\n        onActiveRowAction: onInnerActiveRowAction\n      });\n      if (props.expandOnRowClick || props.selectOnRowClick) {\n        baseTableProps2.onRowClick = onInnerRowClick;\n      }\n      return createVNode(_BaseTable, mergeProps(baseTableProps2, {\n        \"ref\": primaryTableRef,\n        \"class\": primaryTableClasses.value,\n        \"onLeafColumnsChange\": setDragSortColumns\n      }), context.slots);\n    };\n  }\n});\nexport { _PrimaryTable as default };","map":{"version":3,"names":["OMIT_PROPS","_PrimaryTable","defineComponent","name","props","_objectSpread","baseTableProps","primaryTableProps","setup","context","renderTNode","useTNodeJSX","_toRefs","toRefs","columns","columnController","primaryTableRef","ref","showElement","_useClassName","useClassName","classPrefix","tableDraggableClasses","tableBaseClass","tableSelectedClasses","tableSortClasses","_useConfig","useConfig","locale","globalConfig","_useStyle","useStyle","sizeClassNames","tableSize","computed","_props$size","size","value","_useColumnController","useColumnController","tDisplayColumns","renderColumnController","_useRowExpand","useRowExpand","showExpandedRow","showExpandIconColumn","getExpandColumn","renderExpandedRow","onInnerExpandRowClick","getExpandedRowClass","_useSorter","useSorter","renderSortIcon","_useRowSelect","useRowSelect","selectColumn","showRowSelect","selectedRowClassNames","currentPaginateData","formatToRowSelectColumn","setTSelectedRowKeys","onInnerSelectRowClick","handleRowSelectWithAreaSelection","_useFilter","useFilter","hasEmptyCondition","isTableOverflowHidden","renderFilterIcon","renderFirstFilterRow","setFilterPrimaryTableRef","dragSortParams","_useDragSort","useDragSort","isRowHandlerDraggable","isRowDraggable","isColDraggable","innerPagination","setDragSortPrimaryTableRef","setDragSortColumns","_useTableHeader","useTableHeader","renderTitleWidthIcon","_useAsyncLoading","useAsyncLoading","renderAsyncLoading","_useEditableRow","useRowEdit","errorListMap","editableKeysMap","validateRowData","validateTableData","onRuleChange","clearValidateData","onUpdateEditedCell","onPrimaryTableCellEditChange","innerKeyboardRowHover","Boolean","innerDisableSpaceInactiveRow","primaryTableClasses","_selectColumn$value","_defineProperty","colDraggable","rowHandlerDraggable","rowDraggable","overflowVisible","tableRowEdit","editableRowKeys","concat","type","tRowClassNames","tClassNames","rowClassName","filter","v","tRowAttributes","tAttributes","rowAttributes","push","_ref2","row","get_1","rowKey","onMounted","expose","refreshTable","scrollToElement","data","scrollColumnIntoView","colKey","baseTableRef","onEditableCellChange","params","_props$onRowEdit","onRowEdit","call","rowValue","editedRow","col","_getColumns","getColumns","columns2","parentDisplay","arguments","length","undefined","arr","_loop","_item$children","_tDisplayColumns$valu","_item$edit","_item$children2","_item$children3","item","i","isDisplayColumn","children","includes","displayColumns","defaultDisplayColumns","sort","sorter","showSortColumnBgColor","sorts","Array","sortedColumn","find","sort2","sortBy","descending","className","sortColumn","titleContent","renderTitle","slots","_item","ellipsisTitle","title","h2","p","_primaryTableRef$valu","sortIcon","filterIcon","attach","tableContentRef","colIndex","ellipsisOverlayClassName","edit","component","oldCell","cell","cellProps","cellEmptyContent","onChange","onValidate","onRowValidate","onEditableChange","_errorListMap$value","editable","key","join","errorList","errors","editableCellState","readonly","createVNode","EditableCell","mergeProps","_tDisplayColumns$valu2","len","tColumns","cols","unshift","onInnerPageChange","pageInfo","newData","_props$onPageChange","_props$onChange","onPageChange","changeParams","pagination","trigger","currentData","apply","reserveSelectedRowOnPaginate","selectedRowData","currentRowKey","onInnerActiveRowAction","_props$onActiveRowAct","onActiveRowAction","onSingleRowClick","expandOnRowClick","selectOnRowClick","timer","DURATION","onInnerRowClick","onRowDblclick","clearTimeout","setTimeout","onShowElementChange","val","_props$keyboardRowHov","_props$disableSpaceIn","formatNode","api","renderInnerNode","condition","extra","innerNode","h","propsNode","reverse","isColumnController","Object","keys","placement","isBottomController","indexOf","topContent","bottomContent","firstFullRow","lastFullRow","asyncLoading","_getCurrentInstance","getCurrentInstance","vnode","baseTableProps2","omit_1","keyboardRowHover","disableSpaceInactiveRow","thDraggable","dragSort","onRowClick","_BaseTable"],"sources":["../../src/table/primary-table.tsx"],"sourcesContent":["import { computed, defineComponent, toRefs, h, ref, onMounted, getCurrentInstance } from 'vue';\nimport get from 'lodash/get';\nimport omit from 'lodash/omit';\nimport baseTableProps from './base-table-props';\nimport primaryTableProps from './primary-table-props';\nimport BaseTable from './base-table';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport useColumnController from './hooks/useColumnController';\nimport useRowExpand from './hooks/useRowExpand';\nimport useTableHeader, { renderTitle } from './hooks/useTableHeader';\nimport useRowSelect from './hooks/useRowSelect';\nimport { TdPrimaryTableProps, PrimaryTableCol, TableRowData, PrimaryTableCellParams } from './type';\nimport useSorter from './hooks/useSorter';\nimport useFilter from './hooks/useFilter';\nimport useDragSort from './hooks/useDragSort';\nimport useAsyncLoading from './hooks/useAsyncLoading';\nimport EditableCell, { EditableCellProps } from './editable-cell';\nimport { PageInfo } from '../pagination';\nimport useClassName from './hooks/useClassName';\nimport { useConfig } from '../hooks/useConfig';\nimport useEditableRow from './hooks/useEditableRow';\nimport useStyle from './hooks/useStyle';\nimport { ScrollToElementParams } from '../hooks/useVirtualScrollNew';\nimport { BaseTableProps } from './interface';\n\nexport { BASE_TABLE_ALL_EVENTS } from './base-table';\n\nconst OMIT_PROPS = [\n  'hideSortTips',\n  'dragSort',\n  'defaultExpandedRowKeys',\n  'defaultSelectedRowKeys',\n  'columnController',\n  'filterRow',\n  'sortOnRowDraggable',\n  'expandOnRowClick',\n  'expand-on-row-click',\n  'expanded-row',\n  'editable-row-keys',\n  'editable-cell-state',\n  'filter-value',\n  'multipleSort',\n  'expandIcon',\n  'expand-icon',\n  'reserveSelectedRowOnPaginate',\n  'expandedRowKeys',\n  'expandedRow',\n  'reserve-selected-row-on-paginate',\n  'reserveSelectedRowOnPaginate',\n  'selected-row-keys',\n  'selectedRowKeys',\n  'selectOnRowClick',\n  'column-controller',\n  'columnController',\n  'dragSort',\n  'drag-sort',\n  'hideSortTips',\n  'showSortColumnBgColor',\n  'filter-row',\n  'filterRow',\n  'multiple-sort',\n  'multipleSort',\n  'async-loading',\n  'onChange',\n  'onAsyncLoadingClick',\n  'onColumnChange',\n  'onColumnControllerVisibleChange',\n  'onDataChange',\n  'onDisplayColumnsChange',\n  'onDragSort',\n  'onExpandChange',\n  'onFilterChange',\n  'onSelectChange',\n  'onSortChange',\n];\n\nexport default defineComponent({\n  name: 'TPrimaryTable',\n\n  props: {\n    ...baseTableProps,\n    ...primaryTableProps,\n  },\n\n  setup(props, context) {\n    const renderTNode = useTNodeJSX();\n    const { columns, columnController } = toRefs(props);\n    const primaryTableRef = ref(null);\n    const showElement = ref(false);\n\n    const { classPrefix, tableDraggableClasses, tableBaseClass, tableSelectedClasses, tableSortClasses } =\n      useClassName();\n    const { globalConfig } = useConfig('table', props.locale);\n    const { sizeClassNames } = useStyle(props);\n    const tableSize = computed(() => props.size ?? globalConfig.value.size);\n    // 自定义列配置功能\n    const { tDisplayColumns, renderColumnController } = useColumnController(props, context);\n\n    // 展开/收起行功能\n    const {\n      showExpandedRow,\n      showExpandIconColumn,\n      getExpandColumn,\n      renderExpandedRow,\n      onInnerExpandRowClick,\n      getExpandedRowClass,\n    } = useRowExpand(props, context);\n\n    // 排序功能\n    const { renderSortIcon } = useSorter(props, context);\n\n    // 行选中功能\n    const {\n      selectColumn,\n      showRowSelect,\n      selectedRowClassNames,\n      currentPaginateData,\n      formatToRowSelectColumn,\n      setTSelectedRowKeys,\n      onInnerSelectRowClick,\n      handleRowSelectWithAreaSelection,\n    } = useRowSelect(props, tableSelectedClasses);\n\n    // 过滤功能\n    const {\n      hasEmptyCondition,\n      isTableOverflowHidden,\n      renderFilterIcon,\n      renderFirstFilterRow,\n      setFilterPrimaryTableRef,\n    } = useFilter(props, context);\n\n    // 拖拽排序功能\n    const dragSortParams = computed(() => ({\n      showElement: showElement.value,\n    }));\n    const {\n      isRowHandlerDraggable,\n      isRowDraggable,\n      isColDraggable,\n      innerPagination,\n      setDragSortPrimaryTableRef,\n      setDragSortColumns,\n    } = useDragSort(props, context, dragSortParams);\n\n    const { renderTitleWidthIcon } = useTableHeader(props);\n    const { renderAsyncLoading } = useAsyncLoading(props);\n\n    // 可编辑行\n    const {\n      errorListMap,\n      editableKeysMap,\n      validateRowData,\n      validateTableData,\n      onRuleChange,\n      clearValidateData,\n      onUpdateEditedCell,\n      // getEditRowData,\n      onPrimaryTableCellEditChange,\n    } = useEditableRow(props);\n\n    const innerKeyboardRowHover = computed(() => Boolean(showExpandedRow.value || showRowSelect.value));\n\n    const innerDisableSpaceInactiveRow = computed(() => Boolean(showExpandedRow.value || showRowSelect.value));\n\n    const primaryTableClasses = computed(() => {\n      return {\n        [tableDraggableClasses.colDraggable]: isColDraggable.value,\n        [tableDraggableClasses.rowHandlerDraggable]: isRowHandlerDraggable.value,\n        [tableDraggableClasses.rowDraggable]: isRowDraggable.value,\n        [tableBaseClass.overflowVisible]: isTableOverflowHidden.value === false,\n        [tableBaseClass.tableRowEdit]: props.editableRowKeys,\n        [`${classPrefix}-table--select-${selectColumn.value?.type}`]: selectColumn.value,\n        [`${classPrefix}-table--row-select`]: showRowSelect.value,\n        [`${classPrefix}-table--row-expandable`]: showExpandedRow.value,\n      };\n    });\n\n    // 如果想给 TR 添加类名，请在这里补充，不要透传更多额外 Props 到 BaseTable\n    const tRowClassNames = computed(() => {\n      const tClassNames = [props.rowClassName, selectedRowClassNames.value, getExpandedRowClass];\n      return tClassNames.filter((v) => v);\n    });\n\n    // 如果想给 TR 添加属性，请在这里补充，不要透传更多额外 Props 到 BaseTable\n    const tRowAttributes = computed(() => {\n      const tAttributes = [props.rowAttributes];\n      if (isRowHandlerDraggable.value || isRowDraggable.value) {\n        tAttributes.push(({ row }) => ({ 'data-id': get(row, props.rowKey || 'id') }));\n      }\n      return tAttributes.filter((v) => v);\n    });\n\n    // 多个 Hook 共用 primaryTableRef\n    onMounted(() => {\n      setFilterPrimaryTableRef(primaryTableRef.value);\n      setDragSortPrimaryTableRef(primaryTableRef.value);\n    });\n\n    // 对外暴露的方法\n    context.expose({\n      validateRowData,\n      validateTableData,\n      clearValidateData,\n      refreshTable: () => {\n        primaryTableRef.value.refreshTable();\n      },\n      scrollToElement: (data: ScrollToElementParams) => {\n        primaryTableRef.value.scrollToElement(data);\n      },\n      scrollColumnIntoView: (colKey: string) => {\n        primaryTableRef.value.scrollColumnIntoView(colKey);\n      },\n      // 暴露基础表格 ref 及相关方法\n      baseTableRef: primaryTableRef,\n    });\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const onEditableCellChange: EditableCellProps['onChange'] = (params) => {\n      props.onRowEdit?.(params);\n      const rowValue = get(params.editedRow, props.rowKey || 'id');\n      onUpdateEditedCell(rowValue, params.row, {\n        [params.col.colKey]: params.value,\n      });\n    };\n\n    // 1. 影响列数量的因素有：自定义列配置、展开/收起行、多级表头；2. 影响表头内容的因素有：排序图标、筛选图标\n    const getColumns = (columns: PrimaryTableCol<TableRowData>[], parentDisplay = false) => {\n      const arr: PrimaryTableCol<TableRowData>[] = [];\n      for (let i = 0, len = columns.length; i < len; i++) {\n        let item = { ...columns[i] };\n        // 自定义列显示控制\n        const isDisplayColumn = item.children?.length || tDisplayColumns.value?.includes(item.colKey);\n        if (\n          !isDisplayColumn &&\n          (props.columnController || props.displayColumns || props.defaultDisplayColumns) &&\n          !parentDisplay\n        )\n          continue;\n        item = formatToRowSelectColumn(item);\n        const { sort } = props;\n        if (item.sorter && props.showSortColumnBgColor) {\n          const sorts = sort instanceof Array ? sort : [sort];\n          const sortedColumn = sorts.find(\n            (sort) => sort && sort.sortBy === item.colKey && sort.descending !== undefined,\n          );\n          if (sortedColumn) {\n            item.className =\n              item.className instanceof Array\n                ? item.className.concat(tableSortClasses.sortColumn)\n                : [item.className, tableSortClasses.sortColumn];\n          }\n        }\n        // 添加排序图标和过滤图标\n        if (item.sorter || item.filter) {\n          const titleContent = renderTitle(context.slots, item, i);\n          const { ellipsisTitle } = item;\n          item.title = (h, p) => {\n            const sortIcon = item.sorter ? renderSortIcon(p) : null;\n            const filterIcon = item.filter ? renderFilterIcon(p) : null;\n            // @ts-ignore 注意：此处 Vue2 和 Vue3 有所不同\n            const attach = primaryTableRef.value?.tableContentRef;\n            return renderTitleWidthIcon(\n              [titleContent, sortIcon, filterIcon],\n              p.col,\n              p.colIndex,\n              ellipsisTitle,\n              attach,\n              {\n                classPrefix,\n                ellipsisOverlayClassName: tableSize.value !== 'medium' ? sizeClassNames[tableSize.value] : '',\n              },\n            );\n          };\n          item.ellipsisTitle = false;\n        }\n        // 如果是单元格可编辑状态\n        if (item.edit?.component) {\n          const oldCell = item.cell;\n          item.cell = (h, p: PrimaryTableCellParams<TableRowData>) => {\n            const cellProps: EditableCellProps = {\n              ...p,\n              oldCell,\n              rowKey: props.rowKey || 'id',\n              tableBaseClass,\n              cellEmptyContent: props.cellEmptyContent,\n              onChange: props.onRowEdit,\n              onValidate: props.onRowValidate,\n              onRuleChange,\n              onEditableChange: onPrimaryTableCellEditChange,\n            };\n            if (props.editableRowKeys) {\n              const rowValue = get(p.row, props.rowKey || 'id');\n              cellProps.editable = editableKeysMap.value[rowValue] || false;\n              const key = [rowValue, p.col.colKey].join('__');\n              const errorList = errorListMap.value?.[key];\n              errorList && (cellProps.errors = errorList);\n            }\n            if (props.editableCellState) {\n              cellProps.readonly = !props.editableCellState(p);\n            }\n            return <EditableCell {...cellProps} v-slots={context.slots} onUpdateEditedCell={onUpdateEditedCell} />;\n          };\n        }\n        if (item.children?.length) {\n          item.children = getColumns(item.children, parentDisplay || tDisplayColumns.value?.includes(item.colKey));\n        }\n        // 多级表头和自定义列配置特殊逻辑：要么子节点不存在，要么子节点长度大于 1，方便做自定义列配置\n        if (!item.children || item.children?.length) {\n          arr.push(item);\n        }\n      }\n      return arr;\n    };\n\n    const tColumns = computed(() => {\n      const cols = getColumns(columns.value);\n      if (showExpandIconColumn.value) {\n        cols.unshift(getExpandColumn());\n      }\n      return cols;\n    });\n\n    const onInnerPageChange = (pageInfo: PageInfo, newData: Array<TableRowData>) => {\n      innerPagination.value = { ...innerPagination.value, ...pageInfo };\n      currentPaginateData.value = newData;\n      props.onPageChange?.(pageInfo, newData);\n      const changeParams: Parameters<TdPrimaryTableProps['onChange']> = [\n        { pagination: pageInfo },\n        { trigger: 'pagination', currentData: newData },\n      ];\n      props.onChange?.(...changeParams);\n      // 是否在分页时保留选中结果，如果不保留则需清空\n      if (!props.reserveSelectedRowOnPaginate) {\n        setTSelectedRowKeys([], {\n          selectedRowData: [],\n          type: 'uncheck',\n          currentRowKey: 'CLEAR_ON_PAGINATE',\n        });\n      }\n    };\n\n    const onInnerActiveRowAction: BaseTableProps['onActiveRowAction'] = (params) => {\n      props.onActiveRowAction?.(params);\n      handleRowSelectWithAreaSelection(params);\n    };\n\n    const onSingleRowClick: TdPrimaryTableProps['onRowClick'] = (params) => {\n      if (props.expandOnRowClick) {\n        onInnerExpandRowClick(params);\n      }\n      if (props.selectOnRowClick) {\n        onInnerSelectRowClick(params);\n      }\n    };\n\n    // handle click and dblclick exits at the same time\n    let timer: any;\n    const DURATION = 250;\n    const onInnerRowClick: TdPrimaryTableProps['onRowClick'] = (params) => {\n      // no dbl click conflict, no delay\n      if (!props.onRowDblclick) {\n        onSingleRowClick(params);\n        return;\n      }\n      if (timer) {\n        // dblclick\n        clearTimeout(timer);\n        timer = undefined;\n      } else {\n        timer = setTimeout(() => {\n          onSingleRowClick(params);\n          timer = undefined;\n        }, DURATION);\n      }\n    };\n\n    const onShowElementChange = (val: boolean) => {\n      showElement.value = val;\n    };\n\n    return () => {\n      const formatNode = (\n        api: string,\n        renderInnerNode: Function,\n        condition: boolean,\n        extra?: { reverse?: boolean },\n      ) => {\n        if (!condition) return props[api];\n        const innerNode = renderInnerNode(h);\n        const propsNode = renderTNode(api);\n        if (innerNode && !propsNode) return () => innerNode;\n        if (propsNode && !innerNode) return () => propsNode;\n        if (innerNode && propsNode) {\n          return () =>\n            extra?.reverse ? (\n              <div>\n                {innerNode}\n                {propsNode}\n              </div>\n            ) : (\n              <div>\n                {propsNode}\n                {innerNode}\n              </div>\n            );\n        }\n        return null;\n      };\n      const isColumnController = !!(columnController.value && Object.keys(columnController.value).length);\n      // @ts-ignore\n      const placement = isColumnController ? columnController.value.placement || 'top-right' : '';\n      const isBottomController = isColumnController && placement?.indexOf('bottom') !== -1;\n      const topContent = formatNode('topContent', renderColumnController, isColumnController && !isBottomController);\n      const bottomContent = formatNode('bottomContent', renderColumnController, isBottomController, {\n        reverse: true,\n      });\n      const firstFullRow = formatNode('firstFullRow', renderFirstFilterRow, !hasEmptyCondition.value);\n      const lastFullRow = formatNode('lastFullRow', renderAsyncLoading, !!props.asyncLoading);\n\n      // important for base-table controlled properties\n      const { vnode } = getCurrentInstance();\n\n      const baseTableProps: BaseTableProps = {\n        ...omit(vnode.props, OMIT_PROPS),\n        rowKey: props.rowKey,\n        rowClassName: tRowClassNames.value,\n        rowAttributes: tRowAttributes.value,\n        columns: tColumns.value,\n        keyboardRowHover: props.keyboardRowHover ?? innerKeyboardRowHover.value,\n        disableSpaceInactiveRow: props.disableSpaceInactiveRow ?? innerDisableSpaceInactiveRow.value,\n        topContent,\n        bottomContent,\n        firstFullRow,\n        lastFullRow,\n        thDraggable: ['col', 'row-handler-col'].includes(props.dragSort),\n        onShowElementChange,\n        onPageChange: onInnerPageChange,\n        renderExpandedRow: showExpandedRow.value ? renderExpandedRow : undefined,\n        onActiveRowAction: onInnerActiveRowAction,\n      };\n\n      if (props.expandOnRowClick || props.selectOnRowClick) {\n        baseTableProps.onRowClick = onInnerRowClick;\n      }\n\n      return (\n        <BaseTable\n          v-slots={context.slots}\n          {...baseTableProps}\n          ref={primaryTableRef}\n          class={primaryTableClasses.value}\n          onLeafColumnsChange={setDragSortColumns}\n        />\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}