{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _typeof } from '../_chunks/dep-4659d73b.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, computed, toRefs, ref, nextTick, inject, watch, onMounted, createVNode, mergeProps } from 'vue';\nimport { m as merge_1 } from '../_chunks/dep-1b9718a2.mjs';\nimport { i as isUndefined_1 } from '../_chunks/dep-58a62202.mjs';\nimport { omit } from '../utils/helper.mjs';\nimport calcTextareaHeight from './calcTextareaHeight.mjs';\nimport { FormItemInjectionKey } from '../form/const.mjs';\nimport setStyle from '../_common/js/utils/set-style.mjs';\nimport { getCharacterLength } from '../_common/js/utils/helper.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport { useDisabled } from '../hooks/useDisabled.mjs';\nimport { useReadonly } from '../hooks/useReadonly.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig.mjs';\nimport useLengthLimit from '../input/useLengthLimit.mjs';\nimport props from './props.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../_chunks/dep-5d3f7c0e.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-889e457b.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/slot.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../config-provider/type.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../_chunks/dep-4a990ea3.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../_common/js/log/index.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction getValidAttrs(obj) {\n  var newObj = {};\n  Object.keys(obj).forEach(function (key) {\n    if (!isUndefined_1(obj[key])) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\nvar _Textarea = defineComponent({\n  name: \"TTextarea\",\n  inheritAttrs: false,\n  props: _objectSpread({}, props),\n  setup: function setup(props2, _ref) {\n    var attrs = _ref.attrs,\n      expose = _ref.expose;\n    var prefix = usePrefixClass();\n    var name = usePrefixClass(\"textarea\");\n    var TEXTAREA_TIPS_CLASS = computed(function () {\n      return \"\".concat(name.value, \"__tips\");\n    });\n    var TEXTAREA_LIMIT = computed(function () {\n      return \"\".concat(name.value, \"__limit\");\n    });\n    var _toRefs = toRefs(props2),\n      value = _toRefs.value,\n      modelValue = _toRefs.modelValue;\n    var _useVModel = useVModel(value, modelValue, props2.defaultValue, props2.onChange),\n      _useVModel2 = _slicedToArray(_useVModel, 2),\n      innerValue = _useVModel2[0],\n      setInnerValue = _useVModel2[1];\n    var disabled = useDisabled();\n    var isReadonly = useReadonly();\n    var textareaStyle = ref({});\n    var refTextareaElem = ref();\n    var focused = ref(false);\n    var isComposing = ref(false);\n    var focus = function focus() {\n      var _refTextareaElem$valu;\n      return (_refTextareaElem$valu = refTextareaElem.value) === null || _refTextareaElem$valu === void 0 ? void 0 : _refTextareaElem$valu.focus();\n    };\n    var blur = function blur() {\n      var _refTextareaElem$valu2;\n      return (_refTextareaElem$valu2 = refTextareaElem.value) === null || _refTextareaElem$valu2 === void 0 ? void 0 : _refTextareaElem$valu2.blur();\n    };\n    var adjustTextareaHeight = function adjustTextareaHeight() {\n      var _refTextareaElem$valu3;\n      if (props2.autosize === true) {\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value);\n      } else if (props2.autosize && _typeof(props2.autosize) === \"object\") {\n        var _props2$autosize = props2.autosize,\n          minRows = _props2$autosize.minRows,\n          maxRows = _props2$autosize.maxRows;\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value, minRows, maxRows);\n      } else if (attrs.rows) {\n        textareaStyle.value = {\n          height: \"auto\",\n          minHeight: \"auto\"\n        };\n      } else if (attrs.style && (_refTextareaElem$valu3 = refTextareaElem.value) !== null && _refTextareaElem$valu3 !== void 0 && (_refTextareaElem$valu3 = _refTextareaElem$valu3.style) !== null && _refTextareaElem$valu3 !== void 0 && _refTextareaElem$valu3.height) {\n        textareaStyle.value = {\n          height: refTextareaElem.value.style.height\n        };\n      }\n    };\n    var setInputValue = function setInputValue() {\n      var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      var textareaElem = refTextareaElem.value;\n      var sV = String(v);\n      if (!textareaElem) {\n        return;\n      }\n      if (textareaElem.value !== sV) {\n        textareaElem.value = sV;\n        innerValue.value = sV;\n      }\n    };\n    var inputValueChangeHandle = function inputValueChangeHandle(e) {\n      var target = e.target;\n      var val = target.value;\n      if (props2.maxcharacter && props2.maxcharacter >= 0) {\n        var stringInfo = getCharacterLength(val, props2.maxcharacter);\n        val = _typeof(stringInfo) === \"object\" && stringInfo.characters;\n      }\n      !isComposing.value && setInnerValue(val, {\n        e: e\n      });\n      nextTick(function () {\n        return setInputValue(val);\n      });\n      adjustTextareaHeight();\n    };\n    var handleInput = function handleInput(e) {\n      inputValueChangeHandle(e);\n    };\n    var onCompositionstart = function onCompositionstart() {\n      isComposing.value = true;\n    };\n    var onCompositionend = function onCompositionend(e) {\n      isComposing.value = false;\n      inputValueChangeHandle(e);\n    };\n    var eventDeal = function eventDeal(name2, e) {\n      var _props2$eventName;\n      if (disabled.value) return;\n      var eventName = \"on\".concat(name2[0].toUpperCase()).concat(name2.slice(1));\n      (_props2$eventName = props2[eventName]) === null || _props2$eventName === void 0 || _props2$eventName.call(props2, innerValue.value, {\n        e: e\n      });\n    };\n    var emitKeyDown = function emitKeyDown(e) {\n      eventDeal(\"keydown\", e);\n    };\n    var emitKeyUp = function emitKeyUp(e) {\n      eventDeal(\"keyup\", e);\n    };\n    var emitKeypress = function emitKeypress(e) {\n      eventDeal(\"keypress\", e);\n    };\n    var emitFocus = function emitFocus(e) {\n      var _props2$onFocus;\n      adjustTextareaHeight();\n      if (disabled.value) return;\n      focused.value = true;\n      (_props2$onFocus = props2.onFocus) === null || _props2$onFocus === void 0 || _props2$onFocus.call(props2, innerValue.value, {\n        e: e\n      });\n    };\n    var formItem = inject(FormItemInjectionKey, void 0);\n    var emitBlur = function emitBlur(e) {\n      var _props2$onBlur;\n      if (!e.target) return;\n      adjustTextareaHeight();\n      focused.value = false;\n      (_props2$onBlur = props2.onBlur) === null || _props2$onBlur === void 0 || _props2$onBlur.call(props2, innerValue.value, {\n        e: e\n      });\n      formItem === null || formItem === void 0 || formItem.handleBlur();\n    };\n    var textareaClasses = computed(function () {\n      return [name.value, _defineProperty(_defineProperty({}, \"\".concat(prefix.value, \"-is-disabled\"), disabled.value), \"\".concat(prefix.value, \"-is-readonly\"), isReadonly.value)];\n    });\n    var inputAttrs = computed(function () {\n      return getValidAttrs({\n        autofocus: props2.autofocus,\n        disabled: disabled.value,\n        readonly: isReadonly.value,\n        placeholder: props2.placeholder,\n        maxlength: !props2.allowInputOverMax && props2.maxlength || void 0,\n        name: props2.name || void 0\n      });\n    });\n    var characterNumber = computed(function () {\n      var characterInfo = getCharacterLength(String(innerValue.value || \"\"));\n      if (_typeof(characterInfo) === \"object\") {\n        return characterInfo.length;\n      }\n      return characterInfo;\n    });\n    var limitParams = computed(function () {\n      return {\n        value: [void 0, null].includes(innerValue.value) ? void 0 : String(innerValue.value),\n        status: props2.status,\n        maxlength: Number(props2.maxlength),\n        maxcharacter: props2.maxcharacter,\n        allowInputOverMax: props2.allowInputOverMax,\n        onValidate: props2.onValidate\n      };\n    });\n    var _useLengthLimit = useLengthLimit(limitParams),\n      tStatus = _useLengthLimit.tStatus;\n    watch(function () {\n      return innerValue.value;\n    }, function () {\n      return adjustTextareaHeight();\n    });\n    watch(refTextareaElem, function (el) {\n      if (!el) return;\n      adjustTextareaHeight();\n    });\n    watch(function () {\n      return props2.autofocus;\n    }, function (val) {\n      if (val) {\n        refTextareaElem.value.focus();\n      }\n    });\n    watch(textareaStyle, function (val) {\n      var style = attrs.style;\n      setStyle(refTextareaElem.value, merge_1(style, val));\n    });\n    watch(innerValue, function () {\n      nextTick(function () {\n        return adjustTextareaHeight();\n      });\n    });\n    watch(function () {\n      return props2.autosize;\n    }, adjustTextareaHeight, {\n      deep: true\n    });\n    expose({\n      focus: focus,\n      blur: blur\n    });\n    onMounted(function () {\n      adjustTextareaHeight();\n    });\n    var renderTNodeJSX = useTNodeJSX();\n    return function () {\n      var _String;\n      var inputEvents = getValidAttrs({\n        onFocus: emitFocus,\n        onBlur: emitBlur,\n        onKeydown: emitKeyDown,\n        onKeyup: emitKeyUp,\n        onKeypress: emitKeypress\n      });\n      var _useCommonClassName = useCommonClassName(),\n        STATUS = _useCommonClassName.STATUS;\n      var classes = computed(function () {\n        return [\"\".concat(name.value, \"__inner\"), _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefix.value, \"-is-\").concat(tStatus.value), tStatus.value), STATUS.value.disabled, disabled.value), STATUS.value.focused, focused.value), \"\".concat(prefix.value, \"-resize-none\"), _typeof(props2.autosize) === \"object\"), \"narrow-scrollbar\"];\n      });\n      var tips = renderTNodeJSX(\"tips\");\n      var textTips = tips && createVNode(\"div\", {\n        \"class\": \"\".concat(TEXTAREA_TIPS_CLASS.value, \" \").concat(name.value, \"__tips--\").concat(props2.status || \"normal\")\n      }, [tips]);\n      var limitText = props2.maxcharacter && createVNode(\"span\", {\n        \"class\": TEXTAREA_LIMIT.value\n      }, [\"\".concat(characterNumber.value, \"/\").concat(props2.maxcharacter)]) || !props2.maxcharacter && props2.maxlength && createVNode(\"span\", {\n        \"class\": TEXTAREA_LIMIT.value\n      }, [\"\".concat(innerValue.value ? (_String = String(innerValue.value)) === null || _String === void 0 ? void 0 : _String.length : 0, \"/\").concat(props2.maxlength)]);\n      return createVNode(\"div\", mergeProps({\n        \"class\": textareaClasses.value\n      }, omit(attrs, [\"style\"])), [createVNode(\"textarea\", mergeProps({\n        \"onInput\": handleInput,\n        \"onCompositionstart\": onCompositionstart,\n        \"onCompositionend\": onCompositionend,\n        \"ref\": refTextareaElem,\n        \"value\": innerValue.value,\n        \"class\": classes.value\n      }, inputEvents, inputAttrs.value), null), textTips || limitText ? createVNode(\"div\", {\n        \"class\": [\"\".concat(name.value, \"__info_wrapper\"), _defineProperty({}, \"\".concat(name.value, \"__info_wrapper_align\"), !textTips)]\n      }, [textTips, limitText]) : null]);\n    };\n  }\n});\nexport { _Textarea as default };","map":{"version":3,"names":["getValidAttrs","obj","newObj","Object","keys","forEach","key","isUndefined_1","_Textarea","defineComponent","name","inheritAttrs","props","_objectSpread","setup","props2","_ref","attrs","expose","prefix","usePrefixClass","TEXTAREA_TIPS_CLASS","computed","concat","value","TEXTAREA_LIMIT","_toRefs","toRefs","modelValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","innerValue","setInnerValue","disabled","useDisabled","isReadonly","useReadonly","textareaStyle","ref","refTextareaElem","focused","isComposing","focus","_refTextareaElem$valu","blur","_refTextareaElem$valu2","adjustTextareaHeight","_refTextareaElem$valu3","autosize","calcTextareaHeight","_typeof","_props2$autosize","minRows","maxRows","rows","height","minHeight","style","setInputValue","v","arguments","length","undefined","textareaElem","sV","String","inputValueChangeHandle","e","target","val","maxcharacter","stringInfo","getCharacterLength","characters","nextTick","handleInput","onCompositionstart","onCompositionend","eventDeal","name2","_props2$eventName","eventName","toUpperCase","slice","call","emitKeyDown","emitKeyUp","emitKeypress","emitFocus","_props2$onFocus","onFocus","formItem","inject","FormItemInjectionKey","emitBlur","_props2$onBlur","onBlur","handleBlur","textareaClasses","_defineProperty","inputAttrs","autofocus","readonly","placeholder","maxlength","allowInputOverMax","characterNumber","characterInfo","limitParams","includes","status","Number","onValidate","_useLengthLimit","useLengthLimit","tStatus","watch","el","setStyle","merge_1","deep","onMounted","renderTNodeJSX","useTNodeJSX","_String","inputEvents","onKeydown","onKeyup","onKeypress","_useCommonClassName","useCommonClassName","STATUS","classes","tips","textTips","createVNode","limitText","mergeProps","omit"],"sources":["../../src/textarea/textarea.tsx"],"sourcesContent":["import {\n  defineComponent,\n  computed,\n  watch,\n  ref,\n  nextTick,\n  onMounted,\n  toRefs,\n  inject,\n  StyleValue,\n  CSSProperties,\n} from 'vue';\nimport merge from 'lodash/merge';\nimport isUndefined from 'lodash/isUndefined';\n\nimport { omit } from '../utils/helper';\nimport calcTextareaHeight from './calcTextareaHeight';\nimport { FormItemInjectionKey } from '../form/const';\nimport setStyle from '../_common/js/utils/set-style';\nimport { getCharacterLength } from '../_common/js/utils/helper';\n\n// hooks\nimport useVModel from '../hooks/useVModel';\nimport { useDisabled } from '../hooks/useDisabled';\nimport { useReadonly } from '../hooks/useReadonly';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport useLengthLimit from '../input/useLengthLimit';\n\nimport props from './props';\nimport type { TextareaValue, TdTextareaProps } from './type';\n\nfunction getValidAttrs(obj: object): object {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (!isUndefined(obj[key])) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  name: 'TTextarea',\n  inheritAttrs: false,\n  props: { ...props },\n\n  setup(props: TdTextareaProps, { attrs, expose }) {\n    const prefix = usePrefixClass();\n    const name = usePrefixClass('textarea');\n    const TEXTAREA_TIPS_CLASS = computed(() => `${name.value}__tips`);\n    const TEXTAREA_LIMIT = computed(() => `${name.value}__limit`);\n\n    const { value, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const disabled = useDisabled();\n    const isReadonly = useReadonly();\n    const textareaStyle = ref<CSSProperties>({});\n\n    const refTextareaElem = ref<HTMLTextAreaElement>();\n    const focused = ref(false);\n    const isComposing = ref(false);\n\n    const focus = () => refTextareaElem.value?.focus();\n    const blur = () => refTextareaElem.value?.blur();\n\n    // methods\n    const adjustTextareaHeight = () => {\n      if (props.autosize === true) {\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value);\n      } else if (props.autosize && typeof props.autosize === 'object') {\n        const { minRows, maxRows } = props.autosize;\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value, minRows, maxRows);\n      } else if (attrs.rows) {\n        textareaStyle.value = { height: 'auto', minHeight: 'auto' };\n      } else if (attrs.style && refTextareaElem.value?.style?.height) {\n        textareaStyle.value = { height: refTextareaElem.value.style.height };\n      }\n    };\n\n    const setInputValue = (v: TextareaValue = '') => {\n      const textareaElem = refTextareaElem.value;\n      const sV = String(v);\n      if (!textareaElem) {\n        return;\n      }\n\n      if (textareaElem.value !== sV) {\n        textareaElem.value = sV;\n        innerValue.value = sV;\n      }\n    };\n    const inputValueChangeHandle = (e: InputEvent) => {\n      const { target } = e;\n      let val = (target as HTMLInputElement).value;\n      if (props.maxcharacter && props.maxcharacter >= 0) {\n        const stringInfo = getCharacterLength(val, props.maxcharacter);\n        val = typeof stringInfo === 'object' && stringInfo.characters;\n      }\n      !isComposing.value && setInnerValue(val, { e });\n      nextTick(() => setInputValue(val));\n      adjustTextareaHeight();\n    };\n\n    const handleInput = (e: InputEvent) => {\n      inputValueChangeHandle(e);\n    };\n\n    const onCompositionstart = () => {\n      isComposing.value = true;\n    };\n\n    const onCompositionend = (e: InputEvent | CompositionEvent) => {\n      isComposing.value = false;\n      inputValueChangeHandle(e as InputEvent);\n    };\n\n    const eventDeal = (name: 'keydown' | 'keyup' | 'keypress' | 'change', e: KeyboardEvent | FocusEvent) => {\n      if (disabled.value) return;\n      const eventName = `on${name[0].toUpperCase()}${name.slice(1)}`;\n      props[eventName]?.(innerValue.value, { e });\n    };\n\n    const emitKeyDown = (e: KeyboardEvent) => {\n      eventDeal('keydown', e);\n    };\n    const emitKeyUp = (e: KeyboardEvent) => {\n      eventDeal('keyup', e);\n    };\n    const emitKeypress = (e: KeyboardEvent) => {\n      eventDeal('keypress', e);\n    };\n\n    const emitFocus = (e: FocusEvent) => {\n      adjustTextareaHeight();\n      if (disabled.value) return;\n      focused.value = true;\n      props.onFocus?.(innerValue.value, { e });\n    };\n\n    const formItem = inject(FormItemInjectionKey, undefined);\n    const emitBlur = (e: FocusEvent) => {\n      if (!e.target) return;\n      adjustTextareaHeight();\n      focused.value = false;\n      props.onBlur?.(innerValue.value, { e });\n      formItem?.handleBlur();\n    };\n\n    // computed\n    const textareaClasses = computed(() => {\n      return [\n        name.value,\n        {\n          [`${prefix.value}-is-disabled`]: disabled.value,\n          [`${prefix.value}-is-readonly`]: isReadonly.value,\n        },\n      ];\n    });\n    const inputAttrs = computed<Record<string, any>>(() => {\n      return getValidAttrs({\n        autofocus: props.autofocus,\n        disabled: disabled.value,\n        readonly: isReadonly.value,\n        placeholder: props.placeholder,\n        maxlength: (!props.allowInputOverMax && props.maxlength) || undefined,\n        name: props.name || undefined,\n      });\n    });\n    const characterNumber = computed(() => {\n      const characterInfo = getCharacterLength(String(innerValue.value || ''));\n      if (typeof characterInfo === 'object') {\n        return characterInfo.length;\n      }\n      return characterInfo;\n    });\n\n    const limitParams = computed(() => ({\n      value: [undefined, null].includes(innerValue.value) ? undefined : String(innerValue.value),\n      status: props.status,\n      maxlength: Number(props.maxlength),\n      maxcharacter: props.maxcharacter,\n      allowInputOverMax: props.allowInputOverMax,\n      onValidate: props.onValidate,\n    }));\n    const { tStatus } = useLengthLimit(limitParams);\n\n    // watch\n    watch(\n      () => innerValue.value,\n      () => adjustTextareaHeight(),\n    );\n\n    watch(refTextareaElem, (el) => {\n      if (!el) return;\n      adjustTextareaHeight();\n    });\n\n    watch(\n      () => props.autofocus,\n      (val) => {\n        if (val) {\n          refTextareaElem.value.focus();\n        }\n      },\n    );\n\n    watch(textareaStyle, (val) => {\n      const { style } = attrs as { style: StyleValue };\n      setStyle(refTextareaElem.value, merge(style, val));\n    });\n\n    watch(innerValue, () => {\n      nextTick(() => adjustTextareaHeight());\n    });\n\n    watch(() => props.autosize, adjustTextareaHeight, { deep: true });\n\n    expose({\n      focus,\n      blur,\n    });\n\n    onMounted(() => {\n      adjustTextareaHeight();\n    });\n\n    const renderTNodeJSX = useTNodeJSX();\n    return () => {\n      const inputEvents = getValidAttrs({\n        onFocus: emitFocus,\n        onBlur: emitBlur,\n        onKeydown: emitKeyDown,\n        onKeyup: emitKeyUp,\n        onKeypress: emitKeypress,\n      });\n      const { STATUS } = useCommonClassName();\n      const classes = computed(() => [\n        `${name.value}__inner`,\n        {\n          [`${prefix.value}-is-${tStatus.value}`]: tStatus.value,\n          [STATUS.value.disabled]: disabled.value,\n          [STATUS.value.focused]: focused.value,\n          [`${prefix.value}-resize-none`]: typeof props.autosize === 'object',\n        },\n        'narrow-scrollbar',\n      ]);\n\n      const tips = renderTNodeJSX('tips');\n\n      const textTips = tips && (\n        <div class={`${TEXTAREA_TIPS_CLASS.value} ${name.value}__tips--${props.status || 'normal'}`}>{tips}</div>\n      );\n\n      const limitText =\n        (props.maxcharacter && (\n          <span class={TEXTAREA_LIMIT.value}>{`${characterNumber.value}/${props.maxcharacter}`}</span>\n        )) ||\n        (!props.maxcharacter && props.maxlength && (\n          <span class={TEXTAREA_LIMIT.value}>{`${innerValue.value ? String(innerValue.value)?.length : 0}/${\n            props.maxlength\n          }`}</span>\n        ));\n\n      return (\n        <div class={textareaClasses.value} {...omit(attrs, ['style'])}>\n          <textarea\n            onInput={handleInput}\n            onCompositionstart={onCompositionstart}\n            onCompositionend={onCompositionend}\n            ref={refTextareaElem}\n            value={innerValue.value}\n            class={classes.value}\n            {...inputEvents}\n            {...inputAttrs.value}\n          ></textarea>\n          {textTips || limitText ? (\n            <div\n              class={[\n                `${name.value}__info_wrapper`,\n                {\n                  [`${name.value}__info_wrapper_align`]: !textTips,\n                },\n              ]}\n            >\n              {textTips}\n              {limitText}\n            </div>\n          ) : null}\n        </div>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}