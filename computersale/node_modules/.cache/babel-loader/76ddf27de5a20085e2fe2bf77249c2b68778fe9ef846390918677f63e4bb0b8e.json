{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _slicedToArray } from '../../../_chunks/dep-5efe53d1.mjs';\nimport { _ as _classCallCheck, a as _createClass } from '../../../_chunks/dep-f909a041.mjs';\nimport { _ as _defineProperty } from '../../../_chunks/dep-fa52aa21.mjs';\nimport { getIEVersion } from '../utils/helper.mjs';\nimport '../../../_chunks/dep-593f2b67.mjs';\nimport '../../../_chunks/dep-4659d73b.mjs';\nimport '../../../_chunks/dep-4a990ea3.mjs';\nimport '../../../_chunks/dep-5d3f7c0e.mjs';\nimport '../../../_chunks/dep-03a7fb6c.mjs';\nimport '../../../_chunks/dep-eca422c3.mjs';\nimport '../../../_chunks/dep-bf7257e7.mjs';\nimport '../../../_chunks/dep-eae2a67e.mjs';\nimport '../../../_chunks/dep-626c497d.mjs';\nimport '../../../_chunks/dep-29ef8419.mjs';\nimport '../../../_chunks/dep-73384992.mjs';\nimport '../../../_chunks/dep-58a62202.mjs';\nimport '../../../_chunks/dep-889e457b.mjs';\nvar quartOut = function quartOut(t) {\n  return 1 - Math.abs(Math.pow(t - 1, 4));\n};\nvar Tween = /*#__PURE__*/function () {\n  function Tween(_ref) {\n    var _this = this;\n    var from = _ref.from,\n      to = _ref.to,\n      _ref$duration = _ref.duration,\n      duration = _ref$duration === void 0 ? 200 : _ref$duration,\n      onStart = _ref.onStart,\n      _ref$onUpdate = _ref.onUpdate,\n      onUpdate = _ref$onUpdate === void 0 ? function () {} : _ref$onUpdate,\n      onFinish = _ref.onFinish;\n    _classCallCheck(this, Tween);\n    _defineProperty(this, \"from\", void 0);\n    _defineProperty(this, \"to\", void 0);\n    _defineProperty(this, \"duration\", void 0);\n    _defineProperty(this, \"onStart\", void 0);\n    _defineProperty(this, \"onUpdate\", void 0);\n    _defineProperty(this, \"onFinish\", void 0);\n    _defineProperty(this, \"startTime\", void 0);\n    _defineProperty(this, \"started\", void 0);\n    _defineProperty(this, \"finished\", void 0);\n    _defineProperty(this, \"timer\", void 0);\n    _defineProperty(this, \"keys\", void 0);\n    _defineProperty(this, \"time\", 0);\n    _defineProperty(this, \"elapsed\", 0);\n    this.from = from;\n    this.to = to;\n    this.duration = duration;\n    this.onStart = onStart;\n    this.onUpdate = onUpdate;\n    this.onFinish = onFinish;\n    this.startTime = Date.now();\n    this.started = false;\n    this.finished = false;\n    this.timer = null;\n    this.keys = {};\n    Object.entries(from).forEach(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n        key = _ref3[0],\n        value = _ref3[1];\n      if (_this.to[key] === void 0) {\n        _this.to[key] = value;\n      }\n    });\n    Object.entries(to).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n        key = _ref5[0],\n        value = _ref5[1];\n      if (_this.from[key] === void 0) {\n        _this.from[key] = value;\n      }\n    });\n  }\n  return _createClass(Tween, [{\n    key: \"update\",\n    value: function update() {\n      var _this2 = this;\n      this.time = Date.now();\n      if (this.time < this.startTime || this.finished) return;\n      if (this.elapsed >= this.duration) {\n        var _this$onFinish;\n        this.finished = true;\n        (_this$onFinish = this.onFinish) === null || _this$onFinish === void 0 || _this$onFinish.call(this, this.keys);\n        return;\n      }\n      var elapsed = Math.min(this.time - this.startTime, this.duration);\n      this.elapsed = elapsed;\n      var progress = quartOut(elapsed / this.duration);\n      Object.keys(this.to).forEach(function (key) {\n        var delta = _this2.to[key] - _this2.from[key];\n        _this2.keys[key] = _this2.from[key] + delta * progress;\n      });\n      if (!this.started) {\n        var _this$onStart;\n        (_this$onStart = this.onStart) === null || _this$onStart === void 0 || _this$onStart.call(this, this.keys);\n        this.started = true;\n      }\n      this.onUpdate(this.keys);\n    }\n  }, {\n    key: \"polyfillStart\",\n    value: function polyfillStart() {\n      var _this3 = this;\n      var elapsed = Date.now() - this.startTime;\n      var interval = quartOut(elapsed / this.duration);\n      this.timer = setInterval(function () {\n        _this3.update();\n        if (_this3.finished) {\n          clearInterval(_this3.timer);\n        }\n      }, interval);\n    }\n  }, {\n    key: \"normalStart\",\n    value: function normalStart() {\n      var _this4 = this;\n      var _tick = function tick() {\n        _this4.update();\n        _this4.timer = requestAnimationFrame(_tick);\n        if (_this4.finished) {\n          cancelAnimationFrame(_this4.timer);\n          _this4.timer = null;\n        }\n      };\n      _tick();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.startTime = Date.now();\n      if (getIEVersion() < 10) this.polyfillStart();else this.normalStart();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (getIEVersion() < 10) clearInterval(this.timer);else cancelAnimationFrame(this.timer);\n      this.timer = null;\n    }\n  }]);\n}();\nexport { Tween as default };","map":{"version":3,"names":["quartOut","t","Math","abs","pow","Tween","_ref","_this","from","to","_ref$duration","duration","onStart","_ref$onUpdate","onUpdate","onFinish","_classCallCheck","_defineProperty","startTime","Date","now","started","finished","timer","keys","Object","entries","forEach","_ref2","_ref3","_slicedToArray","key","value","_ref4","_ref5","_createClass","update","_this2","time","elapsed","_this$onFinish","call","min","progress","delta","_this$onStart","polyfillStart","_this3","interval","setInterval","clearInterval","normalStart","_this4","_tick","tick","requestAnimationFrame","cancelAnimationFrame","start","getIEVersion","stop"],"sources":["../../../../src/_common/js/statistic/tween.ts"],"sourcesContent":["/**\n * Inspired by https://github.com/PengJiyuan/b-tween\n * requestAnimationFrame https://caniuse.com/requestanimationframe\n * TDesign vue 2 need to ensure compatibility with users who are using IE and Vue2,\n * it is necessary to use setInterval instead of requestAnimationFrame when the browser version is less than 9\n */\nimport { getIEVersion } from '../utils/helper';\n\nexport interface TweenSettings {\n  from: Record<string, number>;\n  to: Record<string, number>;\n  duration?: number;\n  delay?: number;\n  onStart?: (keys: Record<string, number>) => void;\n  onUpdate?: (keys: Record<string, number>) => void;\n  onFinish?: (keys: Record<string, number>) => void;\n}\n\nconst quartOut = (t: number) => 1 - Math.abs((t - 1) ** 4);\n\nexport default class Tween {\n  private from: Record<string, number>;\n\n  private to: Record<string, number>;\n\n  private duration: number;\n\n  private onStart?: (keys: Record<string, number>) => void;\n\n  private onUpdate: (keys: Record<string, number>) => void;\n\n  private onFinish?: (keys: Record<string, number>) => void;\n\n  private startTime: number;\n\n  private started: boolean;\n\n  private finished: boolean;\n\n  private timer: number | NodeJS.Timer | null;\n\n  private keys: Record<string, number>;\n\n  constructor({\n    from,\n    to,\n    duration = 200,\n    onStart,\n    onUpdate = () => {},\n    onFinish,\n  }: TweenSettings) {\n    this.from = from;\n    this.to = to;\n    this.duration = duration;\n    this.onStart = onStart;\n    this.onUpdate = onUpdate;\n    this.onFinish = onFinish;\n    this.startTime = Date.now();\n    this.started = false;\n    this.finished = false;\n    this.timer = null;\n    this.keys = {};\n    Object.entries(from).forEach(([key, value]) => {\n      if (this.to[key] === undefined) {\n        this.to[key] = value;\n      }\n    });\n\n    Object.entries(to).forEach(([key, value]) => {\n      if (this.from[key] === undefined) {\n        this.from[key] = value;\n      }\n    });\n  }\n\n  private time = 0;\n\n  private elapsed = 0;\n\n  private update() {\n    this.time = Date.now();\n    if (this.time < this.startTime || this.finished) return;\n\n    if (this.elapsed >= this.duration) {\n      this.finished = true;\n      this.onFinish?.(this.keys);\n      return;\n    }\n    const elapsed = Math.min(this.time - this.startTime, this.duration);\n    this.elapsed = elapsed;\n    const progress = quartOut(elapsed / this.duration);\n\n    Object.keys(this.to).forEach((key) => {\n      const delta = this.to[key] - this.from[key];\n      this.keys[key] = this.from[key] + delta * progress;\n    });\n\n    if (!this.started) {\n      this.onStart?.(this.keys);\n      this.started = true;\n    }\n\n    this.onUpdate(this.keys);\n  }\n\n  private polyfillStart() {\n    const elapsed = Date.now() - this.startTime;\n    const interval = quartOut(elapsed / this.duration);\n\n    this.timer = setInterval(() => {\n      this.update();\n      if (this.finished) {\n        clearInterval(this.timer as number);\n      }\n    }, interval);\n  }\n\n  private normalStart() {\n    const tick = () => {\n      this.update();\n      this.timer = requestAnimationFrame(tick);\n\n      if (this.finished) {\n        cancelAnimationFrame(this.timer);\n        this.timer = null;\n      }\n    };\n    tick();\n  }\n\n  public start() {\n    this.startTime = Date.now();\n    // IE < 10\n    if (getIEVersion() < 10) this.polyfillStart();\n    else this.normalStart();\n  }\n\n  public stop() {\n    // IE < 10\n    if (getIEVersion() < 10) clearInterval(this.timer as number);\n    else cancelAnimationFrame(this.timer as number);\n    this.timer = null;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}