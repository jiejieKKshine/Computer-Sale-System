{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _toConsumableArray } from '../_chunks/dep-4a990ea3.mjs';\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, inject, computed, ref, nextTick, watch, toRefs, provide, reactive, onMounted, getCurrentInstance, createVNode, mergeProps, Transition, withDirectives, vShow } from 'vue';\nimport props from './submenu-props.mjs';\nimport { renderContent, renderTNodeJSX } from '../utils/render-tnode.mjs';\nimport FakeArrow from '../common-components/fake-arrow.mjs';\nimport useRipple from '../hooks/useRipple.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport { Popup } from '../popup/index.mjs';\nimport { i as isFunction_1 } from '../_chunks/dep-06dcbf4c.mjs';\nimport useCollapseAnimation from '../hooks/useCollapseAnimation.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/set-style.mjs';\nimport '../popup/popup.mjs';\nimport '../_chunks/dep-5efe53d1.mjs';\nimport '@popperjs/core';\nimport '../_chunks/dep-5993931e.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/slot.mjs';\nimport '../hooks/tnode.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useVModel.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../popup/container.mjs';\nimport '../popup/props.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../popup/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar _Submenu = defineComponent({\n  name: \"TSubmenu\",\n  props: props,\n  setup: function setup(props2, ctx) {\n    var classPrefix = usePrefixClass();\n    var menu = inject(\"TdMenu\");\n    var theme = menu.theme,\n      activeValues = menu.activeValues,\n      expandValues = menu.expandValues,\n      isHead = menu.isHead,\n      open = menu.open;\n    var submenu = inject(\"TdSubmenu\", {});\n    var setSubPopup = submenu.setSubPopup,\n      closeParentPopup = submenu.closeParentPopup;\n    var mode = computed(function () {\n      return ctx.attrs.expandType || menu.mode.value;\n    });\n    var menuItems = ref([]);\n    var isActive = computed(function () {\n      return activeValues.value.indexOf(props2.value) > -1;\n    });\n    var popupVisible = ref(false);\n    var isCursorInPopup = ref(false);\n    var rippleColor = computed(function () {\n      return theme.value === \"light\" ? \"#E7E7E7\" : \"#383838\";\n    });\n    var isOpen = computed(function () {\n      var _expandValues$value;\n      if (mode.value === \"popup\") {\n        return popupVisible.value;\n      }\n      return expandValues ? (_expandValues$value = expandValues.value) === null || _expandValues$value === void 0 ? void 0 : _expandValues$value.includes(props2.value) : false;\n    });\n    var isNested = ref(false);\n    var popupWrapperRef = ref();\n    var subPopupRef = ref();\n    var submenuRef = ref();\n    var transitionClass = usePrefixClass(\"slide-down\");\n    useRipple(submenuRef, rippleColor);\n    var classes = computed(function () {\n      return [\"\".concat(classPrefix.value, \"-submenu\"), _defineProperty(_defineProperty({}, \"\".concat(classPrefix.value, \"-is-disabled\"), props2.disabled), \"\".concat(classPrefix.value, \"-is-opened\"), isOpen.value)];\n    });\n    var overlayInnerClassName = computed(function () {\n      var _props2$popupProps;\n      return [\"\".concat(classPrefix.value, \"-menu__popup\"), \"\".concat(classPrefix.value, \"-is-\").concat(isHead ? \"horizontal\" : \"vertical\"), _defineProperty({}, \"\".concat(classPrefix.value, \"-is-opened\"), popupVisible.value), (_props2$popupProps = props2.popupProps) === null || _props2$popupProps === void 0 ? void 0 : _props2$popupProps.overlayInnerClassName];\n    });\n    var overlayClassName = computed(function () {\n      var _props2$popupProps2;\n      return [\"\".concat(classPrefix.value, \"-menu--\").concat(theme.value), isHead && \"\".concat(classPrefix.value, \"-is-head-menu\"), _defineProperty({}, \"\".concat(classPrefix.value, \"-menu-is-nested\"), isNested.value), (_props2$popupProps2 = props2.popupProps) === null || _props2$popupProps2 === void 0 ? void 0 : _props2$popupProps2.overlayClassName];\n    });\n    var submenuClass = computed(function () {\n      return [\"\".concat(classPrefix.value, \"-menu__item\"), \"\".concat(classPrefix.value, \"-menu__item-spacer\"), \"\".concat(classPrefix.value, \"-menu__item-spacer--\").concat(isHead && !isNested.value ? \"bottom\" : \"right\"), _defineProperty(_defineProperty(_defineProperty({}, \"\".concat(classPrefix.value, \"-is-disabled\"), props2.disabled), \"\".concat(classPrefix.value, \"-is-opened\"), isOpen.value), \"\".concat(classPrefix.value, \"-is-active\"), isActive.value)];\n    });\n    var subClass = computed(function () {\n      return [\"\".concat(classPrefix.value, \"-menu__sub\"), _defineProperty({}, \"\".concat(classPrefix.value, \"-is-opened\"), isOpen.value)];\n    });\n    var arrowClass = computed(function () {\n      return [_defineProperty({}, \"\".concat(classPrefix.value, \"-fake-arrow--active\"), isOpen.value)];\n    });\n    var passSubPopupRefToParent = function passSubPopupRefToParent(val) {\n      if (isFunction_1(setSubPopup)) {\n        setSubPopup(val);\n      }\n    };\n    var handleMouseEnter = function handleMouseEnter() {\n      if (props2.disabled) return;\n      setTimeout(function () {\n        if (!popupVisible.value) {\n          open(props2.value);\n          nextTick().then(function () {\n            passSubPopupRefToParent(popupWrapperRef.value);\n          });\n        }\n        popupVisible.value = true;\n      }, 0);\n    };\n    var targetInPopup = function targetInPopup(el) {\n      return el === null || el === void 0 ? void 0 : el.classList.contains(\"\".concat(classPrefix.value, \"-menu__popup\"));\n    };\n    var _loopInPopup = function loopInPopup(el) {\n      if (!el) return false;\n      return targetInPopup(el) || _loopInPopup(el.parentElement);\n    };\n    var handleMouseLeave = function handleMouseLeave(e) {\n      setTimeout(function () {\n        var inPopup = targetInPopup(e.relatedTarget);\n        if (isCursorInPopup.value || inPopup) return;\n        popupVisible.value = false;\n      }, 0);\n    };\n    var handleMouseLeavePopup = function handleMouseLeavePopup(e) {\n      var toElement = e.toElement,\n        relatedTarget = e.relatedTarget;\n      var target = toElement || relatedTarget;\n      if (target === subPopupRef.value) return;\n      var isSubmenu = function isSubmenu(el) {\n        return el === submenuRef.value;\n      };\n      while (target !== null && target !== document && !isSubmenu(target)) {\n        target = target.parentNode;\n      }\n      isCursorInPopup.value = false;\n      if (!isSubmenu(target)) {\n        popupVisible.value = false;\n      }\n      closeParentPopup === null || closeParentPopup === void 0 || closeParentPopup(e);\n    };\n    var handleEnterPopup = function handleEnterPopup() {\n      isCursorInPopup.value = true;\n    };\n    var handleSubmenuItemClick = function handleSubmenuItemClick() {\n      if (props2.disabled) return;\n      open(props2.value);\n    };\n    watch(popupVisible, function (visible) {\n      menu.open(props2.value, visible ? \"add\" : \"remove\");\n    });\n    var _toRefs = toRefs(props2),\n      value = _toRefs.value;\n    provide(\"TdSubmenu\", reactive({\n      value: value,\n      addMenuItem: function addMenuItem(item) {\n        menuItems.value.push(item);\n        if (submenu) {\n          submenu.addMenuItem(item);\n        }\n      },\n      setSubPopup: function setSubPopup(ref2) {\n        subPopupRef.value = ref2;\n      },\n      closeParentPopup: function closeParentPopup(e) {\n        var related = e.relatedTarget;\n        if (_loopInPopup(related)) return;\n        handleMouseLeavePopup(e);\n      }\n    }));\n    watch(popupWrapperRef, function () {\n      passSubPopupRefToParent(popupWrapperRef.value);\n    });\n    onMounted(function () {\n      var _menu$vMenu;\n      menu === null || menu === void 0 || (_menu$vMenu = menu.vMenu) === null || _menu$vMenu === void 0 || _menu$vMenu.add({\n        value: props2.value,\n        parent: submenu === null || submenu === void 0 ? void 0 : submenu.value,\n        vnode: ctx.slots[\"default\"]\n      });\n      var instance = getCurrentInstance();\n      var node = instance.parent;\n      while (node && !/^t(head)?menu/i.test((_node = node) === null || _node === void 0 ? void 0 : _node.type.name)) {\n        var _node, _node2, _node3;\n        if (/submenu/i.test((_node2 = node) === null || _node2 === void 0 ? void 0 : _node2.type.name)) {\n          isNested.value = true;\n          break;\n        }\n        node = (_node3 = node) === null || _node3 === void 0 ? void 0 : _node3.parent;\n      }\n    });\n    return {\n      classPrefix: classPrefix,\n      menuItems: menuItems,\n      mode: mode,\n      theme: theme,\n      isHead: isHead,\n      isNested: isNested,\n      classes: classes,\n      subClass: subClass,\n      isOpen: isOpen,\n      transitionClass: transitionClass,\n      arrowClass: arrowClass,\n      overlayInnerClassName: overlayInnerClassName,\n      overlayClassName: overlayClassName,\n      submenuClass: submenuClass,\n      submenuRef: submenuRef,\n      popupWrapperRef: popupWrapperRef,\n      popupVisible: popupVisible,\n      isCursorInPopup: isCursorInPopup,\n      handleEnterPopup: handleEnterPopup,\n      handleMouseEnter: handleMouseEnter,\n      handleMouseLeave: handleMouseLeave,\n      handleMouseLeavePopup: handleMouseLeavePopup,\n      handleSubmenuItemClick: handleSubmenuItemClick\n    };\n  },\n  methods: {\n    renderPopup: function renderPopup(triggerElement) {\n      var _this$popupProps,\n        _this = this;\n      var placement = \"right-top\";\n      if (!this.isNested && this.isHead) {\n        placement = \"bottom-left\";\n      }\n      var popupWrapper = createVNode(\"div\", {\n        \"ref\": \"popupWrapperRef\",\n        \"class\": [\"\".concat(this.classPrefix, \"-menu__spacer\"), \"\".concat(this.classPrefix, \"-menu__spacer--\").concat(!this.isNested && this.isHead ? \"top\" : \"left\")],\n        \"onMouseenter\": this.handleEnterPopup,\n        \"onMouseleave\": this.handleMouseLeavePopup\n      }, [createVNode(\"ul\", {\n        \"class\": \"\".concat(this.classPrefix, \"-menu__popup-wrapper\")\n      }, [renderContent(this, \"default\", \"content\")])]);\n      var slots = {\n        content: function content() {\n          return popupWrapper;\n        }\n      };\n      var realPopup = createVNode(Popup, mergeProps((_this$popupProps = this.popupProps) !== null && _this$popupProps !== void 0 ? _this$popupProps : {}, {\n        \"overlayInnerClassName\": _toConsumableArray(this.overlayInnerClassName),\n        \"overlayClassName\": _toConsumableArray(this.overlayClassName),\n        \"visible\": this.popupVisible,\n        \"placement\": placement\n      }), _objectSpread({\n        \"default\": function _default() {\n          return [createVNode(\"div\", {\n            \"ref\": \"submenuRef\",\n            \"class\": _this.submenuClass\n          }, [triggerElement])];\n        }\n      }, slots));\n      return realPopup;\n    },\n    renderHeadSubmenu: function renderHeadSubmenu() {\n      var icon = renderTNodeJSX(this, \"icon\");\n      var normalSubmenu = [createVNode(\"div\", {\n        \"ref\": \"submenuRef\",\n        \"class\": this.submenuClass,\n        \"onClick\": this.handleSubmenuItemClick\n      }, [icon, createVNode(\"span\", {\n        \"class\": [\"\".concat(this.classPrefix, \"-menu__content\")]\n      }, [renderTNodeJSX(this, \"title\", {\n        silent: true\n      })])]), createVNode(\"ul\", {\n        \"style\": \"opacity: 0; width: 0; height: 0; overflow: hidden\"\n      }, [renderContent(this, \"default\", \"content\")])];\n      var needRotate = this.mode === \"popup\" && this.isNested;\n      var triggerElement = [icon, createVNode(\"span\", {\n        \"class\": [\"\".concat(this.classPrefix, \"-menu__content\")]\n      }, [renderTNodeJSX(this, \"title\", {\n        silent: true\n      })]), createVNode(FakeArrow, {\n        \"overlayClassName\": /menu/i.test(this.$parent.$options.name) ? this.arrowClass : null,\n        \"overlayStyle\": {\n          transform: \"rotate(\".concat(needRotate ? -90 : 0, \"deg)\")\n        }\n      }, null)];\n      return this.mode === \"normal\" ? normalSubmenu : this.renderPopup(triggerElement);\n    },\n    renderSubmenu: function renderSubmenu() {\n      var _this2 = this;\n      var hasContent = this.$slots.content || this.$slots[\"default\"];\n      var icon = renderTNodeJSX(this, \"icon\");\n      var child = renderContent(this, \"default\", \"content\");\n      var _getCurrentInstance = getCurrentInstance(),\n        parent = _getCurrentInstance.parent;\n      var paddingLeft = 44;\n      while (parent && parent.type.name !== \"TMenu\") {\n        if (parent.type.name === \"TSubmenu\") {\n          paddingLeft += 16;\n        }\n        parent = parent.parent;\n      }\n      var _useCollapseAnimation = useCollapseAnimation(),\n        beforeEnter = _useCollapseAnimation.beforeEnter,\n        enter = _useCollapseAnimation.enter,\n        afterEnter = _useCollapseAnimation.afterEnter,\n        beforeLeave = _useCollapseAnimation.beforeLeave,\n        leave = _useCollapseAnimation.leave,\n        afterLeave = _useCollapseAnimation.afterLeave;\n      var needRotate = this.mode === \"popup\" && this.isNested;\n      var normalSubmenu = [createVNode(\"div\", {\n        \"ref\": \"submenuRef\",\n        \"class\": this.submenuClass,\n        \"onClick\": this.handleSubmenuItemClick\n      }, [icon, createVNode(\"span\", {\n        \"class\": [\"\".concat(this.classPrefix, \"-menu__content\")]\n      }, [renderTNodeJSX(this, \"title\", {\n        silent: true\n      })]), hasContent && createVNode(FakeArrow, {\n        \"overlayClassName\": this.arrowClass,\n        \"overlayStyle\": {\n          transform: \"rotate(\".concat(needRotate ? -90 : 0, \"deg)\")\n        }\n      }, null)]), createVNode(Transition, {\n        \"name\": this.transitionClass,\n        \"onBeforeEnter\": beforeEnter,\n        \"onEnter\": enter,\n        \"onAfterEnter\": afterEnter,\n        \"onBeforeLeave\": beforeLeave,\n        \"onLeave\": leave,\n        \"onAfterLeave\": afterLeave\n      }, {\n        \"default\": function _default() {\n          return [withDirectives(createVNode(\"ul\", {\n            \"class\": _this2.subClass,\n            \"style\": {\n              \"--padding-left\": \"\".concat(paddingLeft, \"px\")\n            }\n          }, [child]), [[vShow, _this2.isOpen]])];\n        }\n      })];\n      var triggerElement = [icon, createVNode(\"span\", {\n        \"class\": [\"\".concat(this.classPrefix, \"-menu__content\")]\n      }, [renderTNodeJSX(this, \"title\", {\n        silent: true\n      })]), createVNode(FakeArrow, {\n        \"overlayClassName\": /menu/i.test(this.$parent.$options.name) ? this.arrowClass : null,\n        \"overlayStyle\": {\n          transform: \"rotate(\".concat(needRotate ? -90 : 0, \"deg)\"),\n          \"margin-left\": \"auto\"\n        }\n      }, null)];\n      return this.mode === \"normal\" ? normalSubmenu : this.renderPopup(triggerElement);\n    }\n  },\n  render: function render() {\n    var child = null;\n    var events = {};\n    if (this.mode === \"popup\") {\n      events = {\n        onMouseenter: this.handleMouseEnter,\n        onMouseleave: this.handleMouseLeave\n      };\n    }\n    if (Object.keys(this.$slots).length > 0) {\n      child = this.isHead ? this.renderHeadSubmenu() : this.renderSubmenu();\n    }\n    return createVNode(\"li\", mergeProps({\n      \"class\": this.classes\n    }, events), [child]);\n  }\n});\nexport { _Submenu as default };","map":{"version":3,"names":["_Submenu","defineComponent","name","props","setup","props2","ctx","classPrefix","usePrefixClass","menu","inject","theme","activeValues","expandValues","isHead","open","submenu","setSubPopup","closeParentPopup","mode","computed","attrs","expandType","value","menuItems","ref","isActive","indexOf","popupVisible","isCursorInPopup","rippleColor","isOpen","_expandValues$value","includes","isNested","popupWrapperRef","subPopupRef","submenuRef","transitionClass","useRipple","classes","concat","_defineProperty","disabled","overlayInnerClassName","_props2$popupProps","popupProps","overlayClassName","_props2$popupProps2","submenuClass","subClass","arrowClass","passSubPopupRefToParent","val","isFunction_1","handleMouseEnter","setTimeout","nextTick","then","targetInPopup","el","classList","contains","_loopInPopup","loopInPopup","parentElement","handleMouseLeave","e","inPopup","relatedTarget","handleMouseLeavePopup","toElement","target","isSubmenu","document","parentNode","handleEnterPopup","handleSubmenuItemClick","watch","visible","_toRefs","toRefs","provide","reactive","addMenuItem","item","push","ref2","related","onMounted","_menu$vMenu","vMenu","add","parent","vnode","slots","instance","getCurrentInstance","node","test","_node","type","_node2","_node3","methods","renderPopup","triggerElement","_this$popupProps","_this","placement","popupWrapper","createVNode","renderContent","content","realPopup","Popup","mergeProps","_toConsumableArray","_objectSpread","_default","renderHeadSubmenu","icon","renderTNodeJSX","normalSubmenu","silent","needRotate","FakeArrow","$parent","$options","transform","renderSubmenu","_this2","hasContent","$slots","child","_getCurrentInstance","paddingLeft","_useCollapseAnimation","useCollapseAnimation","beforeEnter","enter","afterEnter","beforeLeave","leave","afterLeave","Transition","withDirectives","vShow","render","events","onMouseenter","onMouseleave","Object","keys","length"],"sources":["../../src/menu/submenu.tsx"],"sourcesContent":["import {\n  defineComponent,\n  computed,\n  inject,\n  ref,\n  provide,\n  onMounted,\n  getCurrentInstance,\n  watch,\n  Slots,\n  toRefs,\n  reactive,\n  nextTick,\n  Transition,\n} from 'vue';\nimport props from './submenu-props';\nimport { renderContent, renderTNodeJSX } from '../utils/render-tnode';\nimport { TdMenuInterface, TdSubMenuInterface, TdMenuItem } from './const';\nimport FakeArrow from '../common-components/fake-arrow';\nimport useRipple from '../hooks/useRipple';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { Popup, PopupPlacement } from '../popup';\nimport isFunction from 'lodash/isFunction';\nimport { TdSubmenuProps } from './type';\nimport useCollapseAnimation from '../hooks/useCollapseAnimation';\n\nexport default defineComponent({\n  name: 'TSubmenu',\n\n  props,\n  setup(props, ctx) {\n    const classPrefix = usePrefixClass();\n    const menu = inject<TdMenuInterface>('TdMenu');\n    const { theme, activeValues, expandValues, isHead, open } = menu;\n    const submenu = inject<TdSubMenuInterface>('TdSubmenu', {});\n    const { setSubPopup, closeParentPopup } = submenu;\n    const mode = computed(() => ctx.attrs.expandType || menu.mode.value);\n\n    const menuItems = ref([]); // 因composition-api的缺陷，不用reactive， 详见：https://github.com/vuejs/composition-api/issues/637\n    const isActive = computed(() => activeValues.value.indexOf(props.value) > -1);\n    const popupVisible = ref(false);\n    const isCursorInPopup = ref(false);\n    const rippleColor = computed(() => (theme.value === 'light' ? '#E7E7E7' : '#383838'));\n    const isOpen = computed(() => {\n      if (mode.value === 'popup') {\n        return popupVisible.value;\n      }\n      return expandValues ? expandValues.value?.includes(props.value) : false;\n    });\n    const isNested = ref(false); // 是否嵌套\n\n    const popupWrapperRef = ref<HTMLElement>();\n    const subPopupRef = ref<HTMLElement>();\n    const submenuRef = ref<HTMLElement>();\n    const transitionClass = usePrefixClass('slide-down');\n    useRipple(submenuRef, rippleColor);\n\n    const classes = computed(() => [\n      `${classPrefix.value}-submenu`,\n      {\n        [`${classPrefix.value}-is-disabled`]: props.disabled,\n        [`${classPrefix.value}-is-opened`]: isOpen.value,\n      },\n    ]);\n    const overlayInnerClassName = computed(() => [\n      `${classPrefix.value}-menu__popup`,\n      `${classPrefix.value}-is-${isHead ? 'horizontal' : 'vertical'}`,\n      {\n        [`${classPrefix.value}-is-opened`]: popupVisible.value,\n      },\n      (props.popupProps as TdSubmenuProps['popupProps'])?.overlayInnerClassName,\n    ]);\n    const overlayClassName = computed(() => [\n      `${classPrefix.value}-menu--${theme.value}`,\n      isHead && `${classPrefix.value}-is-head-menu`,\n      { [`${classPrefix.value}-menu-is-nested`]: isNested.value },\n      (props.popupProps as TdSubmenuProps['popupProps'])?.overlayClassName,\n    ]);\n    const submenuClass = computed(() => [\n      `${classPrefix.value}-menu__item`,\n      `${classPrefix.value}-menu__item-spacer`,\n      `${classPrefix.value}-menu__item-spacer--${isHead && !isNested.value ? 'bottom' : 'right'}`,\n      {\n        [`${classPrefix.value}-is-disabled`]: props.disabled,\n        [`${classPrefix.value}-is-opened`]: isOpen.value,\n        [`${classPrefix.value}-is-active`]: isActive.value,\n      },\n    ]);\n    const subClass = computed(() => [\n      `${classPrefix.value}-menu__sub`,\n      {\n        [`${classPrefix.value}-is-opened`]: isOpen.value,\n      },\n    ]);\n    const arrowClass = computed(() => [\n      {\n        [`${classPrefix.value}-fake-arrow--active`]: isOpen.value,\n      },\n    ]);\n\n    const passSubPopupRefToParent = (val: HTMLElement) => {\n      if (isFunction(setSubPopup)) {\n        setSubPopup(val);\n      }\n    };\n\n    // methods\n    const handleMouseEnter = () => {\n      if (props.disabled) return;\n      setTimeout(() => {\n        if (!popupVisible.value) {\n          open(props.value);\n\n          // popupVisible设置为TRUE之后打开popup，因此需要在nextTick中确保可以拿到ref值\n          nextTick().then(() => {\n            passSubPopupRefToParent(popupWrapperRef.value);\n          });\n        }\n        popupVisible.value = true;\n      }, 0);\n    };\n\n    const targetInPopup = (el: HTMLElement) => el?.classList.contains(`${classPrefix.value}-menu__popup`);\n    const loopInPopup = (el: HTMLElement): boolean => {\n      if (!el) return false;\n      return targetInPopup(el) || loopInPopup(el.parentElement);\n    };\n\n    const handleMouseLeave = (e: MouseEvent) => {\n      setTimeout(() => {\n        const inPopup = targetInPopup(e.relatedTarget as HTMLElement);\n\n        if (isCursorInPopup.value || inPopup) return;\n        popupVisible.value = false;\n      }, 0);\n    };\n\n    const handleMouseLeavePopup = (e: any) => {\n      const { toElement, relatedTarget } = e;\n      let target = toElement || relatedTarget;\n\n      if (target === subPopupRef.value) return;\n\n      const isSubmenu = (el: Element) => el === submenuRef.value;\n      while (target !== null && target !== document && !isSubmenu(target)) {\n        target = target.parentNode;\n      }\n\n      isCursorInPopup.value = false;\n\n      if (!isSubmenu(target)) {\n        popupVisible.value = false;\n      }\n\n      closeParentPopup?.(e);\n    };\n    const handleEnterPopup = () => {\n      isCursorInPopup.value = true;\n    };\n\n    const handleSubmenuItemClick = () => {\n      if (props.disabled) return;\n      open(props.value);\n    };\n\n    watch(popupVisible, (visible) => {\n      menu.open(props.value, visible ? 'add' : 'remove');\n    });\n\n    // provide\n    const { value } = toRefs(props);\n    provide<TdSubMenuInterface>(\n      'TdSubmenu',\n      reactive({\n        value,\n        addMenuItem: (item: TdMenuItem) => {\n          menuItems.value.push(item);\n          if (submenu) {\n            submenu.addMenuItem(item);\n          }\n        },\n        setSubPopup: (ref: HTMLElement) => {\n          subPopupRef.value = ref;\n        },\n        closeParentPopup: (e: MouseEvent) => {\n          const related = e.relatedTarget as HTMLElement;\n          if (loopInPopup(related)) return;\n          handleMouseLeavePopup(e);\n        },\n      }),\n    );\n\n    watch(popupWrapperRef, () => {\n      // 第一次触发nextTick会取空值，导致subPopupRef拿不到对应的DOM\n      passSubPopupRefToParent(popupWrapperRef.value);\n    });\n\n    onMounted(() => {\n      menu?.vMenu?.add({ value: props.value, parent: submenu?.value, vnode: ctx.slots.default });\n      const instance = getCurrentInstance();\n      let node = instance.parent;\n\n      while (node && !/^t(head)?menu/i.test(node?.type.name)) {\n        if (/submenu/i.test(node?.type.name)) {\n          isNested.value = true;\n          break;\n        }\n        node = node?.parent;\n      }\n    });\n\n    return {\n      classPrefix,\n      menuItems,\n      mode,\n      theme,\n      isHead,\n      isNested,\n      classes,\n      subClass,\n      isOpen,\n      transitionClass,\n      arrowClass,\n      overlayInnerClassName,\n      overlayClassName,\n      submenuClass,\n      submenuRef,\n      popupWrapperRef,\n      popupVisible,\n      isCursorInPopup,\n      handleEnterPopup,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleMouseLeavePopup,\n      handleSubmenuItemClick,\n    };\n  },\n  methods: {\n    renderPopup(triggerElement: Slots[]) {\n      let placement = 'right-top';\n      if (!this.isNested && this.isHead) {\n        placement = 'bottom-left';\n      }\n\n      const popupWrapper = (\n        <div\n          ref=\"popupWrapperRef\"\n          class={[\n            `${this.classPrefix}-menu__spacer`,\n            `${this.classPrefix}-menu__spacer--${!this.isNested && this.isHead ? 'top' : 'left'}`,\n          ]}\n          onMouseenter={this.handleEnterPopup}\n          onMouseleave={this.handleMouseLeavePopup}\n        >\n          <ul class={`${this.classPrefix}-menu__popup-wrapper`}>{renderContent(this, 'default', 'content')}</ul>\n        </div>\n      );\n      const slots = {\n        content: () => popupWrapper,\n      };\n\n      const realPopup = (\n        <Popup\n          {...((this.popupProps ?? {}) as TdSubmenuProps['popupProps'])}\n          overlayInnerClassName={[...this.overlayInnerClassName]}\n          overlayClassName={[...this.overlayClassName]}\n          visible={this.popupVisible}\n          placement={placement as PopupPlacement}\n          v-slots={slots}\n        >\n          <div ref=\"submenuRef\" class={this.submenuClass}>\n            {triggerElement}\n          </div>\n        </Popup>\n      );\n\n      return realPopup;\n    },\n    renderHeadSubmenu() {\n      const icon = renderTNodeJSX(this, 'icon');\n      const normalSubmenu = [\n        <div ref=\"submenuRef\" class={this.submenuClass} onClick={this.handleSubmenuItemClick}>\n          {icon}\n          <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>\n        </div>,\n        <ul style=\"opacity: 0; width: 0; height: 0; overflow: hidden\">{renderContent(this, 'default', 'content')}</ul>,\n      ];\n\n      const needRotate = this.mode === 'popup' && this.isNested;\n\n      const triggerElement = [\n        icon,\n        <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>,\n        <FakeArrow\n          overlayClassName={/menu/i.test(this.$parent.$options.name) ? this.arrowClass : null}\n          overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)` }}\n        />,\n      ];\n\n      return this.mode === 'normal' ? normalSubmenu : this.renderPopup(triggerElement);\n    },\n    renderSubmenu() {\n      const hasContent = this.$slots.content || this.$slots.default;\n      const icon = renderTNodeJSX(this, 'icon');\n      const child = renderContent(this, 'default', 'content');\n      let { parent } = getCurrentInstance();\n      let paddingLeft = 44;\n\n      while (parent && parent.type.name !== 'TMenu') {\n        if (parent.type.name === 'TSubmenu') {\n          paddingLeft += 16;\n        }\n        parent = parent.parent;\n      }\n\n      const { beforeEnter, enter, afterEnter, beforeLeave, leave, afterLeave } = useCollapseAnimation();\n\n      const needRotate = this.mode === 'popup' && this.isNested;\n\n      const normalSubmenu = [\n        <div ref=\"submenuRef\" class={this.submenuClass} onClick={this.handleSubmenuItemClick}>\n          {icon}\n          <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>\n          {hasContent && (\n            <FakeArrow\n              overlayClassName={this.arrowClass}\n              overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)` }}\n            />\n          )}\n        </div>,\n        <Transition\n          name={this.transitionClass}\n          onBeforeEnter={beforeEnter}\n          onEnter={enter}\n          onAfterEnter={afterEnter}\n          onBeforeLeave={beforeLeave}\n          onLeave={leave}\n          onAfterLeave={afterLeave}\n        >\n          <ul v-show={this.isOpen} class={this.subClass} style={{ '--padding-left': `${paddingLeft}px` }}>\n            {child}\n          </ul>\n        </Transition>,\n      ];\n\n      const triggerElement = [\n        icon,\n        <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>,\n        <FakeArrow\n          overlayClassName={/menu/i.test(this.$parent.$options.name) ? this.arrowClass : null}\n          overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)`, 'margin-left': 'auto' }}\n        />,\n      ];\n\n      return this.mode === 'normal' ? normalSubmenu : this.renderPopup(triggerElement);\n    },\n  },\n  render() {\n    let child = null;\n    let events = {};\n\n    if (this.mode === 'popup') {\n      events = {\n        onMouseenter: this.handleMouseEnter,\n        onMouseleave: this.handleMouseLeave,\n      };\n    }\n    if (Object.keys(this.$slots).length > 0) {\n      child = this.isHead ? this.renderHeadSubmenu() : this.renderSubmenu();\n    }\n    return (\n      <li class={this.classes} {...events}>\n        {child}\n      </li>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}