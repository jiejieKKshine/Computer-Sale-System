{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { computed } from 'vue';\nimport useVirtualScroll from '../../hooks/useVirtualScrollNew.mjs';\nimport '../../_chunks/dep-4a990ea3.mjs';\nimport '../../_chunks/dep-593f2b67.mjs';\nimport '../../_chunks/dep-5efe53d1.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../_chunks/dep-eca422c3.mjs';\nimport '../../_chunks/dep-ab4bb9b8.mjs';\nimport '../../_chunks/dep-4659d73b.mjs';\nimport '../../_chunks/dep-bf7257e7.mjs';\nimport '../../_chunks/dep-29ef8419.mjs';\nimport '../../_chunks/dep-400ec705.mjs';\nimport '../../_chunks/dep-525a54df.mjs';\nimport '../../_chunks/dep-5993931e.mjs';\nimport '../../_chunks/dep-2b09875b.mjs';\nimport '../../_chunks/dep-cda4f568.mjs';\nimport '../../_chunks/dep-8dfc9324.mjs';\nvar useListVirtualScroll = function useListVirtualScroll(scroll, listRef, listItems) {\n  var virtualScrollParams = computed(function () {\n    return {\n      data: listItems.value,\n      scroll: scroll\n    };\n  });\n  var virtualConfig = useVirtualScroll(listRef, virtualScrollParams);\n  var isVirtualScroll = computed(function () {\n    return virtualConfig.isVirtualScroll.value;\n  });\n  var lastScrollY = -1;\n  var onInnerVirtualScroll = function onInnerVirtualScroll(e) {\n    var target = e.target || e.srcElement;\n    var top = target.scrollTop;\n    if (lastScrollY !== top) {\n      virtualConfig.isVirtualScroll.value && virtualConfig.handleScroll();\n    } else {\n      lastScrollY = -1;\n    }\n    lastScrollY = top;\n  };\n  var cursorStyle = computed(function () {\n    return {\n      position: \"absolute\",\n      width: \"1px\",\n      height: \"1px\",\n      transition: \"transform 0.2s\",\n      transform: \"translate(0, \".concat(virtualConfig.scrollHeight.value, \"px)\"),\n      \"-ms-transform\": \"translate(0, \".concat(virtualConfig.scrollHeight.value, \"px)\"),\n      \"-moz-transform\": \"translate(0, \".concat(virtualConfig.scrollHeight.value, \"px)\"),\n      \"-webkit-transform\": \"translate(0, \".concat(virtualConfig.scrollHeight.value, \"px)\")\n    };\n  });\n  var listStyle = computed(function () {\n    return {\n      transform: \"translate(0, \".concat(virtualConfig.translateY.value, \"px)\"),\n      \"-ms-transform\": \"translate(0, \".concat(virtualConfig.translateY.value, \"px)\"),\n      \"-moz-transform\": \"translate(0, \".concat(virtualConfig.translateY.value, \"px)\"),\n      \"-webkit-transform\": \"translate(0, \".concat(virtualConfig.translateY.value, \"px)\")\n    };\n  });\n  return {\n    virtualConfig: virtualConfig,\n    cursorStyle: cursorStyle,\n    listStyle: listStyle,\n    isVirtualScroll: isVirtualScroll,\n    onInnerVirtualScroll: onInnerVirtualScroll\n  };\n};\nexport { useListVirtualScroll };","map":{"version":3,"names":["useListVirtualScroll","scroll","listRef","listItems","virtualScrollParams","computed","data","value","virtualConfig","useVirtualScroll","isVirtualScroll","lastScrollY","onInnerVirtualScroll","e","target","srcElement","top","scrollTop","handleScroll","cursorStyle","position","width","height","transition","transform","concat","scrollHeight","listStyle","translateY"],"sources":["../../../src/list/hooks/useListVirtualScroll.ts"],"sourcesContent":["import { Ref, computed } from 'vue';\nimport useVirtualScroll from '../../hooks/useVirtualScrollNew';\nimport { TdListProps } from '../type';\nimport { Styles } from '../../common';\n\nexport const useListVirtualScroll = (\n  scroll: TdListProps['scroll'],\n  listRef: Ref<HTMLElement>,\n  listItems: Ref<any[]>,\n) => {\n  const virtualScrollParams = computed(() => ({\n    data: listItems.value,\n    scroll: scroll,\n  }));\n  const virtualConfig = useVirtualScroll(listRef, virtualScrollParams);\n  const isVirtualScroll = computed(() => virtualConfig.isVirtualScroll.value);\n  let lastScrollY = -1;\n\n  const onInnerVirtualScroll = (e: WheelEvent) => {\n    const target = (e.target || e.srcElement) as HTMLElement;\n    const top = target.scrollTop;\n    if (lastScrollY !== top) {\n      virtualConfig.isVirtualScroll.value && virtualConfig.handleScroll();\n    } else {\n      lastScrollY = -1;\n    }\n    lastScrollY = top;\n  };\n\n  const cursorStyle = computed(\n    () =>\n      ({\n        position: 'absolute',\n        width: '1px',\n        height: '1px',\n        transition: 'transform 0.2s',\n        transform: `translate(0, ${virtualConfig.scrollHeight.value}px)`,\n        '-ms-transform': `translate(0, ${virtualConfig.scrollHeight.value}px)`,\n        '-moz-transform': `translate(0, ${virtualConfig.scrollHeight.value}px)`,\n        '-webkit-transform': `translate(0, ${virtualConfig.scrollHeight.value}px)`,\n      } as Styles),\n  );\n\n  const listStyle = computed(\n    () =>\n      ({\n        transform: `translate(0, ${virtualConfig.translateY.value}px)`,\n        '-ms-transform': `translate(0, ${virtualConfig.translateY.value}px)`,\n        '-moz-transform': `translate(0, ${virtualConfig.translateY.value}px)`,\n        '-webkit-transform': `translate(0, ${virtualConfig.translateY.value}px)`,\n      } as Styles),\n  );\n\n  return {\n    virtualConfig,\n    cursorStyle,\n    listStyle,\n    isVirtualScroll,\n    onInnerVirtualScroll,\n  };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAKO,IAAMA,oBAAuB,YAAvBA,oBAAuBA,CAClCC,MACA,EAAAC,OAAA,EACAC,SACG;EACG,IAAAC,mBAAA,GAAsBC,QAAA,CAAS;IAAA,OAAO;MAC1CC,IAAA,EAAMH,SAAU,CAAAI,KAAA;MAChBN,MAAA,EAAAA;KACA;EAAA;EACI,IAAAO,aAAA,GAAgBC,gBAAiB,CAAAP,OAAA,EAASE,mBAAmB;EACnE,IAAMM,eAAkB,GAAAL,QAAA,CAAS;IAAA,OAAMG,aAAA,CAAcE,eAAA,CAAgBH,KAAK;GAAA;EAC1E,IAAII,WAAc;EAEZ,IAAAC,oBAAA,GAAuB,SAAvBA,qBAAwBC,CAAkB;IACxC,IAAAC,MAAA,GAAUD,CAAE,CAAAC,MAAA,IAAUD,CAAE,CAAAE,UAAA;IAC9B,IAAMC,GAAA,GAAMF,MAAO,CAAAG,SAAA;IACnB,IAAIN,WAAA,KAAgBK,GAAK;MACTR,aAAA,CAAAE,eAAA,CAAgBH,KAAS,IAAAC,aAAA,CAAcU,YAAa;IACpE,CAAO;MACSP,WAAA;IAChB;IACcA,WAAA,GAAAK,GAAA;GAChB;EAEA,IAAMG,WAAc,GAAAd,QAAA,CAClB;IAAA,OACG;MACCe,QAAU;MACVC,KAAO;MACPC,MAAQ;MACRC,UAAY;MACZC,SAAA,kBAAAC,MAAA,CAA2BjB,aAAA,CAAckB,YAAa,CAAAnB,KAAA;MACtD,iCAAAkB,MAAA,CAAiCjB,aAAA,CAAckB,YAAa,CAAAnB,KAAA;MAC5D,kCAAAkB,MAAA,CAAkCjB,aAAA,CAAckB,YAAa,CAAAnB,KAAA;MAC7D,qCAAAkB,MAAA,CAAqCjB,aAAA,CAAckB,YAAa,CAAAnB,KAAA;KAClE;EAAA,CACJ;EAEA,IAAMoB,SAAY,GAAAtB,QAAA,CAChB;IAAA,OACG;MACCmB,SAAA,kBAAAC,MAAA,CAA2BjB,aAAA,CAAcoB,UAAW,CAAArB,KAAA;MACpD,iCAAAkB,MAAA,CAAiCjB,aAAA,CAAcoB,UAAW,CAAArB,KAAA;MAC1D,kCAAAkB,MAAA,CAAkCjB,aAAA,CAAcoB,UAAW,CAAArB,KAAA;MAC3D,qCAAAkB,MAAA,CAAqCjB,aAAA,CAAcoB,UAAW,CAAArB,KAAA;KAChE;EAAA,CACJ;EAEO;IACLC,aAAA,EAAAA,aAAA;IACAW,WAAA,EAAAA,WAAA;IACAQ,SAAA,EAAAA,SAAA;IACAjB,eAAA,EAAAA,eAAA;IACAE,oBAAA,EAAAA;GACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}