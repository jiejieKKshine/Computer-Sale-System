{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { defineComponent, ref, computed, onMounted, nextTick, watch, createVNode } from 'vue';\nimport props from './props.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport useResizeObserver from '../hooks/useResizeObserver.mjs';\nimport { d as debounce_1 } from '../_chunks/dep-5993931e.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nvar TTabNavBar = defineComponent({\n  props: {\n    navs: {\n      type: Array\n    },\n    placement: props.placement,\n    value: props.value\n  },\n  setup: function setup(props) {\n    var COMPONENT_NAME = usePrefixClass(\"tabs\");\n    var classPrefix = usePrefixClass();\n    var barRef = ref();\n    var navBarClass = computed(function () {\n      return [\"\".concat(COMPONENT_NAME.value, \"__bar\"), \"\".concat(classPrefix.value, \"-is-\").concat(props.placement)];\n    });\n    var navBarStyle = ref(null);\n    var getStyle = function getStyle() {\n      var isVertical = [\"left\", \"right\"].includes(props.placement.toLowerCase());\n      var _ref = isVertical ? [\"height\", \"top\"] : [\"width\", \"left\"],\n        _ref2 = _slicedToArray(_ref, 2),\n        sizePropName = _ref2[0],\n        offsetPropName = _ref2[1];\n      var offset = 0;\n      var i = 0;\n      for (; i < props.navs.length; i++) {\n        var _props$navs$i;\n        if (props.navs[i].props.value === props.value) {\n          break;\n        }\n        if ((_props$navs$i = props.navs[i]) !== null && _props$navs$i !== void 0 && _props$navs$i.el) {\n          var sizeWithUnit = getComputedStyle(props.navs[i].el)[sizePropName];\n          var size = parseFloat(sizeWithUnit);\n          offset += size;\n        }\n      }\n      if (!props.navs[i]) return {};\n      return _defineProperty(_defineProperty({}, offsetPropName, \"\".concat(offset, \"px\")), sizePropName, props.navs[i].el ? getComputedStyle(props.navs[i].el)[sizePropName] : \"0px\");\n    };\n    var update = function update() {\n      return navBarStyle.value = getStyle();\n    };\n    onMounted(function () {\n      nextTick(function () {\n        update();\n      });\n    });\n    watch([function () {\n      return props.navs;\n    }, function () {\n      return props.value;\n    }, function () {\n      return props.placement;\n    }], function () {\n      nextTick(function () {\n        update();\n      });\n    });\n    useResizeObserver(barRef, debounce_1(function () {\n      update();\n    }, 35));\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": navBarClass.value,\n        \"style\": navBarStyle.value,\n        \"ref\": barRef\n      }, null);\n    };\n  }\n});\nexport { TTabNavBar as default };","map":{"version":3,"names":["TTabNavBar","defineComponent","props","navs","type","Array","placement","value","setup","COMPONENT_NAME","usePrefixClass","classPrefix","barRef","ref","navBarClass","computed","concat","navBarStyle","getStyle","isVertical","includes","toLowerCase","_ref","_ref2","_slicedToArray","sizePropName","offsetPropName","offset","i","length","_props$navs$i","el","sizeWithUnit","getComputedStyle","size","parseFloat","_defineProperty","update","onMounted","nextTick","watch","useResizeObserver","debounce_1","createVNode"],"sources":["../../src/tabs/tab-nav-bar.tsx"],"sourcesContent":["import { defineComponent, PropType, computed, VNode, nextTick, ref, watch, onMounted } from 'vue';\nimport tabProps from './props';\n\n// hooks\nimport { usePrefixClass } from '../hooks/useConfig';\nimport useResizeObserver from '../hooks/useResizeObserver';\nimport debounce from 'lodash/debounce';\n\nexport default defineComponent({\n  props: {\n    navs: {\n      type: Array as PropType<VNode[]>,\n    },\n    placement: tabProps.placement,\n    value: tabProps.value,\n  },\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('tabs');\n    const classPrefix = usePrefixClass();\n    const barRef = ref<HTMLElement>();\n    const navBarClass = computed(() => {\n      return [`${COMPONENT_NAME.value}__bar`, `${classPrefix.value}-is-${props.placement}`];\n    });\n    const navBarStyle = ref(null);\n    const getStyle = () => {\n      const isVertical = ['left', 'right'].includes(props.placement.toLowerCase());\n      const [sizePropName, offsetPropName] = isVertical ? ['height', 'top'] : ['width', 'left'];\n      let offset = 0;\n      let i = 0;\n      for (; i < props.navs.length; i++) {\n        if (props.navs[i].props.value === props.value) {\n          break;\n        }\n        if (props.navs[i]?.el) {\n          const sizeWithUnit = getComputedStyle(props.navs[i].el as Element)[sizePropName as 'width' | 'left'];\n          const size = parseFloat(sizeWithUnit);\n          offset += size;\n        }\n      }\n      if (!props.navs[i]) return {};\n      return {\n        [offsetPropName]: `${offset}px`,\n        [sizePropName]: props.navs[i].el\n          ? getComputedStyle(props.navs[i].el as Element)[sizePropName as 'width' | 'left']\n          : '0px',\n      };\n    };\n    const update = () => (navBarStyle.value = getStyle());\n\n    onMounted(() => {\n      nextTick(() => {\n        update();\n      });\n    });\n\n    watch([() => props.navs, () => props.value, () => props.placement], () => {\n      nextTick(() => {\n        update();\n      });\n    });\n\n    useResizeObserver(\n      barRef,\n      debounce(() => {\n        update();\n        // 数值大了动画不流畅，小了会频繁触发，所以在合适区间里选择一个值\n      }, 35),\n    );\n    return () => {\n      return <div class={navBarClass.value} style={navBarStyle.value} ref={barRef}></div>;\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}