{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, ref, computed, toRefs, watch, nextTick, createVNode, Fragment, Teleport, Transition, withDirectives, vShow } from 'vue';\nimport { ChevronDownIcon, ChevronLeftIcon, CloseIcon } from 'tdesign-icons-vue-next';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport useDefaultValue from '../hooks/useDefaultValue.mjs';\nimport usePopupManager from '../hooks/usePopupManager.mjs';\nimport useTeleport from '../hooks/useTeleport.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport { Image } from '../image/index.mjs';\nimport TImageItem from './base/ImageItem.mjs';\nimport TImageViewerIcon from './base/ImageModalIcon.mjs';\nimport TImageViewerModal from './base/ImageViewerModal.mjs';\nimport TImageViewerUtils from './base/ImageViewerUtils.mjs';\nimport { EVENT_CODE } from './const.mjs';\nimport { useMirror, useScale, useRotate } from './hooks.mjs';\nimport props from './props.mjs';\nimport { getOverlay, formatImages } from './utils.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../_chunks/dep-f909a041.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../image/image.mjs';\nimport '../_chunks/dep-88ae49da.mjs';\nimport '../_chunks/dep-aeaef131.mjs';\nimport '../_chunks/dep-88c8d9ed.mjs';\nimport '../_chunks/dep-4ec29b23.mjs';\nimport '../_common/js/utils/observe.mjs';\nimport '../image/props.mjs';\nimport '../space/index.mjs';\nimport '../space/space.mjs';\nimport '../space/props.mjs';\nimport '../hooks/slot.mjs';\nimport '../_chunks/dep-889e457b.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-4a990ea3.mjs';\nimport '../_chunks/dep-5d3f7c0e.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../space/type.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../image/type.mjs';\nimport '../_chunks/dep-0d047dce.mjs';\nimport '../dialog/index.mjs';\nimport '../dialog/dialog.mjs';\nimport '../dialog/props.mjs';\nimport '../hooks/useGlobalIcon.mjs';\nimport '../dialog/hooks.mjs';\nimport '../button/index.mjs';\nimport '../button/button.mjs';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-bff7e93a.mjs';\nimport '../_chunks/dep-0b414bea.mjs';\nimport '../_chunks/dep-4d4e2af1.mjs';\nimport '../_chunks/dep-fbd4eddb.mjs';\nimport '../_chunks/dep-ae202bc0.mjs';\nimport '../_chunks/dep-69e0f6fc.mjs';\nimport '../_chunks/dep-ea20409b.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../loading/props.mjs';\nimport '../loading/type.mjs';\nimport '../button/props.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useDisabled.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../button/type.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../_common/js/utils/getScrollbarWidth.mjs';\nimport '../dialog/type.mjs';\nimport '../dialog/plugin.mjs';\nimport '../tooltip/index.mjs';\nimport '../tooltip/tooltip.mjs';\nimport '../tooltip/props.mjs';\nimport '../popup/props.mjs';\nimport '../popup/index.mjs';\nimport '../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../_chunks/dep-5993931e.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../popup/container.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../popup/type.mjs';\nimport '../tooltip/util.mjs';\nimport '../tooltip/type.mjs';\nimport '../_common/js/input-number/large-number.mjs';\nimport '../_common/js/input-number/number.mjs';\nimport '../_common/js/log/index.mjs';\nimport '../_chunks/dep-525a54df.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar _ImageViewer = defineComponent({\n  name: \"TImageViewer\",\n  props: _objectSpread({}, props),\n  setup: function setup(props2) {\n    var _props2$defaultIndex;\n    var classPrefix = usePrefixClass();\n    var COMPONENT_NAME = usePrefixClass(\"image-viewer\");\n    var renderTNodeJSX = useTNodeJSX();\n    var isExpand = ref(true);\n    var showOverlayValue = computed(function () {\n      return getOverlay(props2);\n    });\n    var _toRefs = toRefs(props2),\n      index = _toRefs.index,\n      visible = _toRefs.visible,\n      modelValue = _toRefs.modelValue;\n    var _useDefaultValue = useDefaultValue(index, (_props2$defaultIndex = props2.defaultIndex) !== null && _props2$defaultIndex !== void 0 ? _props2$defaultIndex : 0, props2.onIndexChange, \"index\"),\n      _useDefaultValue2 = _slicedToArray(_useDefaultValue, 2),\n      indexValue = _useDefaultValue2[0],\n      setIndexValue = _useDefaultValue2[1];\n    var _useVModel = useVModel(visible, modelValue, props2.defaultVisible, function () {}, \"visible\"),\n      _useVModel2 = _slicedToArray(_useVModel, 2),\n      visibleValue = _useVModel2[0],\n      setVisibleValue = _useVModel2[1];\n    var animationEnd = ref(true);\n    var animationTimer = ref();\n    var teleportElement = useTeleport(function () {\n      return props2.attach;\n    });\n    var wrapClass = computed(function () {\n      return [COMPONENT_NAME.value, \"\".concat(COMPONENT_NAME.value, \"-preview-image\"), _defineProperty({}, \"\".concat(classPrefix.value, \"-is-hide\"), !visibleValue.value)];\n    });\n    var headerClass = computed(function () {\n      return [\"\".concat(classPrefix.value, \"-image-viewer__modal-header\"), _defineProperty({}, \"\".concat(classPrefix.value, \"-is-show\"), isExpand.value)];\n    });\n    var zIndexValue = computed(function () {\n      var _props2$zIndex;\n      return (_props2$zIndex = props2.zIndex) !== null && _props2$zIndex !== void 0 ? _props2$zIndex : 2600;\n    });\n    var toggleExpand = function toggleExpand() {\n      isExpand.value = !isExpand.value;\n    };\n    var _useMirror = useMirror(),\n      mirror = _useMirror.mirror,\n      onMirror = _useMirror.onMirror,\n      resetMirror = _useMirror.resetMirror;\n    var _useScale = useScale(props2.imageScale),\n      scale = _useScale.scale,\n      onZoomIn = _useScale.onZoomIn,\n      onZoomOut = _useScale.onZoomOut,\n      resetScale = _useScale.resetScale;\n    var _useRotate = useRotate(),\n      rotate = _useRotate.rotate,\n      onRotate = _useRotate.onRotate,\n      resetRotate = _useRotate.resetRotate;\n    var onRest = function onRest() {\n      resetMirror();\n      resetScale();\n      resetRotate();\n    };\n    var images = computed(function () {\n      return formatImages(props2.images);\n    });\n    var currentImage = computed(function () {\n      var _images$value$indexVa;\n      return (_images$value$indexVa = images.value[indexValue.value]) !== null && _images$value$indexVa !== void 0 ? _images$value$indexVa : {\n        mainImage: \"\"\n      };\n    });\n    var _usePopupManager = usePopupManager(\"dialog\", {\n        visible: visibleValue\n      }),\n      isLastDialog = _usePopupManager.isLastDialog;\n    var prevImage = function prevImage() {\n      var newIndex = indexValue.value - 1;\n      onRest();\n      setIndexValue(newIndex < 0 ? 0 : newIndex, {\n        trigger: \"prev\"\n      });\n    };\n    var nextImage = function nextImage() {\n      var newIndex = indexValue.value + 1;\n      onRest();\n      setIndexValue(newIndex >= images.value.length ? indexValue.value : newIndex, {\n        trigger: \"next\"\n      });\n    };\n    var onImgClick = function onImgClick(i) {\n      setIndexValue(i, {\n        trigger: \"current\"\n      });\n    };\n    var openHandler = function openHandler() {\n      setVisibleValue(true);\n    };\n    var onClose = function onClose(ctx) {\n      var _props2$onClose;\n      setVisibleValue(false);\n      (_props2$onClose = props2.onClose) === null || _props2$onClose === void 0 || _props2$onClose.call(props2, ctx);\n    };\n    var closeBtnAction = function closeBtnAction(e) {\n      onClose({\n        e: e,\n        trigger: \"close-btn\"\n      });\n    };\n    var clickOverlayHandler = function clickOverlayHandler(e) {\n      if (props2.closeOnOverlay) {\n        onClose({\n          e: e,\n          trigger: \"overlay\"\n        });\n      }\n    };\n    var keydownHandler = function keydownHandler(e) {\n      e.stopPropagation();\n      switch (e.code) {\n        case EVENT_CODE.left:\n          prevImage();\n          break;\n        case EVENT_CODE.right:\n          nextImage();\n          break;\n        case EVENT_CODE.up:\n          onZoomIn();\n          break;\n        case EVENT_CODE.down:\n          onZoomOut();\n          break;\n        case EVENT_CODE.esc:\n          if (props2.closeOnEscKeydown && isLastDialog()) {\n            onClose({\n              e: e,\n              trigger: \"esc\"\n            });\n          }\n          break;\n        default:\n          break;\n      }\n    };\n    var divRef = ref();\n    watch(function () {\n      return visibleValue.value;\n    }, function (val) {\n      clearTimeout(animationTimer.value);\n      if (val) {\n        animationEnd.value = false;\n        nextTick().then(function () {\n          var _divRef$value, _divRef$value$focus;\n          (_divRef$value = divRef.value) === null || _divRef$value === void 0 || (_divRef$value$focus = _divRef$value.focus) === null || _divRef$value$focus === void 0 || _divRef$value$focus.call(_divRef$value);\n        });\n        onRest();\n      } else {\n        animationTimer.value = setTimeout(function () {\n          animationEnd.value = true;\n        }, 200);\n      }\n    });\n    var onWheel = function onWheel(e) {\n      e.preventDefault();\n      var deltaY = e.deltaY;\n      deltaY > 0 ? onZoomOut() : onZoomIn();\n    };\n    var transStyle = computed(function () {\n      return {\n        transform: \"translateX(calc(-\".concat(indexValue.value, \" * (40px / 9 * 16 + 4px)))\")\n      };\n    });\n    var renderHeader = function renderHeader() {\n      return createVNode(\"div\", {\n        \"class\": headerClass.value\n      }, [createVNode(TImageViewerIcon, {\n        \"icon\": function icon() {\n          return createVNode(ChevronDownIcon, null, null);\n        },\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__header-pre-bt\"),\n        \"onClick\": toggleExpand\n      }, null), createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__header-prev\")\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__header-trans\"),\n        \"style\": transStyle.value\n      }, [images.value.map(function (image, index2) {\n        return createVNode(\"div\", {\n          \"key\": index2,\n          \"class\": [\"\".concat(COMPONENT_NAME.value, \"__header-box\"), _defineProperty({}, \"\".concat(classPrefix.value, \"-is-active\"), index2 === indexValue.value)]\n        }, [createVNode(Image, {\n          \"src\": image.thumbnail || image.mainImage,\n          \"error\": \"\",\n          \"className\": \"\".concat(COMPONENT_NAME.value, \"__header-img\"),\n          \"onClick\": function onClick() {\n            return onImgClick(index2);\n          }\n        }, null)]);\n      })])])]);\n    };\n    var renderNavigationArrow = function renderNavigationArrow(type) {\n      var rotateDeg = type === \"prev\" ? 0 : 180;\n      var _icon = renderTNodeJSX(\"navigationArrow\", createVNode(ChevronLeftIcon, {\n        \"style\": {\n          transform: \"rotate(\".concat(rotateDeg, \"deg)\")\n        },\n        \"size\": \"24px\"\n      }, null));\n      return createVNode(TImageViewerIcon, {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__modal-\").concat(type, \"-bt\"),\n        \"onClick\": type === \"prev\" ? prevImage : nextImage,\n        \"icon\": function icon() {\n          return _icon;\n        }\n      }, null);\n    };\n    var renderCloseBtn = function renderCloseBtn() {\n      if (props2.closeBtn === false) {\n        return;\n      }\n      return createVNode(\"div\", {\n        \"class\": [\"\".concat(COMPONENT_NAME.value, \"__modal-icon\"), \"\".concat(COMPONENT_NAME.value, \"__modal-close-bt\")],\n        \"onClick\": closeBtnAction\n      }, [renderTNodeJSX(\"closeBtn\", createVNode(CloseIcon, {\n        \"size\": \"24px\"\n      }, null))]);\n    };\n    return function () {\n      if (props2.mode === \"modeless\") {\n        return createVNode(Fragment, null, [renderTNodeJSX(\"trigger\", {\n          params: {\n            open: openHandler\n          }\n        }), createVNode(TImageViewerModal, {\n          \"zIndex\": zIndexValue.value,\n          \"visible\": visibleValue.value,\n          \"index\": indexValue.value,\n          \"images\": images.value,\n          \"scale\": scale.value,\n          \"rotate\": rotate.value,\n          \"mirror\": mirror.value,\n          \"currentImage\": currentImage.value,\n          \"onRotate\": onRotate,\n          \"onZoomIn\": onZoomIn,\n          \"onZoomOut\": onZoomOut,\n          \"onMirror\": onMirror,\n          \"onReset\": onRest,\n          \"onClose\": onClose,\n          \"draggable\": props2.draggable,\n          \"showOverlay\": showOverlayValue.value,\n          \"title\": props2.title\n        }, null)]);\n      }\n      return createVNode(Fragment, null, [renderTNodeJSX(\"trigger\", {\n        params: {\n          open: openHandler\n        }\n      }), createVNode(Teleport, {\n        \"disabled\": !props2.attach || !teleportElement.value,\n        \"to\": teleportElement.value\n      }, {\n        \"default\": function _default() {\n          return [createVNode(Transition, null, {\n            \"default\": function _default() {\n              return [(visibleValue.value || !animationEnd.value) && withDirectives(createVNode(\"div\", {\n                \"ref\": divRef,\n                \"class\": wrapClass.value,\n                \"style\": {\n                  zIndex: zIndexValue.value\n                },\n                \"onWheel\": onWheel,\n                \"tabindex\": -1,\n                \"onKeydown\": keydownHandler\n              }, [!!showOverlayValue.value && createVNode(\"div\", {\n                \"class\": \"\".concat(COMPONENT_NAME.value, \"__modal-mask\"),\n                \"onClick\": clickOverlayHandler\n              }, null), images.value.length > 1 && createVNode(Fragment, null, [renderHeader(), createVNode(\"div\", {\n                \"class\": \"\".concat(COMPONENT_NAME.value, \"__modal-index\")\n              }, [props2.title && renderTNodeJSX(\"title\"), \"\".concat(indexValue.value + 1, \"/\").concat(images.value.length)]), renderNavigationArrow(\"prev\"), renderNavigationArrow(\"next\")]), renderCloseBtn(), createVNode(TImageViewerUtils, {\n                \"onZoomIn\": onZoomIn,\n                \"onZoomOut\": onZoomOut,\n                \"onMirror\": onMirror,\n                \"onReset\": onRest,\n                \"onRotate\": onRotate,\n                \"scale\": scale.value,\n                \"currentImage\": currentImage.value\n              }, null), createVNode(TImageItem, {\n                \"scale\": scale.value,\n                \"rotate\": rotate.value,\n                \"mirror\": mirror.value,\n                \"src\": currentImage.value.mainImage,\n                \"placementSrc\": currentImage.value.thumbnail,\n                \"isSvg\": currentImage.value.isSvg\n              }, null)]), [[vShow, visibleValue.value]])];\n            }\n          })];\n        }\n      })]);\n    };\n  }\n});\nexport { _ImageViewer as default };","map":{"version":3,"names":["_ImageViewer","defineComponent","name","props","_objectSpread","setup","props2","_props2$defaultIndex","classPrefix","usePrefixClass","COMPONENT_NAME","renderTNodeJSX","useTNodeJSX","isExpand","ref","showOverlayValue","computed","getOverlay","_toRefs","toRefs","index","visible","modelValue","_useDefaultValue","useDefaultValue","defaultIndex","onIndexChange","_useDefaultValue2","_slicedToArray","indexValue","setIndexValue","_useVModel","useVModel","defaultVisible","_useVModel2","visibleValue","setVisibleValue","animationEnd","animationTimer","teleportElement","useTeleport","attach","wrapClass","value","concat","_defineProperty","headerClass","zIndexValue","_props2$zIndex","zIndex","toggleExpand","_useMirror","useMirror","mirror","onMirror","resetMirror","_useScale","useScale","imageScale","scale","onZoomIn","onZoomOut","resetScale","_useRotate","useRotate","rotate","onRotate","resetRotate","onRest","images","formatImages","currentImage","_images$value$indexVa","mainImage","_usePopupManager","usePopupManager","isLastDialog","prevImage","newIndex","trigger","nextImage","length","onImgClick","i","openHandler","onClose","ctx","_props2$onClose","call","closeBtnAction","e","clickOverlayHandler","closeOnOverlay","keydownHandler","stopPropagation","code","EVENT_CODE","left","right","up","down","esc","closeOnEscKeydown","divRef","watch","val","clearTimeout","nextTick","then","_divRef$value","_divRef$value$focus","focus","setTimeout","onWheel","preventDefault","deltaY","transStyle","transform","renderHeader","createVNode","TImageViewerIcon","icon","ChevronDownIcon","map","image","index2","Image","thumbnail","onClick","renderNavigationArrow","type","rotateDeg","_icon","ChevronLeftIcon","renderCloseBtn","closeBtn","CloseIcon","mode","Fragment","params","open","TImageViewerModal","draggable","title","Teleport","_default","Transition","withDirectives","TImageViewerUtils","TImageItem","isSvg","vShow"],"sources":["../../src/image-viewer/image-viewer.tsx"],"sourcesContent":["import { ChevronDownIcon, ChevronLeftIcon, CloseIcon } from 'tdesign-icons-vue-next';\nimport { Teleport, Transition, computed, defineComponent, nextTick, ref, toRefs, watch } from 'vue';\n\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport usePopupManager from '../hooks/usePopupManager';\nimport useTeleport from '../hooks/useTeleport';\nimport useVModel from '../hooks/useVModel';\nimport Image from '../image';\nimport TImageItem from './base/ImageItem';\nimport TImageViewerIcon from './base/ImageModalIcon';\nimport TImageViewerModal from './base/ImageViewerModal';\nimport TImageViewerUtils from './base/ImageViewerUtils';\nimport { EVENT_CODE } from './const';\nimport { useMirror, useRotate, useScale } from './hooks';\nimport props from './props';\nimport { TdImageViewerProps } from './type';\nimport { formatImages, getOverlay } from './utils';\n\nexport default defineComponent({\n  name: 'TImageViewer',\n  props: { ...props },\n  setup(props) {\n    const classPrefix = usePrefixClass();\n    const COMPONENT_NAME = usePrefixClass('image-viewer');\n    const renderTNodeJSX = useTNodeJSX();\n    const isExpand = ref(true);\n    const showOverlayValue = computed(() => getOverlay(props));\n\n    const { index, visible, modelValue } = toRefs(props);\n    const [indexValue, setIndexValue] = useDefaultValue(index, props.defaultIndex ?? 0, props.onIndexChange, 'index');\n    const [visibleValue, setVisibleValue] = useVModel(visible, modelValue, props.defaultVisible, () => {}, 'visible');\n    const animationEnd = ref(true);\n    const animationTimer = ref();\n    // teleport容器\n    const teleportElement = useTeleport(() => props.attach);\n\n    const wrapClass = computed(() => [\n      COMPONENT_NAME.value,\n      `${COMPONENT_NAME.value}-preview-image`,\n      {\n        [`${classPrefix.value}-is-hide`]: !visibleValue.value,\n      },\n    ]);\n    const headerClass = computed(() => [\n      `${classPrefix.value}-image-viewer__modal-header`,\n      {\n        [`${classPrefix.value}-is-show`]: isExpand.value,\n      },\n    ]);\n    const zIndexValue = computed(() => props.zIndex ?? 2600);\n    const toggleExpand = () => {\n      isExpand.value = !isExpand.value;\n    };\n\n    const { mirror, onMirror, resetMirror } = useMirror();\n    const { scale, onZoomIn, onZoomOut, resetScale } = useScale(props.imageScale);\n    const { rotate, onRotate, resetRotate } = useRotate();\n    const onRest = () => {\n      resetMirror();\n      resetScale();\n      resetRotate();\n    };\n\n    const images = computed(() => formatImages(props.images));\n    const currentImage = computed(() => images.value[indexValue.value] ?? { mainImage: '' });\n\n    const { isLastDialog } = usePopupManager('dialog', {\n      visible: visibleValue,\n    });\n\n    const prevImage = () => {\n      const newIndex = indexValue.value - 1;\n      onRest();\n      setIndexValue(newIndex < 0 ? 0 : newIndex, { trigger: 'prev' });\n    };\n\n    const nextImage = () => {\n      const newIndex = indexValue.value + 1;\n      onRest();\n      setIndexValue(newIndex >= images.value.length ? indexValue.value : newIndex, { trigger: 'next' });\n    };\n\n    const onImgClick = (i: number) => {\n      setIndexValue(i, { trigger: 'current' });\n    };\n\n    const openHandler = () => {\n      setVisibleValue(true);\n    };\n    const onClose: TdImageViewerProps['onClose'] = (ctx) => {\n      setVisibleValue(false);\n      props.onClose?.(ctx);\n    };\n    const closeBtnAction = (e: MouseEvent) => {\n      onClose({ e, trigger: 'close-btn' });\n    };\n    const clickOverlayHandler = (e: MouseEvent) => {\n      if (props.closeOnOverlay) {\n        onClose({ e, trigger: 'overlay' });\n      }\n    };\n\n    const keydownHandler = (e: KeyboardEvent) => {\n      e.stopPropagation();\n\n      switch (e.code) {\n        case EVENT_CODE.left:\n          prevImage();\n          break;\n        case EVENT_CODE.right:\n          nextImage();\n          break;\n        case EVENT_CODE.up:\n          onZoomIn();\n          break;\n        case EVENT_CODE.down:\n          onZoomOut();\n          break;\n        case EVENT_CODE.esc:\n          if (props.closeOnEscKeydown && isLastDialog()) {\n            onClose({ e, trigger: 'esc' });\n          }\n          break;\n        default:\n          break;\n      }\n    };\n\n    const divRef = ref<HTMLDivElement>();\n    watch(\n      () => visibleValue.value,\n      (val) => {\n        clearTimeout(animationTimer.value);\n        if (val) {\n          animationEnd.value = false;\n          nextTick().then(() => {\n            divRef.value?.focus?.();\n          });\n\n          onRest();\n        } else {\n          animationTimer.value = setTimeout(() => {\n            animationEnd.value = true;\n          }, 200);\n        }\n      },\n    );\n\n    const onWheel = (e: WheelEvent) => {\n      e.preventDefault();\n      const { deltaY } = e;\n      deltaY > 0 ? onZoomOut() : onZoomIn();\n    };\n\n    const transStyle = computed(() => ({\n      transform: `translateX(calc(-${indexValue.value} * (40px / 9 * 16 + 4px)))`,\n    }));\n\n    const renderHeader = () => (\n      <div class={headerClass.value}>\n        <TImageViewerIcon\n          icon={() => <ChevronDownIcon />}\n          class={`${COMPONENT_NAME.value}__header-pre-bt`}\n          onClick={toggleExpand}\n        />\n        <div class={`${COMPONENT_NAME.value}__header-prev`}>\n          <div class={`${COMPONENT_NAME.value}__header-trans`} style={transStyle.value}>\n            {images.value.map((image, index) => (\n              <div\n                key={index}\n                class={[\n                  `${COMPONENT_NAME.value}__header-box`,\n                  {\n                    [`${classPrefix.value}-is-active`]: index === indexValue.value,\n                  },\n                ]}\n              >\n                <Image\n                  src={image.thumbnail || image.mainImage}\n                  error=\"\"\n                  className={`${COMPONENT_NAME.value}__header-img`}\n                  onClick={() => onImgClick(index)}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n    const renderNavigationArrow = (type: 'prev' | 'next') => {\n      const rotateDeg = type === 'prev' ? 0 : 180;\n      const icon = renderTNodeJSX(\n        'navigationArrow',\n        <ChevronLeftIcon style={{ transform: `rotate(${rotateDeg}deg)` }} size=\"24px\" />,\n      );\n\n      return (\n        <TImageViewerIcon\n          class={`${COMPONENT_NAME.value}__modal-${type}-bt`}\n          onClick={type === 'prev' ? prevImage : nextImage}\n          icon={() => icon}\n        />\n      );\n    };\n\n    const renderCloseBtn = () => {\n      if (props.closeBtn === false) {\n        return;\n      }\n      return (\n        <div\n          class={[`${COMPONENT_NAME.value}__modal-icon`, `${COMPONENT_NAME.value}__modal-close-bt`]}\n          onClick={closeBtnAction}\n        >\n          {renderTNodeJSX('closeBtn', <CloseIcon size=\"24px\" />)}\n        </div>\n      );\n    };\n\n    return () => {\n      if (props.mode === 'modeless') {\n        return (\n          <>\n            {renderTNodeJSX('trigger', { params: { open: openHandler } })}\n            <TImageViewerModal\n              zIndex={zIndexValue.value}\n              visible={visibleValue.value}\n              index={indexValue.value}\n              images={images.value}\n              scale={scale.value}\n              rotate={rotate.value}\n              mirror={mirror.value}\n              currentImage={currentImage.value}\n              onRotate={onRotate}\n              onZoomIn={onZoomIn}\n              onZoomOut={onZoomOut}\n              onMirror={onMirror}\n              onReset={onRest}\n              onClose={onClose}\n              draggable={props.draggable}\n              showOverlay={showOverlayValue.value}\n              title={props.title}\n            />\n          </>\n        );\n      }\n\n      return (\n        <>\n          {renderTNodeJSX('trigger', { params: { open: openHandler } })}\n          <Teleport disabled={!props.attach || !teleportElement.value} to={teleportElement.value}>\n            <Transition>\n              {(visibleValue.value || !animationEnd.value) && (\n                <div\n                  ref={divRef}\n                  v-show={visibleValue.value}\n                  class={wrapClass.value}\n                  style={{ zIndex: zIndexValue.value }}\n                  onWheel={onWheel}\n                  tabindex={-1}\n                  onKeydown={keydownHandler}\n                >\n                  {!!showOverlayValue.value && (\n                    <div class={`${COMPONENT_NAME.value}__modal-mask`} onClick={clickOverlayHandler} />\n                  )}\n                  {images.value.length > 1 && (\n                    <>\n                      {renderHeader()}\n                      <div class={`${COMPONENT_NAME.value}__modal-index`}>\n                        {props.title && renderTNodeJSX('title')}\n                        {`${indexValue.value + 1}/${images.value.length}`}\n                      </div>\n                      {renderNavigationArrow('prev')}\n                      {renderNavigationArrow('next')}\n                    </>\n                  )}\n                  {renderCloseBtn()}\n                  <TImageViewerUtils\n                    onZoomIn={onZoomIn}\n                    onZoomOut={onZoomOut}\n                    onMirror={onMirror}\n                    onReset={onRest}\n                    onRotate={onRotate}\n                    scale={scale.value}\n                    currentImage={currentImage.value}\n                  />\n                  <TImageItem\n                    scale={scale.value}\n                    rotate={rotate.value}\n                    mirror={mirror.value}\n                    src={currentImage.value.mainImage}\n                    placementSrc={currentImage.value.thumbnail}\n                    isSvg={currentImage.value.isSvg}\n                  />\n                </div>\n              )}\n            </Transition>\n          </Teleport>\n        </>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}