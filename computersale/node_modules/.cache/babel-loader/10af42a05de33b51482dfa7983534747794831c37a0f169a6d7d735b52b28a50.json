{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _toConsumableArray } from '../../_chunks/dep-4a990ea3.mjs';\nimport { _ as _defineProperty } from '../../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, toRefs, computed, ref, createVNode, mergeProps, h } from 'vue';\nimport { CheckCircleFilledIcon, ErrorCircleFilledIcon } from 'tdesign-icons-vue-next';\nimport { abridgeName, getFileSizeText } from '../../_common/js/upload/utils.mjs';\nimport { Button } from '../../button/index.mjs';\nimport { commonProps } from '../constants.mjs';\nimport useCommonClassName from '../../hooks/useCommonClassName.mjs';\nimport { Loading } from '../../loading/index.mjs';\nimport useDrag from '../hooks/useDrag.mjs';\nimport { useGlobalIcon } from '../../hooks/useGlobalIcon.mjs';\nimport { ImageViewer } from '../../image-viewer/index.mjs';\nimport '../../hooks/index.mjs';\nimport { Image } from '../../image/index.mjs';\nimport { useTNodeJSX } from '../../hooks/tnode.mjs';\nimport '../../_chunks/dep-593f2b67.mjs';\nimport '../../_chunks/dep-4659d73b.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../button/button.mjs';\nimport '../../button/props.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-06dcbf4c.mjs';\nimport '../../_chunks/dep-eca422c3.mjs';\nimport '../../_chunks/dep-bf7257e7.mjs';\nimport '../../_chunks/dep-2b09875b.mjs';\nimport '../../_chunks/dep-cda4f568.mjs';\nimport '../../_chunks/dep-bb899bfd.mjs';\nimport '../../_chunks/dep-5922c8f3.mjs';\nimport '../../_chunks/dep-92f86d1d.mjs';\nimport '../../_chunks/dep-6ab5363f.mjs';\nimport '../../_chunks/dep-6dc3d0e1.mjs';\nimport '../../_chunks/dep-76958824.mjs';\nimport '../../_chunks/dep-e9841b9e.mjs';\nimport '../../_chunks/dep-1a4bb2f2.mjs';\nimport '../../_chunks/dep-cc8ebcde.mjs';\nimport '../../_chunks/dep-29ef8419.mjs';\nimport '../../_chunks/dep-f5579c03.mjs';\nimport '../../_chunks/dep-49aeee3c.mjs';\nimport '../../_chunks/dep-b5bf85f5.mjs';\nimport '../../_chunks/dep-3c65fae8.mjs';\nimport '../../_chunks/dep-eae2a67e.mjs';\nimport '../../_chunks/dep-626c497d.mjs';\nimport '../../_chunks/dep-ec0bbd9f.mjs';\nimport '../../_chunks/dep-1b78414a.mjs';\nimport '../../_chunks/dep-d84f19b3.mjs';\nimport '../../_chunks/dep-732f0b7d.mjs';\nimport '../../_chunks/dep-03a7fb6c.mjs';\nimport '../../_chunks/dep-1b9718a2.mjs';\nimport '../../_chunks/dep-e065dc25.mjs';\nimport '../../_chunks/dep-400ec705.mjs';\nimport '../../_chunks/dep-02f9394e.mjs';\nimport '../../_chunks/dep-1725b1c7.mjs';\nimport '../../_chunks/dep-532409c5.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-9ed7da3e.mjs';\nimport '../../_chunks/dep-7f65fc46.mjs';\nimport '../../_chunks/dep-4f2cabb0.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/useDisabled.mjs';\nimport '../../_chunks/dep-df472119.mjs';\nimport '../../_chunks/dep-bff7e93a.mjs';\nimport '../../_chunks/dep-0b414bea.mjs';\nimport '../../_chunks/dep-4d4e2af1.mjs';\nimport '../../_chunks/dep-fbd4eddb.mjs';\nimport '../../_chunks/dep-ae202bc0.mjs';\nimport '../../_chunks/dep-aeaef131.mjs';\nimport '../../_chunks/dep-ab4bb9b8.mjs';\nimport '../../_chunks/dep-7932c2e8.mjs';\nimport '../../_chunks/dep-69e0f6fc.mjs';\nimport '../../_chunks/dep-ea20409b.mjs';\nimport '../../loading/plugin.mjs';\nimport '../../loading/loading.mjs';\nimport '../../_chunks/dep-5efe53d1.mjs';\nimport '../../loading/icon/gradient.mjs';\nimport '../../_common/js/loading/circle-adapter.mjs';\nimport '../../_common/js/utils/set-style.mjs';\nimport '../../_common/js/utils/helper.mjs';\nimport '../../_chunks/dep-5d3f7c0e.mjs';\nimport '../../_chunks/dep-73384992.mjs';\nimport '../../_chunks/dep-58a62202.mjs';\nimport '../../_chunks/dep-889e457b.mjs';\nimport '../../utils/dom.mjs';\nimport '../../utils/easing.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-b91a8171.mjs';\nimport '../../_chunks/dep-03ad9cda.mjs';\nimport '../../_chunks/dep-d8a34055.mjs';\nimport '../../_chunks/dep-2f6e28a0.mjs';\nimport '../../_chunks/dep-5a17bf21.mjs';\nimport '../../_chunks/dep-bad871d5.mjs';\nimport '../../loading/props.mjs';\nimport '../../hooks/useTeleport.mjs';\nimport '../../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../../loading/type.mjs';\nimport '../../button/type.mjs';\nimport '../../image-viewer/image-viewer.mjs';\nimport '../../hooks/useDefaultValue.mjs';\nimport '../../hooks/usePopupManager.mjs';\nimport '../../_chunks/dep-f909a041.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../image-viewer/base/ImageItem.mjs';\nimport '../../_chunks/dep-0d047dce.mjs';\nimport '../../hooks/useImagePreviewUrl.mjs';\nimport '../../image-viewer/hooks.mjs';\nimport '../../_common/js/input-number/number.mjs';\nimport '../../_common/js/input-number/large-number.mjs';\nimport '../../_common/js/log/index.mjs';\nimport '../../_chunks/dep-525a54df.mjs';\nimport '../../_chunks/dep-5993931e.mjs';\nimport '../../_chunks/dep-8dfc9324.mjs';\nimport '../../image-viewer/base/ImageModalIcon.mjs';\nimport '../../image-viewer/base/ImageViewerModal.mjs';\nimport '../../dialog/index.mjs';\nimport '../../dialog/dialog.mjs';\nimport '../../dialog/props.mjs';\nimport '../../dialog/hooks.mjs';\nimport '../../_chunks/dep-88ae49da.mjs';\nimport '../../_chunks/dep-88c8d9ed.mjs';\nimport '../../_chunks/dep-4ec29b23.mjs';\nimport '../../hooks/useDestroyOnClose.mjs';\nimport '../../_common/js/utils/getScrollbarWidth.mjs';\nimport '../../dialog/type.mjs';\nimport '../../dialog/plugin.mjs';\nimport '../../image-viewer/props.mjs';\nimport '../../image-viewer/base/ImageViewerUtils.mjs';\nimport '../../tooltip/index.mjs';\nimport '../../tooltip/tooltip.mjs';\nimport '../../tooltip/props.mjs';\nimport '../../popup/props.mjs';\nimport '../../popup/index.mjs';\nimport '../../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../../popup/container.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../hooks/icon.mjs';\nimport '../../hooks/slot.mjs';\nimport '../../hooks/useVirtualScroll.mjs';\nimport '../../popup/type.mjs';\nimport '../../tooltip/util.mjs';\nimport '../../tooltip/type.mjs';\nimport '../../image-viewer/utils.mjs';\nimport '../../image-viewer/const.mjs';\nimport '../../image/image.mjs';\nimport '../../_common/js/utils/observe.mjs';\nimport '../../image/props.mjs';\nimport '../../space/index.mjs';\nimport '../../space/space.mjs';\nimport '../../space/props.mjs';\nimport '../../space/type.mjs';\nimport '../../image/type.mjs';\nimport '../../image-viewer/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar DraggerFile = defineComponent({\n  name: \"UploadDraggerFile\",\n  props: _objectSpread(_objectSpread({}, commonProps), {}, {\n    trigger: Function,\n    triggerUpload: Function,\n    uploadFiles: Function,\n    cancelUpload: Function,\n    dragEvents: Object\n  }),\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var _toRefs = toRefs(props),\n      displayFiles = _toRefs.displayFiles,\n      disabled = _toRefs.disabled,\n      accept = _toRefs.accept;\n    var locale = computed(function () {\n      return props.locale;\n    });\n    var renderTNodeJSX = useTNodeJSX();\n    var _useCommonClassName = useCommonClassName(),\n      sizeClassNames = _useCommonClassName.sizeClassNames;\n    var uploadPrefix = \"\".concat(props.classPrefix, \"-upload\");\n    var drag = useDrag(props.dragEvents, accept);\n    var dragActive = drag.dragActive;\n    var draggerFileRef = ref();\n    var classes = computed(function () {\n      var _displayFiles$value$;\n      return [\"\".concat(uploadPrefix, \"__dragger\"), _defineProperty({}, \"\".concat(uploadPrefix, \"__dragger-center\"), !displayFiles.value[0]), _defineProperty({}, \"\".concat(uploadPrefix, \"__dragger-error\"), ((_displayFiles$value$ = displayFiles.value[0]) === null || _displayFiles$value$ === void 0 ? void 0 : _displayFiles$value$.status) === \"fail\")];\n    });\n    var _useGlobalIcon = useGlobalIcon({\n        CheckCircleFilledIcon: CheckCircleFilledIcon,\n        ErrorCircleFilledIcon: ErrorCircleFilledIcon\n      }),\n      CheckCircleFilledIcon$1 = _useGlobalIcon.CheckCircleFilledIcon,\n      ErrorCircleFilledIcon$1 = _useGlobalIcon.ErrorCircleFilledIcon;\n    var renderImage = function renderImage() {\n      var _file$response;\n      if (!props.displayFiles.length) return;\n      var file = displayFiles.value[0];\n      if (!file) return null;\n      var url = (file === null || file === void 0 ? void 0 : file.url) || (file === null || file === void 0 || (_file$response = file.response) === null || _file$response === void 0 ? void 0 : _file$response.url);\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-img-wrap\")\n      }, [createVNode(ImageViewer, mergeProps({\n        \"images\": [url],\n        \"trigger\": function trigger(h2, _ref4) {\n          var open = _ref4.open;\n          return createVNode(Image, {\n            \"src\": url || file.raw,\n            \"onClick\": open,\n            \"error\": \"\",\n            \"loading\": \"\"\n          }, null);\n        }\n      }, props.imageViewerProps), null)]);\n    };\n    var renderUploading = function renderUploading() {\n      if (!props.displayFiles.length) return;\n      var file = displayFiles.value[0];\n      if (!file) return null;\n      if ((file === null || file === void 0 ? void 0 : file.status) === \"progress\") {\n        return createVNode(\"div\", {\n          \"class\": \"\".concat(uploadPrefix, \"__single-progress\")\n        }, [createVNode(Loading, null, null), props.showUploadProgress && createVNode(\"span\", {\n          \"class\": \"\".concat(uploadPrefix, \"__single-percent\")\n        }, [file.percent, \"%\"])]);\n      }\n    };\n    var renderMainPreview = function renderMainPreview() {\n      var _locale$value;\n      var file = displayFiles.value[0];\n      var fileName = props.abridgeName ? abridgeName.apply(void 0, [file.name].concat(_toConsumableArray(props.abridgeName))) : file.name;\n      var fileInfo = [createVNode(\"div\", {\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-text\"),\n        \"key\": \"info\"\n      }, [createVNode(\"span\", {\n        \"class\": \"\".concat(uploadPrefix, \"__single-name\")\n      }, [fileName]), file.status === \"progress\" && renderUploading(), file.status === \"success\" && createVNode(CheckCircleFilledIcon$1, null, null), file.status === \"fail\" && createVNode(ErrorCircleFilledIcon$1, null, null)]), createVNode(\"small\", {\n        \"class\": \"\".concat(sizeClassNames.small),\n        \"key\": \"size\"\n      }, [locale.value.file.fileSizeText, \"\\uFF1A\", getFileSizeText(file.size)]), createVNode(\"small\", {\n        \"class\": \"\".concat(sizeClassNames.small),\n        \"key\": \"time\"\n      }, [locale.value.file.fileOperationDateText, \"\\uFF1A\", file.uploadTime || \"-\"])];\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-progress\")\n      }, [props.theme === \"image\" && renderImage(), createVNode(\"div\", {\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-progress-info\")\n      }, [renderTNodeJSX(\"fileListDisplay\", {\n        params: {\n          files: props.displayFiles\n        }\n      }) || fileInfo, createVNode(\"div\", {\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-btns\")\n      }, [[\"progress\", \"waiting\"].includes(file.status) && !disabled.value && createVNode(Button, {\n        \"theme\": \"primary\",\n        \"variant\": \"text\",\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-progress-cancel\"),\n        \"onClick\": function onClick(e) {\n          var _props$cancelUpload;\n          return (_props$cancelUpload = props.cancelUpload) === null || _props$cancelUpload === void 0 ? void 0 : _props$cancelUpload.call(props, {\n            e: e,\n            file: props.toUploadFiles[0] || props.files[0]\n          });\n        }\n      }, {\n        \"default\": function _default() {\n          return [(_locale$value = locale.value) === null || _locale$value === void 0 ? void 0 : _locale$value.cancelUploadText];\n        }\n      }), !props.autoUpload && file.status === \"waiting\" && createVNode(Button, {\n        \"theme\": \"primary\",\n        \"variant\": \"text\",\n        \"disabled\": disabled.value,\n        \"onClick\": function onClick() {\n          var _props$uploadFiles;\n          return (_props$uploadFiles = props.uploadFiles) === null || _props$uploadFiles === void 0 ? void 0 : _props$uploadFiles.call(props);\n        },\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-upload-btn\")\n      }, {\n        \"default\": function _default() {\n          return [locale.value.triggerUploadText.normal];\n        }\n      })]), [\"fail\", \"success\"].includes(file === null || file === void 0 ? void 0 : file.status) && !disabled.value && createVNode(\"div\", {\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-btns\")\n      }, [createVNode(Button, {\n        \"theme\": \"primary\",\n        \"variant\": \"text\",\n        \"disabled\": disabled.value,\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-progress-cancel\"),\n        \"onClick\": props.triggerUpload\n      }, {\n        \"default\": function _default() {\n          return [locale.value.triggerUploadText.reupload];\n        }\n      }), createVNode(Button, {\n        \"theme\": \"danger\",\n        \"variant\": \"text\",\n        \"disabled\": disabled.value,\n        \"class\": \"\".concat(uploadPrefix, \"__dragger-delete-btn\"),\n        \"onClick\": function onClick(e) {\n          return props.onRemove({\n            e: e,\n            index: 0,\n            file: file\n          });\n        }\n      }, {\n        \"default\": function _default() {\n          return [locale.value.triggerUploadText[\"delete\"]];\n        }\n      })])])]);\n    };\n    var renderDefaultDragElement = function renderDefaultDragElement() {\n      var _locale$value$trigger;\n      var unActiveElement = createVNode(\"div\", null, [createVNode(\"span\", {\n        \"class\": \"\".concat(uploadPrefix, \"--highlight\")\n      }, [(_locale$value$trigger = locale.value.triggerUploadText) === null || _locale$value$trigger === void 0 ? void 0 : _locale$value$trigger.normal]), createVNode(\"span\", null, [\"\\xA0\\xA0/\\xA0\\xA0\", locale.value.dragger.draggingText])]);\n      var activeElement = createVNode(\"div\", null, [locale.value.dragger.dragDropText]);\n      return dragActive.value ? activeElement : unActiveElement;\n    };\n    var getContent = function getContent() {\n      var _slots$default;\n      var file = displayFiles.value[0];\n      if (file && ([\"progress\", \"success\", \"fail\", \"waiting\"].includes(file.status) || !file.status)) {\n        return renderMainPreview();\n      }\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(uploadPrefix, \"__trigger\"),\n        \"onClick\": props.triggerUpload\n      }, [((_slots$default = slots[\"default\"]) === null || _slots$default === void 0 ? void 0 : _slots$default.call(slots)) || renderDefaultDragElement()]);\n    };\n    return function () {\n      var _props$trigger;\n      return createVNode(\"div\", {\n        \"ref\": draggerFileRef,\n        \"class\": classes.value,\n        \"onDrop\": drag.handleDrop,\n        \"onDragenter\": drag.handleDragenter,\n        \"onDragover\": drag.handleDragover,\n        \"onDragleave\": drag.handleDragleave\n      }, [((_props$trigger = props.trigger) === null || _props$trigger === void 0 ? void 0 : _props$trigger.call(props, h, {\n        files: displayFiles.value,\n        dragActive: dragActive.value\n      })) || getContent()]);\n    };\n  }\n});\nexport { DraggerFile as default };","map":{"version":3,"names":["DraggerFile","defineComponent","name","props","_objectSpread","commonProps","trigger","Function","triggerUpload","uploadFiles","cancelUpload","dragEvents","Object","setup","_ref","slots","_toRefs","toRefs","displayFiles","disabled","accept","locale","computed","renderTNodeJSX","useTNodeJSX","_useCommonClassName","useCommonClassName","sizeClassNames","uploadPrefix","concat","classPrefix","drag","useDrag","dragActive","draggerFileRef","ref","classes","_displayFiles$value$","_defineProperty","value","status","_useGlobalIcon","useGlobalIcon","CheckCircleFilledIcon","ErrorCircleFilledIcon","CheckCircleFilledIcon$1","ErrorCircleFilledIcon$1","renderImage","_file$response","length","file","url","response","createVNode","h2","_ref4","open","Image","raw","imageViewerProps","renderUploading","Loading","showUploadProgress","percent","renderMainPreview","_locale$value","fileName","abridgeName","apply","_toConsumableArray","fileInfo","small","fileSizeText","getFileSizeText","size","fileOperationDateText","uploadTime","theme","params","files","includes","Button","onClick","e","_props$cancelUpload","call","toUploadFiles","_default","cancelUploadText","autoUpload","_props$uploadFiles","triggerUploadText","normal","reupload","onRemove","index","renderDefaultDragElement","_locale$value$trigger","unActiveElement","dragger","draggingText","activeElement","dragDropText","getContent","_slots$default","_props$trigger","handleDrop","handleDragenter","handleDragover","handleDragleave","h"],"sources":["../../../src/upload/themes/dragger-file.tsx"],"sourcesContent":["import { defineComponent, toRefs, PropType, ref, computed, h } from 'vue';\nimport {\n  CheckCircleFilledIcon as TdCheckCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n} from 'tdesign-icons-vue-next';\nimport { abridgeName, getFileSizeText } from '../../_common/js/upload/utils';\nimport { TdUploadProps, UploadFile } from '../type';\nimport Button from '../../button';\nimport { CommonDisplayFileProps } from '../interface';\nimport { commonProps } from '../constants';\nimport useCommonClassName from '../../hooks/useCommonClassName';\nimport TLoading from '../../loading';\nimport useDrag, { UploadDragEvents } from '../hooks/useDrag';\nimport useGlobalIcon from '../../hooks/useGlobalIcon';\nimport ImageViewer, { ImageViewerProps } from '../../image-viewer';\nimport { useTNodeJSX } from '../../hooks';\nimport { UploadConfig } from '../../config-provider';\nimport Image from '../../image';\n\nexport interface DraggerProps extends CommonDisplayFileProps {\n  trigger?: TdUploadProps['trigger'];\n  triggerUpload?: (e: MouseEvent) => void;\n  uploadFiles?: (toFiles?: UploadFile[]) => void;\n  cancelUpload?: (context: { e: MouseEvent; file: UploadFile }) => void;\n  dragEvents: UploadDragEvents;\n}\n\nexport default defineComponent({\n  name: 'UploadDraggerFile',\n\n  props: {\n    ...commonProps,\n    trigger: Function as PropType<DraggerProps['trigger']>,\n    triggerUpload: Function as PropType<DraggerProps['triggerUpload']>,\n    uploadFiles: Function as PropType<DraggerProps['uploadFiles']>,\n    cancelUpload: Function as PropType<DraggerProps['cancelUpload']>,\n    dragEvents: Object as PropType<DraggerProps['dragEvents']>,\n  },\n\n  setup(props, { slots }) {\n    const { displayFiles, disabled, accept } = toRefs(props);\n    const locale = computed(() => props.locale as UploadConfig);\n\n    const renderTNodeJSX = useTNodeJSX();\n\n    const { sizeClassNames } = useCommonClassName();\n    const uploadPrefix = `${props.classPrefix}-upload`;\n\n    const drag = useDrag(props.dragEvents, accept);\n    const { dragActive } = drag;\n\n    const draggerFileRef = ref();\n\n    const classes = computed(() => [\n      `${uploadPrefix}__dragger`,\n      { [`${uploadPrefix}__dragger-center`]: !displayFiles.value[0] },\n      { [`${uploadPrefix}__dragger-error`]: displayFiles.value[0]?.status === 'fail' },\n    ]);\n\n    const { CheckCircleFilledIcon, ErrorCircleFilledIcon } = useGlobalIcon({\n      CheckCircleFilledIcon: TdCheckCircleFilledIcon,\n      ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    });\n\n    const renderImage = () => {\n      if (!props.displayFiles.length) return;\n      const file = displayFiles.value[0];\n      if (!file) return null;\n      const url = file?.url || file?.response?.url;\n      return (\n        <div class={`${uploadPrefix}__dragger-img-wrap`}>\n          <ImageViewer\n            images={[url]}\n            trigger={(h, { open }: any) => <Image src={url || file.raw} onClick={open} error=\"\" loading=\"\" />}\n            {...(props.imageViewerProps as ImageViewerProps)}\n          ></ImageViewer>\n        </div>\n      );\n    };\n\n    const renderUploading = () => {\n      if (!props.displayFiles.length) return;\n      const file = displayFiles.value[0];\n      if (!file) return null;\n      if (file?.status === 'progress') {\n        return (\n          <div class={`${uploadPrefix}__single-progress`}>\n            <TLoading />\n            {props.showUploadProgress && <span class={`${uploadPrefix}__single-percent`}>{file.percent}%</span>}\n          </div>\n        );\n      }\n    };\n\n    const renderMainPreview = () => {\n      const file = displayFiles.value[0];\n      const fileName = props.abridgeName ? abridgeName(file.name, ...props.abridgeName) : file.name;\n\n      const fileInfo = [\n        <div class={`${uploadPrefix}__dragger-text`} key=\"info\">\n          <span class={`${uploadPrefix}__single-name`}>{fileName}</span>\n          {file.status === 'progress' && renderUploading()}\n          {file.status === 'success' && <CheckCircleFilledIcon />}\n          {file.status === 'fail' && <ErrorCircleFilledIcon />}\n        </div>,\n        <small class={`${sizeClassNames.small}`} key=\"size\">\n          {locale.value.file.fileSizeText}：{getFileSizeText(file.size)}\n        </small>,\n        <small class={`${sizeClassNames.small}`} key=\"time\">\n          {locale.value.file.fileOperationDateText}：{file.uploadTime || '-'}\n        </small>,\n      ];\n      return (\n        <div class={`${uploadPrefix}__dragger-progress`}>\n          {props.theme === 'image' && renderImage()}\n          <div class={`${uploadPrefix}__dragger-progress-info`}>\n            {renderTNodeJSX('fileListDisplay', { params: { files: props.displayFiles } }) || fileInfo}\n\n            <div class={`${uploadPrefix}__dragger-btns`}>\n              {['progress', 'waiting'].includes(file.status) && !disabled.value && (\n                <Button\n                  theme=\"primary\"\n                  variant=\"text\"\n                  class={`${uploadPrefix}__dragger-progress-cancel`}\n                  onClick={(e: MouseEvent) =>\n                    props.cancelUpload?.({\n                      e,\n                      file: props.toUploadFiles[0] || props.files[0],\n                    })\n                  }\n                >\n                  {locale.value?.cancelUploadText}\n                </Button>\n              )}\n              {!props.autoUpload && file.status === 'waiting' && (\n                <Button\n                  theme=\"primary\"\n                  variant=\"text\"\n                  disabled={disabled.value}\n                  onClick={() => props.uploadFiles?.()}\n                  class={`${uploadPrefix}__dragger-upload-btn`}\n                >\n                  {locale.value.triggerUploadText.normal}\n                </Button>\n              )}\n            </div>\n            {['fail', 'success'].includes(file?.status) && !disabled.value && (\n              <div class={`${uploadPrefix}__dragger-btns`}>\n                <Button\n                  theme=\"primary\"\n                  variant=\"text\"\n                  disabled={disabled.value}\n                  class={`${uploadPrefix}__dragger-progress-cancel`}\n                  onClick={props.triggerUpload}\n                >\n                  {locale.value.triggerUploadText.reupload}\n                </Button>\n                <Button\n                  theme=\"danger\"\n                  variant=\"text\"\n                  disabled={disabled.value}\n                  class={`${uploadPrefix}__dragger-delete-btn`}\n                  onClick={(e: MouseEvent) => props.onRemove({ e, index: 0, file })}\n                >\n                  {locale.value.triggerUploadText.delete}\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      );\n    };\n\n    const renderDefaultDragElement = () => {\n      const unActiveElement = (\n        <div>\n          <span class={`${uploadPrefix}--highlight`}>{locale.value.triggerUploadText?.normal}</span>\n          <span>&nbsp;&nbsp;/&nbsp;&nbsp;{locale.value.dragger.draggingText}</span>\n        </div>\n      );\n      const activeElement = <div>{locale.value.dragger.dragDropText}</div>;\n      return dragActive.value ? activeElement : unActiveElement;\n    };\n\n    const getContent = () => {\n      const file = displayFiles.value[0];\n      if (file && (['progress', 'success', 'fail', 'waiting'].includes(file.status) || !file.status)) {\n        return renderMainPreview();\n      }\n      return (\n        <div class={`${uploadPrefix}__trigger`} onClick={props.triggerUpload}>\n          {slots.default?.() || renderDefaultDragElement()}\n        </div>\n      );\n    };\n\n    return () => (\n      <div\n        ref={draggerFileRef}\n        class={classes.value}\n        onDrop={drag.handleDrop}\n        onDragenter={drag.handleDragenter}\n        onDragover={drag.handleDragover}\n        onDragleave={drag.handleDragleave}\n      >\n        {props.trigger?.(h, { files: displayFiles.value, dragActive: dragActive.value }) || getContent()}\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}