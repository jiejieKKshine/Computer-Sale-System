{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { i as isBoolean_1 } from '../../_chunks/dep-df472119.mjs';\nimport { ref, computed, watch, onBeforeUnmount } from 'vue';\nimport { on, off } from '../../utils/dom.mjs';\nimport { d as debounce_1 } from '../../_chunks/dep-5993931e.mjs';\nimport '../../_chunks/dep-eca422c3.mjs';\nimport '../../_chunks/dep-bf7257e7.mjs';\nimport '../../_chunks/dep-4659d73b.mjs';\nimport '../../_chunks/dep-29ef8419.mjs';\nimport '../../_chunks/dep-03a7fb6c.mjs';\nimport '../../_chunks/dep-eae2a67e.mjs';\nimport '../../_chunks/dep-626c497d.mjs';\nimport '../../_chunks/dep-06dcbf4c.mjs';\nimport '../../_chunks/dep-2b09875b.mjs';\nimport '../../_chunks/dep-cda4f568.mjs';\nimport '../../utils/easing.mjs';\nimport '../../_chunks/dep-8dfc9324.mjs';\nimport '../../_chunks/dep-ab4bb9b8.mjs';\nfunction useAffix(props) {\n  var tableContentRef = ref();\n  var affixHeaderRef = ref();\n  var affixFooterRef = ref();\n  var horizontalScrollbarRef = ref();\n  var paginationRef = ref();\n  var showAffixHeader = ref(true);\n  var showAffixFooter = ref(true);\n  var showAffixPagination = ref(true);\n  var isMousedown = false;\n  var isMouseInScrollableArea = false;\n  var isVirtualScroll = computed(function () {\n    return props.scroll && props.scroll.type === \"virtual\" && (props.scroll.threshold || 100) < props.data.length;\n  });\n  var isAffixed = computed(function () {\n    return !!(props.headerAffixedTop || props.footerAffixedBottom || props.horizontalScrollAffixedBottom);\n  });\n  var lastScrollLeft = 0;\n  var onHorizontalScroll = function onHorizontalScroll(scrollElement) {\n    if (!isAffixed.value && !isVirtualScroll.value) return;\n    var target = scrollElement;\n    if (!target && tableContentRef.value) {\n      lastScrollLeft = 0;\n      target = tableContentRef.value;\n    }\n    if (!target) return;\n    var left = target.scrollLeft;\n    if (lastScrollLeft === left) return;\n    lastScrollLeft = left;\n    var toUpdateScrollElement = [tableContentRef.value, affixHeaderRef.value, affixFooterRef.value, horizontalScrollbarRef.value];\n    for (var i = 0, len = toUpdateScrollElement.length; i < len; i++) {\n      if (toUpdateScrollElement[i] && scrollElement !== toUpdateScrollElement[i]) {\n        toUpdateScrollElement[i].scrollLeft = left;\n      }\n    }\n  };\n  var isAffixedBottomElementShow = function isAffixedBottomElementShow(elementRect, tableRect, headerHeight) {\n    return tableRect.top + headerHeight < elementRect.top && elementRect.top > elementRect.height;\n  };\n  var getOffsetTop = function getOffsetTop(props2) {\n    if (isBoolean_1(props2)) return 0;\n    return props2.offsetTop || 0;\n  };\n  var updateAffixHeaderOrFooter = function updateAffixHeaderOrFooter() {\n    var _tableContentRef$valu, _tableContentRef$valu2, _affixFooterRef$value;\n    if (!isAffixed.value && !isVirtualScroll.value && !tableContentRef.value) return;\n    var pos = (_tableContentRef$valu = tableContentRef.value) === null || _tableContentRef$valu === void 0 ? void 0 : _tableContentRef$valu.getBoundingClientRect();\n    var headerRect = (_tableContentRef$valu2 = tableContentRef.value) === null || _tableContentRef$valu2 === void 0 || (_tableContentRef$valu2 = _tableContentRef$valu2.querySelector(\"thead\")) === null || _tableContentRef$valu2 === void 0 ? void 0 : _tableContentRef$valu2.getBoundingClientRect();\n    var headerHeight = (headerRect === null || headerRect === void 0 ? void 0 : headerRect.height) || 0;\n    var footerRect = (_affixFooterRef$value = affixFooterRef.value) === null || _affixFooterRef$value === void 0 ? void 0 : _affixFooterRef$value.getBoundingClientRect();\n    if ((props.headerAffixedTop || isVirtualScroll.value) && affixHeaderRef.value) {\n      var offsetTop = getOffsetTop(props.headerAffixProps || props.headerAffixedTop);\n      var footerHeight = (footerRect === null || footerRect === void 0 ? void 0 : footerRect.height) || 0;\n      var r = Math.abs(pos.top) < pos.height - headerHeight - offsetTop - footerHeight;\n      if (isVirtualScroll.value) {\n        r = pos.top > -1 * headerRect.height;\n      }\n      showAffixHeader.value = r;\n    }\n    if (props.footerAffixedBottom && affixFooterRef !== null && affixFooterRef !== void 0 && affixFooterRef.value) {\n      showAffixFooter.value = isAffixedBottomElementShow(footerRect, pos, headerHeight);\n    } else if (props.horizontalScrollAffixedBottom && horizontalScrollbarRef !== null && horizontalScrollbarRef !== void 0 && horizontalScrollbarRef.value) {\n      var horizontalScrollbarRect = horizontalScrollbarRef.value.getBoundingClientRect();\n      showAffixFooter.value = isAffixedBottomElementShow(horizontalScrollbarRect, pos, headerHeight);\n    }\n    if (props.paginationAffixedBottom && paginationRef.value) {\n      var pageRect = paginationRef.value.getBoundingClientRect();\n      showAffixPagination.value = isAffixedBottomElementShow(pageRect, pos, headerHeight);\n    }\n  };\n  var onDocumentScroll = function onDocumentScroll() {\n    updateAffixHeaderOrFooter();\n  };\n  var onFootScroll = function onFootScroll() {\n    onHorizontalScroll(affixFooterRef.value);\n  };\n  var onHeaderScroll = function onHeaderScroll() {\n    onHorizontalScroll(affixHeaderRef.value);\n  };\n  var horizontalScrollbarScroll = function horizontalScrollbarScroll() {\n    onHorizontalScroll(horizontalScrollbarRef.value);\n  };\n  var onTableContentScroll = function onTableContentScroll() {\n    onHorizontalScroll(tableContentRef.value);\n  };\n  var onFootMouseEnter = function onFootMouseEnter() {\n    on(affixFooterRef.value, \"scroll\", onFootScroll);\n  };\n  var onFootMouseLeave = function onFootMouseLeave() {\n    off(affixFooterRef.value, \"scroll\", onFootScroll);\n  };\n  var onHeaderMouseEnter = function onHeaderMouseEnter() {\n    on(affixHeaderRef.value, \"scroll\", onHeaderScroll);\n    onMouseEnterScrollableArea();\n  };\n  var onHeaderMouseLeave = function onHeaderMouseLeave() {\n    if (!isMousedown) off(affixHeaderRef.value, \"scroll\", onHeaderScroll);\n    onMouseLeaveScrollableArea();\n  };\n  var onScrollbarMouseEnter = function onScrollbarMouseEnter() {\n    on(horizontalScrollbarRef.value, \"scroll\", horizontalScrollbarScroll);\n  };\n  var onScrollbarMouseLeave = function onScrollbarMouseLeave() {\n    off(horizontalScrollbarRef.value, \"scroll\", horizontalScrollbarScroll);\n  };\n  var onTableContentMouseEnter = function onTableContentMouseEnter() {\n    on(tableContentRef.value, \"scroll\", onTableContentScroll);\n    onMouseEnterScrollableArea();\n  };\n  var onTableContentMouseLeave = function onTableContentMouseLeave() {\n    if (!isMousedown) off(tableContentRef.value, \"scroll\", onTableContentScroll);\n    onMouseLeaveScrollableArea();\n  };\n  var onMousedown = function onMousedown() {\n    isMousedown = true;\n  };\n  var onMouseup = function onMouseup() {\n    isMousedown = false;\n    if (!isMouseInScrollableArea) {\n      off(affixHeaderRef.value, \"scroll\", onHeaderScroll);\n      off(tableContentRef.value, \"scroll\", onTableContentScroll);\n    }\n  };\n  var onMouseEnterScrollableArea = function onMouseEnterScrollableArea() {\n    isMouseInScrollableArea = true;\n  };\n  var onMouseLeaveScrollableArea = function onMouseLeaveScrollableArea() {\n    isMouseInScrollableArea = false;\n  };\n  var activatingTouchScrollListenerCleanups = [];\n  var setupElementTouchScrollListener = function setupElementTouchScrollListener(element) {\n    var debounceOffScrollListener = debounce_1(function (listener) {\n      off(element, \"scroll\", listener);\n    }, 200);\n    function onElementTouchScroll() {\n      onHorizontalScroll(element);\n      debounceOffScrollListener(onElementTouchScroll);\n    }\n    function onElementTouchStart(e) {\n      if (e.composedPath().includes(element)) {\n        activatingTouchScrollListenerCleanups.forEach(function (cleanup) {\n          return cleanup();\n        });\n        activatingTouchScrollListenerCleanups.length = 0;\n        on(element, \"scroll\", onElementTouchScroll);\n        debounceOffScrollListener(onElementTouchScroll);\n        activatingTouchScrollListenerCleanups.push(function () {\n          off(element, \"scroll\", onElementTouchScroll);\n        });\n      }\n    }\n    on(element, \"touchstart\", onElementTouchStart);\n    function removeElementTouchScrollListener() {\n      off(element, \"touchstart\", onElementTouchStart);\n    }\n    return {\n      removeElementTouchScrollListener: removeElementTouchScrollListener\n    };\n  };\n  var elementTouchScrollCleanups = [];\n  var cleanupElementTouchScroll = function cleanupElementTouchScroll() {\n    elementTouchScrollCleanups.forEach(function (cleanup) {\n      return cleanup();\n    });\n    elementTouchScrollCleanups.length = 0;\n  };\n  var removeHorizontalScrollListeners = function removeHorizontalScrollListeners() {\n    off(window, \"mousedown\", onMousedown);\n    off(window, \"mouseup\", onMouseup);\n    cleanupElementTouchScroll();\n    if (affixHeaderRef.value) {\n      off(affixHeaderRef.value, \"mouseenter\", onHeaderMouseEnter);\n      off(affixHeaderRef.value, \"mouseleave\", onHeaderMouseLeave);\n    }\n    if (affixFooterRef.value) {\n      off(affixFooterRef.value, \"mouseenter\", onFootMouseEnter);\n      off(affixFooterRef.value, \"mouseleave\", onFootMouseLeave);\n    }\n    if (tableContentRef.value) {\n      off(tableContentRef.value, \"mouseenter\", onTableContentMouseEnter);\n      off(tableContentRef.value, \"mouseleave\", onTableContentMouseLeave);\n    }\n    if (horizontalScrollbarRef.value) {\n      off(horizontalScrollbarRef.value, \"mouseenter\", onScrollbarMouseEnter);\n      off(horizontalScrollbarRef.value, \"mouseleave\", onScrollbarMouseLeave);\n    }\n  };\n  var addHorizontalScrollListeners = function addHorizontalScrollListeners() {\n    on(window, \"mousedown\", onMousedown);\n    on(window, \"mouseup\", onMouseup);\n    removeHorizontalScrollListeners();\n    if (affixHeaderRef.value) {\n      on(affixHeaderRef.value, \"mouseenter\", onHeaderMouseEnter);\n      on(affixHeaderRef.value, \"mouseleave\", onHeaderMouseLeave);\n      var _setupElementTouchScr = setupElementTouchScrollListener(affixHeaderRef.value),\n        removeElementTouchScrollListener = _setupElementTouchScr.removeElementTouchScrollListener;\n      elementTouchScrollCleanups.push(removeElementTouchScrollListener);\n    }\n    if (props.footerAffixedBottom && affixFooterRef.value) {\n      on(affixFooterRef.value, \"mouseenter\", onFootMouseEnter);\n      on(affixFooterRef.value, \"mouseleave\", onFootMouseLeave);\n      var _setupElementTouchScr2 = setupElementTouchScrollListener(affixFooterRef.value),\n        _removeElementTouchScrollListener = _setupElementTouchScr2.removeElementTouchScrollListener;\n      elementTouchScrollCleanups.push(_removeElementTouchScrollListener);\n    }\n    if (props.horizontalScrollAffixedBottom && horizontalScrollbarRef.value) {\n      on(horizontalScrollbarRef.value, \"mouseenter\", onScrollbarMouseEnter);\n      on(horizontalScrollbarRef.value, \"mouseleave\", onScrollbarMouseLeave);\n      var _setupElementTouchScr3 = setupElementTouchScrollListener(horizontalScrollbarRef.value),\n        _removeElementTouchScrollListener2 = _setupElementTouchScr3.removeElementTouchScrollListener;\n      elementTouchScrollCleanups.push(_removeElementTouchScrollListener2);\n    }\n    if ((isAffixed.value || isVirtualScroll.value) && tableContentRef.value) {\n      on(tableContentRef.value, \"mouseenter\", onTableContentMouseEnter);\n      on(tableContentRef.value, \"mouseleave\", onTableContentMouseLeave);\n      var _setupElementTouchScr4 = setupElementTouchScrollListener(tableContentRef.value),\n        _removeElementTouchScrollListener3 = _setupElementTouchScr4.removeElementTouchScrollListener;\n      elementTouchScrollCleanups.push(_removeElementTouchScrollListener3);\n    }\n  };\n  var addVerticalScrollListener = function addVerticalScrollListener() {\n    if (!isAffixed.value && !props.paginationAffixedBottom) return;\n    var timer = setTimeout(function () {\n      if (isAffixed.value || props.paginationAffixedBottom) {\n        on(document, \"scroll\", onDocumentScroll);\n      } else {\n        off(document, \"scroll\", onDocumentScroll);\n      }\n      clearTimeout(timer);\n    });\n  };\n  watch([affixHeaderRef, affixFooterRef, horizontalScrollbarRef, tableContentRef], function () {\n    addHorizontalScrollListeners();\n    onHorizontalScroll();\n    updateAffixHeaderOrFooter();\n  });\n  watch(isAffixed, addVerticalScrollListener);\n  watch(function () {\n    return [props.data, props.columns, props.headerAffixedTop, props.footerAffixedBottom, props.horizontalScrollAffixedBottom];\n  }, function () {\n    onHorizontalScroll();\n  });\n  onBeforeUnmount(function () {\n    off(document, \"scroll\", onDocumentScroll);\n    removeHorizontalScrollListeners();\n    affixHeaderRef.value = null;\n    affixFooterRef.value = null;\n    horizontalScrollbarRef.value = null;\n    tableContentRef.value = null;\n  });\n  var setTableContentRef = function setTableContentRef(tableContent) {\n    tableContentRef.value = tableContent;\n    addVerticalScrollListener();\n  };\n  return {\n    showAffixHeader: showAffixHeader,\n    showAffixFooter: showAffixFooter,\n    showAffixPagination: showAffixPagination,\n    affixHeaderRef: affixHeaderRef,\n    affixFooterRef: affixFooterRef,\n    horizontalScrollbarRef: horizontalScrollbarRef,\n    paginationRef: paginationRef,\n    onHorizontalScroll: onHorizontalScroll,\n    setTableContentRef: setTableContentRef,\n    updateAffixHeaderOrFooter: updateAffixHeaderOrFooter\n  };\n}\nexport { useAffix as default };","map":{"version":3,"names":["useAffix","props","tableContentRef","ref","affixHeaderRef","affixFooterRef","horizontalScrollbarRef","paginationRef","showAffixHeader","showAffixFooter","showAffixPagination","isMousedown","isMouseInScrollableArea","isVirtualScroll","computed","scroll","type","threshold","data","length","isAffixed","headerAffixedTop","footerAffixedBottom","horizontalScrollAffixedBottom","lastScrollLeft","onHorizontalScroll","scrollElement","value","target","left","scrollLeft","toUpdateScrollElement","i","len","isAffixedBottomElementShow","elementRect","tableRect","headerHeight","top","height","getOffsetTop","props2","isBoolean_1","offsetTop","updateAffixHeaderOrFooter","_tableContentRef$valu","_tableContentRef$valu2","_affixFooterRef$value","pos","getBoundingClientRect","headerRect","querySelector","footerRect","headerAffixProps","footerHeight","r","Math","abs","horizontalScrollbarRect","paginationAffixedBottom","pageRect","onDocumentScroll","onFootScroll","onHeaderScroll","horizontalScrollbarScroll","onTableContentScroll","onFootMouseEnter","on","onFootMouseLeave","off","onHeaderMouseEnter","onMouseEnterScrollableArea","onHeaderMouseLeave","onMouseLeaveScrollableArea","onScrollbarMouseEnter","onScrollbarMouseLeave","onTableContentMouseEnter","onTableContentMouseLeave","onMousedown","onMouseup","activatingTouchScrollListenerCleanups","setupElementTouchScrollListener","element","debounceOffScrollListener","debounce_1","listener","onElementTouchScroll","onElementTouchStart","e","composedPath","includes","forEach","cleanup","push","removeElementTouchScrollListener","elementTouchScrollCleanups","cleanupElementTouchScroll","removeHorizontalScrollListeners","window","addHorizontalScrollListeners","_setupElementTouchScr","_setupElementTouchScr2","_removeElementTouchScrollListener","_setupElementTouchScr3","_removeElementTouchScrollListener2","_setupElementTouchScr4","_removeElementTouchScrollListener3","addVerticalScrollListener","timer","setTimeout","document","clearTimeout","watch","columns","onBeforeUnmount","setTableContentRef","tableContent"],"sources":["../../../src/table/hooks/useAffix.ts"],"sourcesContent":["import isBoolean from 'lodash/isBoolean';\nimport { computed, ref, watch, onBeforeUnmount } from 'vue';\nimport { TdBaseTableProps } from '../type';\nimport { on, off } from '../../utils/dom';\nimport { AffixProps } from '../../affix';\nimport debounce from 'lodash/debounce';\n\n/**\n * 1. 表头吸顶（普通表头吸顶 和 虚拟滚动表头吸顶）\n * 2. 表尾吸底\n * 3. 底部滚动条吸底\n * 4. 分页器吸底\n */\nexport default function useAffix(props: TdBaseTableProps) {\n  const tableContentRef = ref<HTMLDivElement>();\n  // 吸顶表头\n  const affixHeaderRef = ref<HTMLDivElement>();\n  // 吸底表尾\n  const affixFooterRef = ref<HTMLDivElement>();\n  // 吸底滚动条\n  const horizontalScrollbarRef = ref<HTMLDivElement>();\n  // 吸底分页器\n  const paginationRef = ref<HTMLDivElement>();\n  // 当表格完全滚动消失在视野时，需要隐藏吸顶表头\n  const showAffixHeader = ref(true);\n  // 当表格完全滚动消失在视野时，需要隐藏吸底尾部\n  const showAffixFooter = ref(true);\n  // 当表格完全滚动消失在视野时，需要隐藏吸底分页器\n  const showAffixPagination = ref(true);\n  // 当鼠标按下拖动内容来滚动时，需要更新表头位置（Windows 按下鼠标横向滚动，滚动结束后，再松开鼠标）\n  let isMousedown = false;\n  let isMouseInScrollableArea = false;\n\n  const isVirtualScroll = computed(\n    () => props.scroll && props.scroll.type === 'virtual' && (props.scroll.threshold || 100) < props.data.length,\n  );\n\n  const isAffixed = computed(\n    () => !!(props.headerAffixedTop || props.footerAffixedBottom || props.horizontalScrollAffixedBottom),\n  );\n\n  let lastScrollLeft = 0;\n  const onHorizontalScroll = (scrollElement?: HTMLElement) => {\n    if (!isAffixed.value && !isVirtualScroll.value) return;\n    let target = scrollElement;\n    if (!target && tableContentRef.value) {\n      lastScrollLeft = 0;\n      target = tableContentRef.value;\n    }\n    if (!target) return;\n    const left = target.scrollLeft;\n    // 如果 lastScrollLeft 等于 left，说明不是横向滚动，不需要更新横向滚动距离\n    if (lastScrollLeft === left) return;\n    lastScrollLeft = left;\n    // 表格内容、吸顶表头、吸底表尾、吸底横向滚动更新\n    const toUpdateScrollElement = [\n      tableContentRef.value,\n      affixHeaderRef.value,\n      affixFooterRef.value,\n      horizontalScrollbarRef.value,\n    ];\n    for (let i = 0, len = toUpdateScrollElement.length; i < len; i++) {\n      if (toUpdateScrollElement[i] && scrollElement !== toUpdateScrollElement[i]) {\n        toUpdateScrollElement[i].scrollLeft = left;\n      }\n    }\n  };\n\n  // 吸底的元素（footer、横向滚动条、分页器）是否显示\n  const isAffixedBottomElementShow = (elementRect: DOMRect, tableRect: DOMRect, headerHeight: number) =>\n    tableRect.top + headerHeight < elementRect.top && elementRect.top > elementRect.height;\n\n  const getOffsetTop = (props: boolean | AffixProps) => {\n    if (isBoolean(props)) return 0;\n    return props.offsetTop || 0;\n  };\n\n  const updateAffixHeaderOrFooter = () => {\n    if (!isAffixed.value && !isVirtualScroll.value && !tableContentRef.value) return;\n    const pos = tableContentRef.value?.getBoundingClientRect();\n    const headerRect = tableContentRef.value?.querySelector('thead')?.getBoundingClientRect();\n    const headerHeight = headerRect?.height || 0;\n    const footerRect = affixFooterRef.value?.getBoundingClientRect();\n    if ((props.headerAffixedTop || isVirtualScroll.value) && affixHeaderRef.value) {\n      const offsetTop = getOffsetTop(props.headerAffixProps || props.headerAffixedTop);\n      const footerHeight = footerRect?.height || 0;\n      let r = Math.abs(pos.top) < pos.height - headerHeight - offsetTop - footerHeight;\n      // 如果是虚拟滚动的表头，只要表头在可视区域内，一律永久显示（虚拟滚动表头 和 吸顶表头可能同时存在）\n      if (isVirtualScroll.value) {\n        r = pos.top > -1 * headerRect.height;\n      }\n      showAffixHeader.value = r;\n    }\n    // 底部内容吸底 和 底部滚动条吸底，不可能同时存在，二选一即可\n    if (props.footerAffixedBottom && affixFooterRef?.value) {\n      showAffixFooter.value = isAffixedBottomElementShow(footerRect, pos, headerHeight);\n    } else if (props.horizontalScrollAffixedBottom && horizontalScrollbarRef?.value) {\n      const horizontalScrollbarRect = horizontalScrollbarRef.value.getBoundingClientRect();\n      showAffixFooter.value = isAffixedBottomElementShow(horizontalScrollbarRect, pos, headerHeight);\n    }\n    if (props.paginationAffixedBottom && paginationRef.value) {\n      const pageRect = paginationRef.value.getBoundingClientRect();\n      showAffixPagination.value = isAffixedBottomElementShow(pageRect, pos, headerHeight);\n    }\n  };\n\n  const onDocumentScroll = () => {\n    updateAffixHeaderOrFooter();\n  };\n\n  const onFootScroll = () => {\n    onHorizontalScroll(affixFooterRef.value);\n  };\n\n  const onHeaderScroll = () => {\n    onHorizontalScroll(affixHeaderRef.value);\n  };\n\n  const horizontalScrollbarScroll = () => {\n    onHorizontalScroll(horizontalScrollbarRef.value);\n  };\n\n  const onTableContentScroll = () => {\n    onHorizontalScroll(tableContentRef.value);\n  };\n\n  const onFootMouseEnter = () => {\n    on(affixFooterRef.value, 'scroll', onFootScroll);\n  };\n\n  const onFootMouseLeave = () => {\n    off(affixFooterRef.value, 'scroll', onFootScroll);\n  };\n\n  const onHeaderMouseEnter = () => {\n    on(affixHeaderRef.value, 'scroll', onHeaderScroll);\n    onMouseEnterScrollableArea();\n  };\n\n  const onHeaderMouseLeave = () => {\n    if (!isMousedown) off(affixHeaderRef.value, 'scroll', onHeaderScroll);\n    onMouseLeaveScrollableArea();\n  };\n\n  const onScrollbarMouseEnter = () => {\n    on(horizontalScrollbarRef.value, 'scroll', horizontalScrollbarScroll);\n  };\n\n  const onScrollbarMouseLeave = () => {\n    off(horizontalScrollbarRef.value, 'scroll', horizontalScrollbarScroll);\n  };\n\n  const onTableContentMouseEnter = () => {\n    on(tableContentRef.value, 'scroll', onTableContentScroll);\n    onMouseEnterScrollableArea();\n  };\n\n  const onTableContentMouseLeave = () => {\n    if (!isMousedown) off(tableContentRef.value, 'scroll', onTableContentScroll);\n    onMouseLeaveScrollableArea();\n  };\n\n  const onMousedown = () => {\n    isMousedown = true;\n  };\n\n  const onMouseup = () => {\n    isMousedown = false;\n    if (!isMouseInScrollableArea) {\n      off(affixHeaderRef.value, 'scroll', onHeaderScroll);\n      off(tableContentRef.value, 'scroll', onTableContentScroll);\n    }\n  };\n\n  const onMouseEnterScrollableArea = () => {\n    isMouseInScrollableArea = true;\n  };\n\n  const onMouseLeaveScrollableArea = () => {\n    isMouseInScrollableArea = false;\n  };\n\n  // 记录激活中的 scroll，在新元素点击时要进行抢占\n  const activatingTouchScrollListenerCleanups: Array<() => void> = [];\n  const setupElementTouchScrollListener = (element: HTMLElement) => {\n    // 思路来源 https://github.com/vueuse/vueuse/blob/main/packages/core/useScroll/index.ts\n    // 兼容不支持 scrollend 但是又存在惯性滑动的场景，例如 safari\n    // 200 毫秒这个默认值是 vueuse 的用法，后面有问题可以再重新考虑\n    const debounceOffScrollListener = debounce((listener) => {\n      off(element, 'scroll', listener);\n    }, 200);\n\n    function onElementTouchScroll() {\n      onHorizontalScroll(element);\n      debounceOffScrollListener(onElementTouchScroll);\n    }\n    function onElementTouchStart(e: UIEvent) {\n      if (e.composedPath().includes(element)) {\n        // 下一次 touch 清理所有的 scroll，不同于 pc 端的 enter，触碰打断是合理的\n        activatingTouchScrollListenerCleanups.forEach((cleanup) => cleanup());\n        activatingTouchScrollListenerCleanups.length = 0;\n        // 即使是相同元素也重新绑定，因为 touch 必定带来滑动停止\n        on(element, 'scroll', onElementTouchScroll);\n        // 有可能触碰了一下，没触发 scroll，也销毁\n        debounceOffScrollListener(onElementTouchScroll);\n        activatingTouchScrollListenerCleanups.push(() => {\n          off(element, 'scroll', onElementTouchScroll);\n        });\n      }\n    }\n\n    on(element, 'touchstart', onElementTouchStart);\n\n    function removeElementTouchScrollListener() {\n      off(element, 'touchstart', onElementTouchStart);\n    }\n\n    return {\n      removeElementTouchScrollListener,\n    };\n  };\n\n  // 清理所有 touch 相关的逻辑\n  const elementTouchScrollCleanups: Array<() => void> = [];\n  const cleanupElementTouchScroll = () => {\n    elementTouchScrollCleanups.forEach((cleanup) => cleanup());\n    elementTouchScrollCleanups.length = 0;\n  };\n\n  const removeHorizontalScrollListeners = () => {\n    off(window, 'mousedown', onMousedown);\n    off(window, 'mouseup', onMouseup);\n\n    cleanupElementTouchScroll();\n    if (affixHeaderRef.value) {\n      off(affixHeaderRef.value, 'mouseenter', onHeaderMouseEnter);\n      off(affixHeaderRef.value, 'mouseleave', onHeaderMouseLeave);\n    }\n    if (affixFooterRef.value) {\n      off(affixFooterRef.value, 'mouseenter', onFootMouseEnter);\n      off(affixFooterRef.value, 'mouseleave', onFootMouseLeave);\n    }\n    if (tableContentRef.value) {\n      off(tableContentRef.value, 'mouseenter', onTableContentMouseEnter);\n      off(tableContentRef.value, 'mouseleave', onTableContentMouseLeave);\n    }\n    if (horizontalScrollbarRef.value) {\n      off(horizontalScrollbarRef.value, 'mouseenter', onScrollbarMouseEnter);\n      off(horizontalScrollbarRef.value, 'mouseleave', onScrollbarMouseLeave);\n    }\n  };\n\n  const addHorizontalScrollListeners = () => {\n    on(window, 'mousedown', onMousedown);\n    on(window, 'mouseup', onMouseup);\n\n    removeHorizontalScrollListeners();\n    if (affixHeaderRef.value) {\n      on(affixHeaderRef.value, 'mouseenter', onHeaderMouseEnter);\n      on(affixHeaderRef.value, 'mouseleave', onHeaderMouseLeave);\n      const { removeElementTouchScrollListener } = setupElementTouchScrollListener(affixHeaderRef.value);\n      elementTouchScrollCleanups.push(removeElementTouchScrollListener);\n    }\n\n    if (props.footerAffixedBottom && affixFooterRef.value) {\n      on(affixFooterRef.value, 'mouseenter', onFootMouseEnter);\n      on(affixFooterRef.value, 'mouseleave', onFootMouseLeave);\n      const { removeElementTouchScrollListener } = setupElementTouchScrollListener(affixFooterRef.value);\n      elementTouchScrollCleanups.push(removeElementTouchScrollListener);\n    }\n\n    if (props.horizontalScrollAffixedBottom && horizontalScrollbarRef.value) {\n      on(horizontalScrollbarRef.value, 'mouseenter', onScrollbarMouseEnter);\n      on(horizontalScrollbarRef.value, 'mouseleave', onScrollbarMouseLeave);\n      const { removeElementTouchScrollListener } = setupElementTouchScrollListener(horizontalScrollbarRef.value);\n      elementTouchScrollCleanups.push(removeElementTouchScrollListener);\n    }\n\n    if ((isAffixed.value || isVirtualScroll.value) && tableContentRef.value) {\n      on(tableContentRef.value, 'mouseenter', onTableContentMouseEnter);\n      on(tableContentRef.value, 'mouseleave', onTableContentMouseLeave);\n      const { removeElementTouchScrollListener } = setupElementTouchScrollListener(tableContentRef.value);\n      elementTouchScrollCleanups.push(removeElementTouchScrollListener);\n    }\n  };\n\n  const addVerticalScrollListener = () => {\n    if (!isAffixed.value && !props.paginationAffixedBottom) return;\n    const timer = setTimeout(() => {\n      if (isAffixed.value || props.paginationAffixedBottom) {\n        on(document, 'scroll', onDocumentScroll);\n      } else {\n        off(document, 'scroll', onDocumentScroll);\n      }\n      clearTimeout(timer);\n    });\n  };\n\n  watch([affixHeaderRef, affixFooterRef, horizontalScrollbarRef, tableContentRef], () => {\n    addHorizontalScrollListeners();\n    onHorizontalScroll();\n    updateAffixHeaderOrFooter();\n  });\n\n  watch(isAffixed, addVerticalScrollListener);\n\n  watch(\n    () => [\n      props.data,\n      props.columns,\n      props.headerAffixedTop,\n      props.footerAffixedBottom,\n      props.horizontalScrollAffixedBottom,\n    ],\n    () => {\n      onHorizontalScroll();\n    },\n  );\n\n  onBeforeUnmount(() => {\n    off(document, 'scroll', onDocumentScroll);\n    removeHorizontalScrollListeners();\n    affixHeaderRef.value = null;\n    affixFooterRef.value = null;\n    horizontalScrollbarRef.value = null;\n    tableContentRef.value = null;\n  });\n\n  const setTableContentRef = (tableContent: HTMLDivElement) => {\n    tableContentRef.value = tableContent;\n    addVerticalScrollListener();\n  };\n\n  return {\n    showAffixHeader,\n    showAffixFooter,\n    showAffixPagination,\n    affixHeaderRef,\n    affixFooterRef,\n    horizontalScrollbarRef,\n    paginationRef,\n    onHorizontalScroll,\n    setTableContentRef,\n    updateAffixHeaderOrFooter,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}