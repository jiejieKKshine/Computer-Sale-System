{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { defineComponent, ref, toRefs, onMounted, onUnmounted, watch, computed, createVNode, mergeProps } from 'vue';\nimport { o as omit_1 } from '../_chunks/dep-88ae49da.mjs';\nimport { i as isString_1 } from '../_chunks/dep-03a7fb6c.mjs';\nimport { i as isFunction_1 } from '../_chunks/dep-06dcbf4c.mjs';\nimport { ImageIcon, ImageErrorIcon } from 'tdesign-icons-vue-next';\nimport observe from '../_common/js/utils/observe.mjs';\nimport { useConfig } from '../config-provider/useConfig.mjs';\nimport { useTNodeJSX, useTNodeDefault } from '../hooks/tnode.mjs';\nimport props from './props.mjs';\nimport { Space } from '../space/index.mjs';\nimport { useImagePreviewUrl } from '../hooks/useImagePreviewUrl.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-aeaef131.mjs';\nimport '../_chunks/dep-88c8d9ed.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-4ec29b23.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-bb899bfd.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../config-provider/type.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../space/space.mjs';\nimport '../_chunks/dep-fa52aa21.mjs';\nimport '../space/props.mjs';\nimport '../hooks/useConfig.mjs';\nimport '../hooks/slot.mjs';\nimport '../_chunks/dep-889e457b.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-4a990ea3.mjs';\nimport '../_chunks/dep-5d3f7c0e.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../space/type.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nvar _Image = defineComponent({\n  name: \"TImage\",\n  props: props,\n  setup: function setup(props2) {\n    var divRef = ref(null);\n    var imgRef = ref(null);\n    var io = null;\n    var _toRefs = toRefs(props2),\n      src = _toRefs.src;\n    var renderTNodeJSX = useTNodeJSX();\n    onMounted(function () {\n      var _imgRef$value;\n      if ((_imgRef$value = imgRef.value) !== null && _imgRef$value !== void 0 && _imgRef$value.complete && !props2.lazy) {\n        triggerHandleLoad();\n      }\n      if (!props2.lazy || !divRef.value) return;\n      var ioObserver = observe(divRef.value, null, handleLoadImage, 0);\n      io = ioObserver;\n    });\n    onUnmounted(function () {\n      divRef.value && io && io.unobserve(divRef.value);\n    });\n    var _useConfig = useConfig(\"image\"),\n      classPrefix = _useConfig.classPrefix,\n      globalConfig = _useConfig.globalConfig;\n    var imageStrSrc = ref(src.value);\n    watch([src, globalConfig], function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        src2 = _ref2[0],\n        globalConfig2 = _ref2[1];\n      var _ref3 = globalConfig2 || {},\n        replaceImageSrc = _ref3.replaceImageSrc;\n      var tmpUrl = isFunction_1(replaceImageSrc) ? replaceImageSrc(props2) : src2;\n      if (tmpUrl === imageStrSrc.value && imageStrSrc.value) return;\n      imageStrSrc.value = tmpUrl;\n    }, {\n      immediate: true\n    });\n    var _useImagePreviewUrl = useImagePreviewUrl(imageStrSrc),\n      previewUrl = _useImagePreviewUrl.previewUrl;\n    watch([previewUrl], function () {\n      hasError.value = false;\n      isLoaded.value = false;\n    });\n    var shouldLoad = ref(!props2.lazy);\n    var handleLoadImage = function handleLoadImage() {\n      shouldLoad.value = true;\n    };\n    var isLoaded = ref(false);\n    var handleLoad = function handleLoad(e) {\n      var _props2$onLoad;\n      isLoaded.value = true;\n      (_props2$onLoad = props2.onLoad) === null || _props2$onLoad === void 0 || _props2$onLoad.call(props2, {\n        e: e\n      });\n    };\n    var triggerHandleLoad = function triggerHandleLoad() {\n      var loadEvent = new Event(\"load\");\n      Object.defineProperty(loadEvent, \"target\", {\n        value: imgRef.value,\n        enumerable: true\n      });\n      handleLoad(loadEvent);\n    };\n    var hasError = ref(false);\n    var handleError = function handleError(e) {\n      var _props2$onError;\n      hasError.value = true;\n      (_props2$onError = props2.onError) === null || _props2$onError === void 0 || _props2$onError.call(props2, {\n        e: e\n      });\n      if (props2.fallback) {\n        imageStrSrc.value = props2.fallback;\n        hasError.value = false;\n      }\n    };\n    var hasMouseEvent = computed(function () {\n      return props2.overlayTrigger === \"hover\";\n    });\n    var imageClasses = computed(function () {\n      return [\"\".concat(classPrefix.value, \"-image\"), \"\".concat(classPrefix.value, \"-image--fit-\").concat(props2.fit), \"\".concat(classPrefix.value, \"-image--position-\").concat(props2.position)];\n    });\n    var shouldShowOverlay = ref(!hasMouseEvent.value);\n    var handleToggleOverlay = function handleToggleOverlay() {\n      if (hasMouseEvent.value) {\n        shouldShowOverlay.value = !shouldShowOverlay.value;\n      }\n    };\n    var renderPlaceholder = function renderPlaceholder() {\n      var placeholder = renderTNodeJSX(\"placeholder\");\n      if (!placeholder) return null;\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image__placeholder\")\n      }, [placeholder]);\n    };\n    var renderGalleryShadow = function renderGalleryShadow() {\n      if (!props2.gallery) return null;\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image__gallery-shadow\")\n      }, null);\n    };\n    var renderOverlay = function renderOverlay() {\n      var overlayContent = renderTNodDefault(\"overlayContent\");\n      if (!overlayContent) return null;\n      return createVNode(\"div\", {\n        \"class\": [\"\".concat(classPrefix.value, \"-image__overlay-content\"), !shouldShowOverlay.value && \"\".concat(classPrefix.value, \"-image__overlay-content--hidden\")]\n      }, [overlayContent]);\n    };\n    function renderImageSrcset() {\n      return createVNode(\"picture\", null, [Object.entries(props2.srcset).map(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n          type = _ref5[0],\n          url = _ref5[1];\n        return createVNode(\"source\", {\n          \"type\": type,\n          \"srcset\": url\n        }, null);\n      }), renderImage()]);\n    }\n    function renderImage() {\n      var url = isString_1(imageStrSrc.value) ? imageStrSrc.value : previewUrl.value;\n      return createVNode(\"img\", {\n        \"ref\": imgRef,\n        \"src\": url,\n        \"onError\": handleError,\n        \"onLoad\": handleLoad,\n        \"class\": imageClasses.value,\n        \"alt\": props2.alt,\n        \"referrerpolicy\": props2.referrerpolicy\n      }, null);\n    }\n    var renderTNodDefault = useTNodeDefault();\n    return function () {\n      return createVNode(\"div\", mergeProps({\n        \"ref\": divRef,\n        \"class\": [\"\".concat(classPrefix.value, \"-image__wrapper\"), \"\".concat(classPrefix.value, \"-image__wrapper--shape-\").concat(props2.shape), props2.gallery && \"\".concat(classPrefix.value, \"-image__wrapper--gallery\"), hasMouseEvent.value && \"\".concat(classPrefix.value, \"-image__wrapper--need-hover\")],\n        \"onMouseenter\": handleToggleOverlay,\n        \"onMouseleave\": handleToggleOverlay\n      }, omit_1(props2, [\"src\", \"alt\", \"fit\", \"position\", \"shape\", \"placeholder\", \"loading\", \"error\", \"overlayTrigger\", \"overlayContent\", \"lazy\", \"gallery\", \"onLoad\", \"onError\"])), [renderPlaceholder(), renderGalleryShadow(), (hasError.value || !shouldLoad.value) && createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image\")\n      }, null), !(hasError.value || !shouldLoad.value) && (props2.srcset && Object.keys(props2.srcset).length ? renderImageSrcset() : renderImage()), !(hasError.value || !shouldLoad.value) && !isLoaded.value && createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image__loading\")\n      }, [renderTNodeJSX(\"loading\") || createVNode(Space, {\n        \"direction\": \"vertical\",\n        \"size\": 8,\n        \"align\": \"center\"\n      }, {\n        \"default\": function _default() {\n          return [createVNode(ImageIcon, {\n            \"size\": \"24px\"\n          }, null), isString_1(props2.loading) ? props2.loading : globalConfig.value.loadingText];\n        }\n      })]), hasError.value && createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image__error\")\n      }, [renderTNodDefault(\"error\", {\n        defaultNode: createVNode(Space, {\n          \"direction\": \"vertical\",\n          \"size\": 8,\n          \"align\": \"center\"\n        }, {\n          \"default\": function _default() {\n            return [createVNode(ImageErrorIcon, {\n              \"size\": \"24px\"\n            }, null), isString_1(props2.error) ? props2.error : globalConfig.value.errorText];\n          }\n        })\n      })]), renderOverlay()]);\n    };\n  }\n});\nexport { _Image as default };","map":{"version":3,"names":["_Image","defineComponent","name","props","setup","props2","divRef","ref","imgRef","io","_toRefs","toRefs","src","renderTNodeJSX","useTNodeJSX","onMounted","_imgRef$value","value","complete","lazy","triggerHandleLoad","ioObserver","observe","handleLoadImage","onUnmounted","unobserve","_useConfig","useConfig","classPrefix","globalConfig","imageStrSrc","watch","_ref","_ref2","_slicedToArray","src2","globalConfig2","_ref3","replaceImageSrc","tmpUrl","isFunction_1","immediate","_useImagePreviewUrl","useImagePreviewUrl","previewUrl","hasError","isLoaded","shouldLoad","handleLoad","e","_props2$onLoad","onLoad","call","loadEvent","Event","Object","defineProperty","enumerable","handleError","_props2$onError","onError","fallback","hasMouseEvent","computed","overlayTrigger","imageClasses","concat","fit","position","shouldShowOverlay","handleToggleOverlay","renderPlaceholder","placeholder","createVNode","renderGalleryShadow","gallery","renderOverlay","overlayContent","renderTNodDefault","renderImageSrcset","entries","srcset","map","_ref4","_ref5","type","url","renderImage","isString_1","alt","referrerpolicy","useTNodeDefault","mergeProps","shape","omit_1","keys","length","Space","_default","ImageIcon","loading","loadingText","defaultNode","error","errorText"],"sources":["../../src/image/image.tsx"],"sourcesContent":["import { defineComponent, ref, onMounted, computed, onUnmounted, watch, toRefs } from 'vue';\nimport omit from 'lodash/omit';\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\nimport { ImageErrorIcon, ImageIcon } from 'tdesign-icons-vue-next';\nimport observe from '../_common/js/utils/observe';\nimport { useConfig } from '../config-provider/useConfig';\nimport { useTNodeDefault, useTNodeJSX } from '../hooks/tnode';\nimport props from './props';\nimport Space from '../space';\nimport { useImagePreviewUrl } from '../hooks/useImagePreviewUrl';\n\nexport default defineComponent({\n  name: 'TImage',\n  props,\n  setup(props) {\n    const divRef = ref<HTMLElement>(null);\n    const imgRef = ref<HTMLImageElement>(null);\n    let io: IntersectionObserver = null;\n\n    const { src } = toRefs(props);\n\n    const renderTNodeJSX = useTNodeJSX();\n\n    onMounted(() => {\n      //在nuxt3中img的onload事件会失效\n      if (imgRef.value?.complete && !props.lazy) {\n        triggerHandleLoad();\n      }\n\n      if (!props.lazy || !divRef.value) return;\n\n      const ioObserver = observe(divRef.value, null, handleLoadImage, 0);\n      io = ioObserver;\n    });\n    onUnmounted(() => {\n      divRef.value && io && io.unobserve(divRef.value);\n    });\n\n    const { classPrefix, globalConfig } = useConfig('image');\n\n    // replace image url\n    const imageStrSrc = ref(src.value);\n\n    watch(\n      [src, globalConfig],\n      ([src, globalConfig]) => {\n        const { replaceImageSrc } = globalConfig || {};\n        const tmpUrl = isFunction(replaceImageSrc) ? replaceImageSrc(props) : src;\n        if (tmpUrl === imageStrSrc.value && imageStrSrc.value) return;\n        imageStrSrc.value = tmpUrl;\n      },\n      { immediate: true },\n    );\n\n    const { previewUrl } = useImagePreviewUrl(imageStrSrc);\n\n    watch([previewUrl], () => {\n      hasError.value = false;\n      isLoaded.value = false;\n    });\n\n    const shouldLoad = ref(!props.lazy);\n    const handleLoadImage = () => {\n      shouldLoad.value = true;\n    };\n\n    const isLoaded = ref(false);\n    const handleLoad = (e: Event) => {\n      isLoaded.value = true;\n      props.onLoad?.({ e });\n    };\n    const triggerHandleLoad = () => {\n      const loadEvent = new Event('load');\n      Object.defineProperty(loadEvent, 'target', {\n        value: imgRef.value,\n        enumerable: true,\n      });\n      handleLoad(loadEvent);\n    };\n    const hasError = ref(false);\n    const handleError = (e: Event) => {\n      hasError.value = true;\n      props.onError?.({ e });\n      if (props.fallback) {\n        imageStrSrc.value = props.fallback;\n        hasError.value = false;\n      }\n    };\n\n    const hasMouseEvent = computed(() => {\n      return props.overlayTrigger === 'hover';\n    });\n\n    const imageClasses = computed(() => [\n      `${classPrefix.value}-image`,\n      `${classPrefix.value}-image--fit-${props.fit}`,\n      `${classPrefix.value}-image--position-${props.position}`,\n    ]);\n\n    const shouldShowOverlay = ref(!hasMouseEvent.value);\n    const handleToggleOverlay = () => {\n      if (hasMouseEvent.value) {\n        shouldShowOverlay.value = !shouldShowOverlay.value;\n      }\n    };\n\n    const renderPlaceholder = () => {\n      const placeholder = renderTNodeJSX('placeholder');\n      if (!placeholder) return null;\n      return <div class={`${classPrefix.value}-image__placeholder`}>{placeholder}</div>;\n    };\n\n    const renderGalleryShadow = () => {\n      if (!props.gallery) return null;\n      return <div class={`${classPrefix.value}-image__gallery-shadow`} />;\n    };\n\n    const renderOverlay = () => {\n      const overlayContent = renderTNodDefault('overlayContent');\n      if (!overlayContent) return null;\n      return (\n        <div\n          class={[\n            `${classPrefix.value}-image__overlay-content`,\n            !shouldShowOverlay.value && `${classPrefix.value}-image__overlay-content--hidden`,\n          ]}\n        >\n          {overlayContent}\n        </div>\n      );\n    };\n\n    function renderImageSrcset() {\n      return (\n        <picture>\n          {Object.entries(props.srcset).map(([type, url]) => (\n            <source type={type} srcset={url} />\n          ))}\n          {renderImage()}\n        </picture>\n      );\n    }\n\n    function renderImage() {\n      // string | File\n      const url = isString(imageStrSrc.value) ? imageStrSrc.value : previewUrl.value;\n      return (\n        <img\n          ref={imgRef}\n          src={url}\n          onError={handleError}\n          onLoad={handleLoad}\n          class={imageClasses.value}\n          alt={props.alt}\n          referrerpolicy={props.referrerpolicy}\n        />\n      );\n    }\n\n    const renderTNodDefault = useTNodeDefault();\n\n    return () => {\n      return (\n        <div\n          ref={divRef}\n          class={[\n            `${classPrefix.value}-image__wrapper`,\n            `${classPrefix.value}-image__wrapper--shape-${props.shape}`,\n            props.gallery && `${classPrefix.value}-image__wrapper--gallery`,\n            hasMouseEvent.value && `${classPrefix.value}-image__wrapper--need-hover`,\n          ]}\n          onMouseenter={handleToggleOverlay}\n          onMouseleave={handleToggleOverlay}\n          {...omit(props, [\n            'src',\n            'alt',\n            'fit',\n            'position',\n            'shape',\n            'placeholder',\n            'loading',\n            'error',\n            'overlayTrigger',\n            'overlayContent',\n            'lazy',\n            'gallery',\n            'onLoad',\n            'onError',\n          ])}\n        >\n          {renderPlaceholder()}\n          {renderGalleryShadow()}\n\n          {(hasError.value || !shouldLoad.value) && <div class={`${classPrefix.value}-image`} />}\n          {!(hasError.value || !shouldLoad.value) &&\n            (props.srcset && Object.keys(props.srcset).length ? renderImageSrcset() : renderImage())}\n          {!(hasError.value || !shouldLoad.value) && !isLoaded.value && (\n            <div class={`${classPrefix.value}-image__loading`}>\n              {renderTNodeJSX('loading') || (\n                <Space direction=\"vertical\" size={8} align=\"center\">\n                  <ImageIcon size=\"24px\" />\n                  {isString(props.loading) ? props.loading : globalConfig.value.loadingText}\n                </Space>\n              )}\n            </div>\n          )}\n\n          {hasError.value && (\n            <div class={`${classPrefix.value}-image__error`}>\n              {renderTNodDefault('error', {\n                defaultNode: (\n                  <Space direction=\"vertical\" size={8} align=\"center\">\n                    <ImageErrorIcon size=\"24px\" />\n                    {isString(props.error) ? props.error : globalConfig.value.errorText}\n                  </Space>\n                ),\n              })}\n            </div>\n          )}\n\n          {renderOverlay()}\n        </div>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}