{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nvar hiddenTextarea;\nvar HIDDEN_TEXTAREA_STYLE = \"\\n  min-height:0 !important;\\n  max-height:none !important;\\n  height:0 !important;\\n  visibility:hidden !important;\\n  overflow-y:hidden !important;\\n  position:absolute !important;\\n  z-index:-1000 !important;\\n  top:0 !important;\\n  right:0 !important\\n\";\nvar SIZING_PROPS = [\"letter-spacing\", \"line-height\", \"padding-top\", \"padding-bottom\", \"font-family\", \"font-weight\", \"font-size\", \"font-variant\", \"text-rendering\", \"text-transform\", \"width\", \"text-indent\", \"padding-left\", \"padding-right\", \"border-width\", \"box-sizing\"];\nfunction calculateNodeStyling(targetElement) {\n  if (typeof window === \"undefined\" || !targetElement) return;\n  var style = window.getComputedStyle(targetElement);\n  var boxSizing = style.getPropertyValue(\"box-sizing\") || style.getPropertyValue(\"-moz-box-sizing\") || style.getPropertyValue(\"-webkit-box-sizing\");\n  var paddingSize = parseFloat(style.getPropertyValue(\"padding-bottom\")) + parseFloat(style.getPropertyValue(\"padding-top\"));\n  var borderSize = parseFloat(style.getPropertyValue(\"border-bottom-width\")) + parseFloat(style.getPropertyValue(\"border-top-width\"));\n  var sizingStyle = SIZING_PROPS.map(function (name) {\n    return \"\".concat(name, \":\").concat(style.getPropertyValue(name));\n  }).join(\";\");\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize,\n    boxSizing: boxSizing\n  };\n}\nfunction calcTextareaHeight(targetElement) {\n  var minRows = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var maxRows = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement(\"textarea\");\n    document.body.appendChild(hiddenTextarea);\n  }\n  var _calculateNodeStyling = calculateNodeStyling(targetElement),\n    paddingSize = _calculateNodeStyling.paddingSize,\n    borderSize = _calculateNodeStyling.borderSize,\n    boxSizing = _calculateNodeStyling.boxSizing,\n    sizingStyle = _calculateNodeStyling.sizingStyle;\n  hiddenTextarea.setAttribute(\"style\", \"\".concat(sizingStyle, \";\").concat(HIDDEN_TEXTAREA_STYLE));\n  hiddenTextarea.value = targetElement.value || targetElement.placeholder || \"\";\n  var height = hiddenTextarea.scrollHeight;\n  var result = {};\n  if (boxSizing === \"border-box\") {\n    height += borderSize;\n  } else if (boxSizing === \"content-box\") {\n    height -= paddingSize;\n  }\n  hiddenTextarea.value = \"\";\n  var singleRowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  if (minRows !== null) {\n    var minHeight = singleRowHeight * minRows;\n    if (boxSizing === \"border-box\") {\n      minHeight = minHeight + paddingSize + borderSize;\n    }\n    height = Math.max(minHeight, height);\n    result.minHeight = \"\".concat(minHeight, \"px\");\n  }\n  if (maxRows !== null) {\n    var maxHeight = singleRowHeight * maxRows;\n    if (boxSizing === \"border-box\") {\n      maxHeight = maxHeight + paddingSize + borderSize;\n    }\n    height = Math.min(maxHeight, height);\n  }\n  result.height = \"\".concat(height, \"px\");\n  hiddenTextarea.parentNode && hiddenTextarea.parentNode.removeChild(hiddenTextarea);\n  hiddenTextarea = null;\n  return result;\n}\nexport { calcTextareaHeight as default };","map":{"version":3,"names":["hiddenTextarea","HIDDEN_TEXTAREA_STYLE","SIZING_PROPS","calculateNodeStyling","targetElement","window","style","getComputedStyle","boxSizing","getPropertyValue","paddingSize","parseFloat","borderSize","sizingStyle","map","name","concat","join","calcTextareaHeight","minRows","arguments","length","undefined","maxRows","document","createElement","body","appendChild","_calculateNodeStyling","setAttribute","value","placeholder","height","scrollHeight","result","singleRowHeight","minHeight","Math","max","maxHeight","min","parentNode","removeChild"],"sources":["../../src/textarea/calcTextareaHeight.ts"],"sourcesContent":["/**\n * Thanks to https://github.com/ElemeFE/element/blob/dev/packages/input/src/calcTextareaHeight.js\n */\n\nimport { CSSProperties } from 'vue';\n\ntype RowsType = number | null;\n\nlet hiddenTextarea: HTMLTextAreaElement;\n\nconst HIDDEN_TEXTAREA_STYLE = `\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow-y:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n`;\n\nconst SIZING_PROPS = [\n  'letter-spacing',\n  'line-height',\n  'padding-top',\n  'padding-bottom',\n  'font-family',\n  'font-weight',\n  'font-size',\n  'font-variant',\n  'text-rendering',\n  'text-transform',\n  'width',\n  'text-indent',\n  'padding-left',\n  'padding-right',\n  'border-width',\n  'box-sizing',\n];\n\nfunction calculateNodeStyling(targetElement: HTMLTextAreaElement) {\n  if (typeof window === 'undefined' || !targetElement) return;\n\n  const style = window.getComputedStyle(targetElement);\n\n  const boxSizing =\n    style.getPropertyValue('box-sizing') ||\n    style.getPropertyValue('-moz-box-sizing') ||\n    style.getPropertyValue('-webkit-box-sizing');\n\n  const paddingSize =\n    parseFloat(style.getPropertyValue('padding-bottom')) + parseFloat(style.getPropertyValue('padding-top'));\n\n  const borderSize =\n    parseFloat(style.getPropertyValue('border-bottom-width')) + parseFloat(style.getPropertyValue('border-top-width'));\n\n  const sizingStyle = SIZING_PROPS.map((name) => `${name}:${style.getPropertyValue(name)}`).join(';');\n\n  return {\n    sizingStyle,\n    paddingSize,\n    borderSize,\n    boxSizing,\n  };\n}\n\nexport default function calcTextareaHeight(\n  targetElement: HTMLTextAreaElement,\n  minRows: RowsType = 1,\n  maxRows: RowsType = null,\n) {\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    document.body.appendChild(hiddenTextarea);\n  }\n\n  const { paddingSize, borderSize, boxSizing, sizingStyle } = calculateNodeStyling(targetElement);\n\n  hiddenTextarea.setAttribute('style', `${sizingStyle};${HIDDEN_TEXTAREA_STYLE}`);\n  hiddenTextarea.value = targetElement.value || targetElement.placeholder || '';\n\n  let height = hiddenTextarea.scrollHeight;\n  const result: CSSProperties = {};\n\n  if (boxSizing === 'border-box') {\n    height += borderSize;\n  } else if (boxSizing === 'content-box') {\n    height -= paddingSize;\n  }\n\n  hiddenTextarea.value = '';\n  const singleRowHeight = hiddenTextarea.scrollHeight - paddingSize;\n\n  if (minRows !== null) {\n    let minHeight = singleRowHeight * minRows;\n    if (boxSizing === 'border-box') {\n      minHeight = minHeight + paddingSize + borderSize;\n    }\n    height = Math.max(minHeight, height);\n    result.minHeight = `${minHeight}px`;\n  }\n  if (maxRows !== null) {\n    let maxHeight = singleRowHeight * maxRows;\n    if (boxSizing === 'border-box') {\n      maxHeight = maxHeight + paddingSize + borderSize;\n    }\n    height = Math.min(maxHeight, height);\n  }\n  result.height = `${height}px`;\n  hiddenTextarea.parentNode && hiddenTextarea.parentNode.removeChild(hiddenTextarea);\n  hiddenTextarea = null;\n  return result;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}