{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { i as isFunction_1 } from '../../../_chunks/dep-06dcbf4c.mjs';\nimport { i as isNumber_1 } from '../../../_chunks/dep-889e457b.mjs';\nimport { g as get_1 } from '../../../_chunks/dep-ae202bc0.mjs';\nimport '../../../_chunks/dep-eca422c3.mjs';\nimport '../../../_chunks/dep-bf7257e7.mjs';\nimport '../../../_chunks/dep-4659d73b.mjs';\nimport '../../../_chunks/dep-2b09875b.mjs';\nimport '../../../_chunks/dep-cda4f568.mjs';\nimport '../../../_chunks/dep-29ef8419.mjs';\nimport '../../../_chunks/dep-aeaef131.mjs';\nimport '../../../_chunks/dep-eae2a67e.mjs';\nimport '../../../_chunks/dep-626c497d.mjs';\nimport '../../../_chunks/dep-ab4bb9b8.mjs';\nimport '../../../_chunks/dep-6ab5363f.mjs';\nimport '../../../_chunks/dep-6dc3d0e1.mjs';\nimport '../../../_chunks/dep-76958824.mjs';\nimport '../../../_chunks/dep-e9841b9e.mjs';\nimport '../../../_chunks/dep-7932c2e8.mjs';\nfunction filterDataByIds() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var ids = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var byId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"id\";\n  return data.filter(function () {\n    var d = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return ids.includes(d[byId]);\n  });\n}\nvar SCROLL_DIRECTION = /* @__PURE__ */function (SCROLL_DIRECTION2) {\n  SCROLL_DIRECTION2[\"X\"] = \"x\";\n  SCROLL_DIRECTION2[\"Y\"] = \"y\";\n  SCROLL_DIRECTION2[\"UNKNOWN\"] = \"unknown\";\n  return SCROLL_DIRECTION2;\n}(SCROLL_DIRECTION || {});\nvar preScrollLeft;\nvar preScrollTop;\nvar getScrollDirection = function getScrollDirection(scrollLeft, scrollTop) {\n  var direction = \"unknown\" /* UNKNOWN */;\n  if (preScrollTop !== scrollTop) {\n    direction = \"y\" /* Y */;\n  } else if (preScrollLeft !== scrollLeft) {\n    direction = \"x\" /* X */;\n  }\n  preScrollTop = scrollTop;\n  preScrollLeft = scrollLeft;\n  return direction;\n};\nfunction isRowSelectedDisabled(selectColumn, row, rowIndex) {\n  if (!selectColumn) return false;\n  var disabled = isFunction_1(selectColumn.disabled) ? selectColumn.disabled({\n    row: row,\n    rowIndex: rowIndex\n  }) : selectColumn.disabled;\n  if (selectColumn.checkProps) {\n    if (isFunction_1(selectColumn.checkProps)) {\n      disabled = disabled || selectColumn.checkProps({\n        row: row,\n        rowIndex: rowIndex\n      }).disabled;\n    } else if (selectColumn.checkProps === \"object\") {\n      disabled = disabled || selectColumn.checkProps.disabled;\n    }\n  }\n  return !!disabled;\n}\nfunction getColWidthAttr(col, attrKey) {\n  var attr = col[attrKey];\n  return isNumber_1(attr) ? attr : parseFloat(attr);\n}\nfunction getEditableKeysMap(keys, list, rowKey) {\n  var map = {};\n  for (var i = 0, len = list.length; i < len; i++) {\n    var rowValue = get_1(list[i], rowKey);\n    if (keys.includes(rowValue)) {\n      map[rowValue] = true;\n    }\n  }\n  return map;\n}\nfunction getColumnDataByKey(columns, colKey) {\n  for (var i = 0, len = columns.length; i < len; i++) {\n    var _columns$i$children;\n    if (columns[i].colKey === colKey) return columns[i];\n    if ((_columns$i$children = columns[i].children) !== null && _columns$i$children !== void 0 && _columns$i$children.length) {\n      var t = getColumnDataByKey(columns[i].children, colKey);\n      if (t) return t;\n    }\n  }\n  return null;\n}\nfunction getColumnIndexByKey(columns, colKey) {\n  for (var i = 0, len = columns.length; i < len; i++) {\n    var _columns$i$children2;\n    if (columns[i].colKey === colKey) {\n      return i;\n    }\n    if ((_columns$i$children2 = columns[i].children) !== null && _columns$i$children2 !== void 0 && _columns$i$children2.length) {\n      var t = getColumnDataByKey(columns[i].children, colKey);\n      if (t) return i;\n    }\n  }\n  return -1;\n}\nfunction getColumnsResetValue(columns) {\n  var resetValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  for (var i = 0, len = columns.length; i < len; i++) {\n    var _col$children;\n    var col = columns[i];\n    if (col.filter && \"resetValue\" in col.filter) {\n      resetValue[col.colKey] = col.filter.resetValue;\n    }\n    if ((_col$children = col.children) !== null && _col$children !== void 0 && _col$children.length) {\n      getColumnsResetValue(col.children, resetValue);\n    }\n  }\n  return resetValue;\n}\nexport { SCROLL_DIRECTION, filterDataByIds, getColWidthAttr, getColumnDataByKey, getColumnIndexByKey, getColumnsResetValue, getEditableKeysMap, getScrollDirection, isRowSelectedDisabled };","map":{"version":3,"names":["filterDataByIds","data","arguments","length","undefined","ids","byId","filter","d","includes","SCROLL_DIRECTION","SCROLL_DIRECTION2","preScrollLeft","preScrollTop","getScrollDirection","scrollLeft","scrollTop","direction","isRowSelectedDisabled","selectColumn","row","rowIndex","disabled","isFunction_1","checkProps","getColWidthAttr","col","attrKey","attr","isNumber_1","parseFloat","getEditableKeysMap","keys","list","rowKey","map","i","len","rowValue","get_1","getColumnDataByKey","columns","colKey","_columns$i$children","children","t","getColumnIndexByKey","_columns$i$children2","getColumnsResetValue","resetValue","_col$children"],"sources":["../../../../src/_common/js/table/utils.ts"],"sourcesContent":["import isFunction from 'lodash/isFunction';\nimport isNumber from 'lodash/isNumber';\nimport get from 'lodash/get';\nimport { BaseTableCol } from './types';\n\nexport function filterDataByIds(\n  data: Array<object> = [],\n  ids: Array<string | number> = [],\n  byId = 'id',\n): Array<object> {\n  return data.filter((d: Record<string, any> = {}) => ids.includes(d[byId]));\n}\n\nexport enum SCROLL_DIRECTION {\n  X = 'x',\n  Y = 'y',\n  UNKNOWN = 'unknown',\n}\n\nlet preScrollLeft: any;\nlet preScrollTop: any;\n\nexport const getScrollDirection = (scrollLeft: number, scrollTop: number): SCROLL_DIRECTION => {\n  let direction = SCROLL_DIRECTION.UNKNOWN;\n  if (preScrollTop !== scrollTop) {\n    direction = SCROLL_DIRECTION.Y;\n  } else if (preScrollLeft !== scrollLeft) {\n    direction = SCROLL_DIRECTION.X;\n  }\n  preScrollTop = scrollTop;\n  preScrollLeft = scrollLeft;\n  return direction;\n};\n\nexport function isRowSelectedDisabled(\n  selectColumn: { [key: string]: any },\n  row: Record<string, any>,\n  rowIndex: number,\n): boolean {\n  if (!selectColumn) return false;\n  let disabled = isFunction(selectColumn.disabled) ? selectColumn.disabled({ row, rowIndex }) : selectColumn.disabled;\n  if (selectColumn.checkProps) {\n    if (isFunction(selectColumn.checkProps)) {\n      disabled = disabled || selectColumn.checkProps({ row, rowIndex }).disabled;\n    } else if (selectColumn.checkProps === 'object') {\n      disabled = disabled || selectColumn.checkProps.disabled;\n    }\n  }\n  return !!disabled;\n}\n\n// 获取列属性\nexport function getColWidthAttr<T extends BaseTableCol<T>>(col: T, attrKey: 'width' | 'minWidth') {\n  const attr = col[attrKey];\n  return isNumber(attr) ? attr : parseFloat(attr);\n}\n\nexport function getEditableKeysMap(keys: Array<string | number>, list: any[], rowKey: string) {\n  const map: { [key: string | number]: boolean } = {};\n  for (let i = 0, len = list.length; i < len; i++) {\n    const rowValue = get(list[i], rowKey);\n    if (keys.includes(rowValue)) {\n      map[rowValue] = true;\n    }\n  }\n  return map;\n}\n\nexport function getColumnDataByKey(columns: any[], colKey: string): any {\n  for (let i = 0, len = columns.length; i < len; i++) {\n    if (columns[i].colKey === colKey) return columns[i];\n    if (columns[i].children?.length) {\n      const t = getColumnDataByKey(columns[i].children, colKey);\n      if (t) return t;\n    }\n  }\n  return null;\n}\n\nexport function getColumnIndexByKey(columns: any[], colKey: string): number {\n  for (let i = 0, len = columns.length; i < len; i++) {\n    if (columns[i].colKey === colKey) {\n      return i;\n    }\n    if (columns[i].children?.length) {\n      const t = getColumnDataByKey(columns[i].children, colKey);\n      if (t) return i;\n    }\n  }\n  return -1;\n}\n\nexport function getColumnsResetValue(columns: any[], resetValue: { [key: string]: any } = {}) {\n  for (let i = 0, len = columns.length; i < len; i++) {\n    const col = columns[i];\n    if (col.filter && 'resetValue' in col.filter) {\n      // eslint-disable-next-line no-param-reassign\n      resetValue[col.colKey] = col.filter.resetValue;\n    }\n    if (col.children?.length) {\n      getColumnsResetValue(col.children, resetValue);\n    }\n  }\n  return resetValue;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}