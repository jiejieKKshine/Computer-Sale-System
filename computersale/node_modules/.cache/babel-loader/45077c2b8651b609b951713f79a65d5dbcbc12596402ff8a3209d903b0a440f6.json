{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _objectWithoutProperties } from '../_chunks/dep-5d3f7c0e.mjs';\nimport { _ as _toConsumableArray } from '../_chunks/dep-4a990ea3.mjs';\nimport { _ as _asyncToGenerator, r as regenerator } from '../_chunks/dep-0d047dce.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-5efe53d1.mjs';\nimport { _ as _defineProperty } from '../_chunks/dep-fa52aa21.mjs';\nimport { defineComponent, toRefs, ref, computed, provide, nextTick, watch, createVNode, mergeProps } from 'vue';\nimport { p as pick_1 } from '../_chunks/dep-4de7e2ca.mjs';\nimport { i as isArray_1 } from '../_chunks/dep-eae2a67e.mjs';\nimport { i as isFunction_1 } from '../_chunks/dep-06dcbf4c.mjs';\nimport { d as debounce_1 } from '../_chunks/dep-5993931e.mjs';\nimport { c as cloneDeep_1 } from '../_chunks/dep-bb899bfd.mjs';\nimport { g as get_1 } from '../_chunks/dep-ae202bc0.mjs';\nimport { i as intersection_1 } from '../_chunks/dep-64c2053b.mjs';\nimport FakeArrow from '../common-components/fake-arrow.mjs';\nimport { SelectInput } from '../select-input/index.mjs';\nimport SelectPanel from './select-panel.mjs';\nimport props from './props.mjs';\nimport { useDisabled } from '../hooks/useDisabled.mjs';\nimport { useReadonly } from '../hooks/useReadonly.mjs';\nimport useDefaultValue from '../hooks/useDefaultValue.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport { getSingleContent, getMultipleContent, selectInjectKey } from './helper.mjs';\nimport { useSelectOptions } from './hooks/useSelectOptions.mjs';\nimport useKeyboardControl from './hooks/useKeyboardControl.mjs';\nimport { useConfig } from '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-593f2b67.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-aeaef131.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-ab4bb9b8.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-6ab5363f.mjs';\nimport '../_chunks/dep-6dc3d0e1.mjs';\nimport '../_chunks/dep-76958824.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../_chunks/dep-e9841b9e.mjs';\nimport '../_chunks/dep-7932c2e8.mjs';\nimport '../_chunks/dep-0e581ac0.mjs';\nimport '../_chunks/dep-49aeee3c.mjs';\nimport '../_chunks/dep-b5bf85f5.mjs';\nimport '../_chunks/dep-ec0bbd9f.mjs';\nimport '../_chunks/dep-69e0f6fc.mjs';\nimport '../_chunks/dep-3c65fae8.mjs';\nimport '../_chunks/dep-cc8ebcde.mjs';\nimport '../_chunks/dep-4ec29b23.mjs';\nimport '../_chunks/dep-732f0b7d.mjs';\nimport '../_chunks/dep-02f9394e.mjs';\nimport '../_chunks/dep-400ec705.mjs';\nimport '../_chunks/dep-8dfc9324.mjs';\nimport '../_chunks/dep-5922c8f3.mjs';\nimport '../_chunks/dep-92f86d1d.mjs';\nimport '../_chunks/dep-1a4bb2f2.mjs';\nimport '../_chunks/dep-f5579c03.mjs';\nimport '../_chunks/dep-1b78414a.mjs';\nimport '../_chunks/dep-d84f19b3.mjs';\nimport '../_chunks/dep-4d4e2af1.mjs';\nimport '../_chunks/dep-3c4e4325.mjs';\nimport '../_chunks/dep-e065dc25.mjs';\nimport '../select-input/select-input.mjs';\nimport '../popup/index.mjs';\nimport '../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../_chunks/dep-03a7fb6c.mjs';\nimport '../hooks/index.mjs';\nimport '../hooks/icon.mjs';\nimport '../hooks/slot.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-b91a8171.mjs';\nimport '../_chunks/dep-03ad9cda.mjs';\nimport '../_chunks/dep-d8a34055.mjs';\nimport '../_chunks/dep-2f6e28a0.mjs';\nimport '../_chunks/dep-5a17bf21.mjs';\nimport '../_chunks/dep-bad871d5.mjs';\nimport '../hooks/useCommonClassName.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../_chunks/dep-1b9718a2.mjs';\nimport '../_chunks/dep-1725b1c7.mjs';\nimport '../_chunks/dep-532409c5.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-9ed7da3e.mjs';\nimport '../_chunks/dep-7f65fc46.mjs';\nimport '../_chunks/dep-4f2cabb0.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useVirtualScroll.mjs';\nimport '../hooks/useImagePreviewUrl.mjs';\nimport '../_common/js/upload/utils.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../popup/container.mjs';\nimport '../popup/props.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../popup/type.mjs';\nimport '../config-provider/type.mjs';\nimport '../select-input/props.mjs';\nimport '../select-input/useSingle.mjs';\nimport '../input/index.mjs';\nimport '../input/input.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../input/props.mjs';\nimport '../hooks/useGlobalIcon.mjs';\nimport '../input/useInput.mjs';\nimport '../form/const.mjs';\nimport '../input/useLengthLimit.mjs';\nimport '../_common/js/log/index.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-73384992.mjs';\nimport '../_chunks/dep-58a62202.mjs';\nimport '../_chunks/dep-889e457b.mjs';\nimport '../input/useInputEventHandler.mjs';\nimport '../input/useInputWidth.mjs';\nimport '../_chunks/dep-df472119.mjs';\nimport '../input/input-group.mjs';\nimport '../input/input-group-props.mjs';\nimport '../input/type.mjs';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-bff7e93a.mjs';\nimport '../_chunks/dep-0b414bea.mjs';\nimport '../_chunks/dep-fbd4eddb.mjs';\nimport '../_chunks/dep-ea20409b.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../loading/props.mjs';\nimport '../hooks/useTeleport.mjs';\nimport '../loading/type.mjs';\nimport '../select-input/useMultiple.mjs';\nimport '../tag-input/index.mjs';\nimport '../tag-input/tag-input.mjs';\nimport '../tag-input/props.mjs';\nimport '../tag-input/hooks/useTagScroll.mjs';\nimport '../tag-input/useTagList.mjs';\nimport '../tag/index.mjs';\nimport '../tag/tag.mjs';\nimport '../_chunks/dep-9ac991f3.mjs';\nimport '../tag/props.mjs';\nimport '../tag/check-tag.mjs';\nimport '../tag/check-tag-props.mjs';\nimport '../_common/js/common.mjs';\nimport '../tag/check-tag-group.mjs';\nimport '../tag/check-tag-group-props.mjs';\nimport '../tag/type.mjs';\nimport '../tag-input/hooks/useHover.mjs';\nimport '../tag-input/hooks/useDragSorter.mjs';\nimport '../tag-input/type.mjs';\nimport '../select-input/useOverlayInnerStyle.mjs';\nimport '../select-input/type.mjs';\nimport '../_chunks/dep-88ae49da.mjs';\nimport '../_chunks/dep-88c8d9ed.mjs';\nimport './option.mjs';\nimport './option-props.mjs';\nimport '../checkbox/index.mjs';\nimport '../checkbox/checkbox.mjs';\nimport '../checkbox/props.mjs';\nimport '../checkbox/constants.mjs';\nimport '../checkbox/hooks/useCheckboxLazyLoad.mjs';\nimport '../_common/js/utils/observe.mjs';\nimport '../checkbox/hooks/useKeyboardEvent.mjs';\nimport '../checkbox/group.mjs';\nimport '../checkbox/checkbox-group-props.mjs';\nimport '../checkbox/type.mjs';\nimport './optionGroup.mjs';\nimport './option-group-props.mjs';\nimport './hooks/usePanelVirtualScroll.mjs';\nvar _excluded = [\"overlayClassName\"];\nfunction _createForOfIteratorHelper(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (!t) {\n    if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n      t && (r = t);\n      var _n = 0,\n        F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          return _n >= r.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: r[_n++]\n          };\n        },\n        e: function e(r) {\n          throw r;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var o,\n    a = !0,\n    u = !1;\n  return {\n    s: function s() {\n      t = t.call(r);\n    },\n    n: function n() {\n      var r = t.next();\n      return a = r.done, r;\n    },\n    e: function e(r) {\n      u = !0, o = r;\n    },\n    f: function f() {\n      try {\n        a || null == t[\"return\"] || t[\"return\"]();\n      } finally {\n        if (u) throw o;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar _Select = defineComponent({\n  name: \"TSelect\",\n  props: _objectSpread(_objectSpread({}, props), {}, {\n    valueDisplayOptions: {\n      type: Object\n    }\n  }),\n  setup: function setup(props2, _ref) {\n    var slots = _ref.slots;\n    var classPrefix = usePrefixClass();\n    var isDisabled = useDisabled();\n    var isReadonly = useReadonly();\n    var renderTNodeJSX = useTNodeJSX();\n    var COMPONENT_NAME = usePrefixClass(\"select\");\n    var _useConfig = useConfig(\"select\"),\n      globalConfig = _useConfig.globalConfig,\n      t = _useConfig.t;\n    var _toRefs = toRefs(props2),\n      popupVisible = _toRefs.popupVisible,\n      inputValue = _toRefs.inputValue,\n      modelValue = _toRefs.modelValue,\n      value = _toRefs.value;\n    var _useDefaultValue = useDefaultValue(inputValue, props2.defaultInputValue, props2.onInputChange, \"inputValue\"),\n      _useDefaultValue2 = _slicedToArray(_useDefaultValue, 2),\n      innerInputValue = _useDefaultValue2[0],\n      setInputValue = _useDefaultValue2[1];\n    var _useVModel = useVModel(value, modelValue, props2.defaultValue, props2.onChange),\n      _useVModel2 = _slicedToArray(_useVModel, 2),\n      orgValue = _useVModel2[0],\n      setOrgValue = _useVModel2[1];\n    var selectPanelRef = ref(null);\n    var selectInputRef = ref(null);\n    var keys = computed(function () {\n      var _props2$keys, _props2$keys2, _props2$keys3;\n      return {\n        label: ((_props2$keys = props2.keys) === null || _props2$keys === void 0 ? void 0 : _props2$keys.label) || \"label\",\n        value: ((_props2$keys2 = props2.keys) === null || _props2$keys2 === void 0 ? void 0 : _props2$keys2.value) || \"value\",\n        disabled: ((_props2$keys3 = props2.keys) === null || _props2$keys3 === void 0 ? void 0 : _props2$keys3.disabled) || \"disabled\"\n      };\n    });\n    var _useSelectOptions = useSelectOptions(props2, keys, innerInputValue),\n      optionsMap = _useSelectOptions.optionsMap,\n      optionsList = _useSelectOptions.optionsList,\n      optionsCache = _useSelectOptions.optionsCache,\n      displayOptions = _useSelectOptions.displayOptions;\n    var innerValue = computed(function () {\n      if (orgValue.value === void 0) {\n        return props2.multiple ? [] : void 0;\n      }\n      if (props2.valueType === \"object\") {\n        return !props2.multiple ? orgValue.value[keys.value.value] : orgValue.value.map(function (option) {\n          return option[keys.value.value];\n        });\n      }\n      return orgValue.value;\n    });\n    var setInnerValue = function setInnerValue(newVal, context) {\n      if (props2.valueType === \"object\") {\n        var _keys$value = keys.value,\n          value2 = _keys$value.value,\n          label = _keys$value.label;\n        var getOption = function getOption(val) {\n          if (val === void 0) {\n            return void 0;\n          }\n          var option = optionsMap.value.get(val);\n          return _defineProperty(_defineProperty({}, value2, get_1(option, value2)), label, get_1(option, label));\n        };\n        newVal = props2.multiple ? newVal.map(function (val) {\n          return getOption(val);\n        }) : getOption(newVal);\n      }\n      if (newVal === orgValue.value) return;\n      if (props2.multiple && !props2.reserveKeyword) setInputValue(\"\");\n      setOrgValue(newVal, _objectSpread({\n        selectedOptions: getSelectedOptions(newVal)\n      }, context));\n    };\n    var _useDefaultValue3 = useDefaultValue(popupVisible, false, function (visible, context) {\n        var _props2$onPopupVisibl;\n        (_props2$onPopupVisibl = props2.onPopupVisibleChange) === null || _props2$onPopupVisibl === void 0 || _props2$onPopupVisibl.call(props2, visible, context);\n      }, \"popupVisible\"),\n      _useDefaultValue4 = _slicedToArray(_useDefaultValue3, 2),\n      innerPopupVisible = _useDefaultValue4[0],\n      setInnerPopupVisible = _useDefaultValue4[1];\n    var placeholderText = computed(function () {\n      var _ref3;\n      return (_ref3 = !props2.multiple && innerPopupVisible.value && getSingleContent(innerValue.value, optionsMap) || props2.placeholder) !== null && _ref3 !== void 0 ? _ref3 : t(globalConfig.value.placeholder);\n    });\n    var displayText = computed(function () {\n      return props2.multiple ? getMultipleContent(innerValue.value, optionsMap) : getSingleContent(innerValue.value, optionsMap);\n    });\n    var valueDisplayParams = computed(function () {\n      var val = props2.multiple && isArray_1(innerValue.value) ? innerValue.value.map(function (value2) {\n        var _optionsMap$value$get;\n        return {\n          value: value2,\n          label: (_optionsMap$value$get = optionsMap.value.get(value2)) === null || _optionsMap$value$get === void 0 ? void 0 : _optionsMap$value$get.label\n        };\n      }) : innerValue.value;\n      var params = {\n        value: val,\n        onClose: props2.multiple ? function (index) {\n          return removeTag(index);\n        } : function () {}\n      };\n      if (!props2.multiple) Object.assign(params, {\n        label: displayText.value\n      });\n      if (props2.minCollapsedNum && props2.multiple) {\n        var _val$slice;\n        return _objectSpread(_objectSpread({}, params), {}, {\n          displayValue: val === null || val === void 0 || (_val$slice = val.slice) === null || _val$slice === void 0 ? void 0 : _val$slice.call(val, 0, props2.minCollapsedNum)\n        });\n      }\n      return params;\n    });\n    var isFilterable = computed(function () {\n      return Boolean(props2.filterable || globalConfig.value.filterable || isFunction_1(props2.filter));\n    });\n    var isRemoteSearch = computed(function () {\n      return Boolean((props2.filterable || globalConfig.value.filterable) && isFunction_1(props2.onSearch));\n    });\n    var removeTag = function removeTag(index, e) {\n      var _props2$onRemove;\n      e && e.stopPropagation();\n      var selectValue = cloneDeep_1(innerValue.value);\n      var value2 = selectValue[index];\n      selectValue.splice(index, 1);\n      setInnerValue(selectValue, {\n        selectedOptions: getSelectedOptions(selectValue),\n        trigger: \"tag-remove\",\n        e: e\n      });\n      (_props2$onRemove = props2.onRemove) === null || _props2$onRemove === void 0 || _props2$onRemove.call(props2, {\n        value: value2,\n        data: optionsMap.value.get(value2),\n        e: e\n      });\n    };\n    var handleCreate = function handleCreate() {\n      var _props2$onCreate;\n      if (!innerInputValue.value) return;\n      (_props2$onCreate = props2.onCreate) === null || _props2$onCreate === void 0 || _props2$onCreate.call(props2, innerInputValue.value);\n      if (!innerPopupVisible.value) setInputValue(\"\");\n    };\n    var popupContentRef = computed(function () {\n      var _selectInputRef$value;\n      return (_selectInputRef$value = selectInputRef.value) === null || _selectInputRef$value === void 0 ? void 0 : _selectInputRef$value.popupRef.getOverlay();\n    });\n    var optionalList = computed(function () {\n      return optionsList.value.filter(function (item) {\n        return !item.disabled && !item[\"check-all\"] && !item.checkAll;\n      });\n    });\n    var getSelectedOptions = function getSelectedOptions() {\n      var selectValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : innerValue.value;\n      return optionsList.value.filter(function (option) {\n        if (option.checkAll) return;\n        if (isArray_1(selectValue)) return selectValue.includes(option.value);\n        return selectValue === option.value;\n      });\n    };\n    var _useKeyboardControl = useKeyboardControl({\n        displayOptions: displayOptions,\n        optionsList: optionsList,\n        innerPopupVisible: innerPopupVisible,\n        setInnerPopupVisible: setInnerPopupVisible,\n        selectPanelRef: selectPanelRef,\n        isFilterable: isFilterable,\n        isRemoteSearch: isRemoteSearch,\n        getSelectedOptions: getSelectedOptions,\n        setInnerValue: setInnerValue,\n        innerValue: innerValue,\n        popupContentRef: popupContentRef,\n        multiple: props2.multiple,\n        max: props2.max\n      }),\n      hoverIndex = _useKeyboardControl.hoverIndex,\n      virtualFilteredOptions = _useKeyboardControl.virtualFilteredOptions,\n      handleKeyDown = _useKeyboardControl.handleKeyDown,\n      filteredOptions = _useKeyboardControl.filteredOptions;\n    var onCheckAllChange = function onCheckAllChange(checked) {\n      if (!props2.multiple) return;\n      var value2 = checked ? optionalList.value.map(function (option) {\n        return option.value;\n      }) : [];\n      setInnerValue(value2, {\n        selectedOptions: getSelectedOptions(value2),\n        trigger: checked ? \"check\" : \"clear\"\n      });\n    };\n    var intersectionLen = computed(function () {\n      var values = optionalList.value.map(function (item) {\n        return item.value;\n      });\n      var n = intersection_1(innerValue.value, values);\n      return n.length;\n    });\n    var isCheckAll = computed(function () {\n      return intersectionLen.value === optionalList.value.length;\n    });\n    var indeterminate = computed(function () {\n      return !isCheckAll.value && intersectionLen.value !== 0;\n    });\n    var SelectProvider = computed(function () {\n      return {\n        max: props2.max,\n        multiple: props2.multiple,\n        hoverIndex: hoverIndex.value,\n        selectValue: innerValue.value,\n        reserveKeyword: props2.reserveKeyword,\n        handleValueChange: setInnerValue,\n        handlerInputChange: setInputValue,\n        handlePopupVisibleChange: setInnerPopupVisible,\n        handleCreate: handleCreate,\n        size: props2.size,\n        popupContentRef: popupContentRef,\n        indeterminate: indeterminate.value,\n        isCheckAll: isCheckAll.value,\n        onCheckAllChange: onCheckAllChange,\n        getSelectedOptions: getSelectedOptions,\n        displayOptions: displayOptions.value,\n        emitBlur: handleOptionEmitBlur\n      };\n    });\n    provide(selectInjectKey, SelectProvider);\n    var checkValueInvalid = function checkValueInvalid() {\n      if (!props2.multiple && isArray_1(orgValue.value)) {\n        setOrgValue(void 0, {\n          selectedOptions: [],\n          trigger: \"default\"\n        });\n      }\n      if (props2.multiple && !isArray_1(orgValue.value)) {\n        setOrgValue([], {\n          selectedOptions: [],\n          trigger: \"default\"\n        });\n      }\n    };\n    var handleSearch = debounce_1(function (value2, _ref4) {\n      var _props2$onSearch;\n      var e = _ref4.e;\n      (_props2$onSearch = props2.onSearch) === null || _props2$onSearch === void 0 || _props2$onSearch.call(props2, \"\".concat(value2), {\n        e: e\n      });\n    }, 300);\n    var handlerInputChange = function handlerInputChange(value2, context) {\n      if (value2) {\n        !innerPopupVisible.value && setInnerPopupVisible(true, {\n          e: context.e\n        });\n      }\n      setInputValue(value2);\n      handleSearch(\"\".concat(value2), {\n        e: context.e\n      });\n      nextTick(function () {\n        var _selectPanelRef$value, _selectPanelRef$value2;\n        virtualFilteredOptions.value = (_selectPanelRef$value = selectPanelRef.value) === null || _selectPanelRef$value === void 0 ? void 0 : _selectPanelRef$value.visibleData;\n        filteredOptions.value = (_selectPanelRef$value2 = selectPanelRef.value) === null || _selectPanelRef$value2 === void 0 ? void 0 : _selectPanelRef$value2.displayOptions;\n      });\n    };\n    var handleOptionEmitBlur = function handleOptionEmitBlur(e) {\n      var _props2$onBlur;\n      (_props2$onBlur = props2.onBlur) === null || _props2$onBlur === void 0 || _props2$onBlur.call(props2, {\n        e: e,\n        value: innerValue.value\n      });\n    };\n    var handlerPopupVisibleChange = function handlerPopupVisibleChange(visible, context) {\n      setInnerPopupVisible(visible, context);\n      if (visible && context.trigger === \"trigger-element-click\") setInputValue(\"\");\n    };\n    var handlerPopupScrollToBottom = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(/*#__PURE__*/regenerator.mark(function _callee(context) {\n        var _popupProps$onScroll, _popupProps$onScrollT;\n        var popupProps;\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              popupProps = props2.popupProps;\n              if (!props2.loading) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              popupProps === null || popupProps === void 0 || (_popupProps$onScroll = popupProps[\"on-scroll-to-bottom\"]) === null || _popupProps$onScroll === void 0 || _popupProps$onScroll.call(popupProps, context);\n              popupProps === null || popupProps === void 0 || (_popupProps$onScrollT = popupProps.onScrollToBottom) === null || _popupProps$onScrollT === void 0 || _popupProps$onScrollT.call(popupProps, context);\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function handlerPopupScrollToBottom(_x) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    var addCache = function addCache(val) {\n      if (props2.multiple) {\n        var newCache = [];\n        var _iterator = _createForOfIteratorHelper(val || []),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var item = _step.value;\n            var option = optionsMap.value.get(item);\n            if (option) {\n              newCache.push(option);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        optionsCache.value = Array.from(/* @__PURE__ */new Set([].concat(newCache, _toConsumableArray(optionsCache.value))));\n      } else {\n        var _option = optionsMap.value.get(val);\n        if (_option) {\n          optionsCache.value = Array.from(/* @__PURE__ */new Set([_option].concat(_toConsumableArray(optionsCache.value))));\n        }\n      }\n    };\n    watch(orgValue, function (val) {\n      checkValueInvalid();\n      nextTick(function () {\n        addCache(val);\n      });\n    }, {\n      immediate: true\n    });\n    watch(function () {\n      return props2.multiple;\n    }, function () {\n      checkValueInvalid();\n    });\n    var updateScrollTop = function updateScrollTop(content) {\n      var _selectPanelRef$value3;\n      if (!selectPanelRef.value) {\n        return;\n      }\n      var firstSelectedNode = (_selectPanelRef$value3 = selectPanelRef.value) === null || _selectPanelRef$value3 === void 0 || (_selectPanelRef$value3 = _selectPanelRef$value3.innerRef) === null || _selectPanelRef$value3 === void 0 ? void 0 : _selectPanelRef$value3.querySelector(\".\".concat(classPrefix.value, \"-is-selected\"));\n      nextTick(function () {\n        if (firstSelectedNode && content) {\n          var _getComputedStyle = getComputedStyle(firstSelectedNode),\n            paddingBottom = _getComputedStyle.paddingBottom;\n          var _getComputedStyle2 = getComputedStyle(content),\n            marginBottom = _getComputedStyle2.marginBottom;\n          var elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          var updateValue = firstSelectedNode.offsetTop - content.offsetTop - (content.clientHeight - firstSelectedNode.clientHeight) + elementBottomHeight;\n          content.scrollTop = updateValue;\n        }\n      });\n    };\n    provide(\"updateScrollTop\", updateScrollTop);\n    return function () {\n      var _ref6 = props2.popupProps || {},\n        overlayClassName = _ref6.overlayClassName,\n        restPopupProps = _objectWithoutProperties(_ref6, _excluded);\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__wrap\")\n      }, [createVNode(SelectInput, mergeProps({\n        autoWidth: props2.autoWidth,\n        readonly: isReadonly.value,\n        borderless: props2.borderless,\n        multiple: props2.multiple,\n        clearable: props2.clearable,\n        loading: props2.loading,\n        status: props2.status,\n        tips: props2.tips,\n        minCollapsedNum: props2.minCollapsedNum,\n        autofocus: props2.autofocus,\n        suffix: props2.suffix,\n        valueDisplayOptions: props2.valueDisplayOptions\n      }, {\n        \"ref\": selectInputRef,\n        \"class\": COMPONENT_NAME.value,\n        \"value\": displayText.value,\n        \"disabled\": isDisabled.value,\n        \"popupVisible\": innerPopupVisible.value,\n        \"inputValue\": innerPopupVisible.value ? innerInputValue.value : \"\",\n        \"placeholder\": \"\".concat(placeholderText.value),\n        \"allowInput\": isFilterable.value,\n        \"collapsed-items\": props2.collapsedItems,\n        \"inputProps\": _objectSpread(_objectSpread({\n          size: props2.size,\n          autofocus: props2.autofocus\n        }, props2.inputProps), {}, {\n          onkeydown: handleKeyDown\n        }),\n        \"tagInputProps\": _objectSpread({\n          size: props2.size\n        }, props2.tagInputProps),\n        \"onTagChange\": function onTagChange(val, ctx) {\n          removeTag(ctx.index);\n        },\n        \"tagProps\": _objectSpread({}, props2.tagProps),\n        \"popupProps\": _objectSpread(_objectSpread({\n          overlayClassName: [\"\".concat(COMPONENT_NAME.value, \"__dropdown\"), overlayClassName]\n        }, restPopupProps), {}, {\n          onScrollToBottom: handlerPopupScrollToBottom\n        }),\n        \"label\": props2.label,\n        \"prefixIcon\": props2.prefixIcon,\n        \"suffix\": props2.suffix,\n        \"suffixIcon\": function suffixIcon() {\n          if (props2.suffixIcon || slots.suffixIcon) {\n            return renderTNodeJSX(\"suffixIcon\");\n          }\n          return props2.showArrow && createVNode(FakeArrow, {\n            \"overlayClassName\": \"\".concat(COMPONENT_NAME.value, \"__right-icon\"),\n            \"isActive\": innerPopupVisible.value\n          }, null);\n        },\n        \"valueDisplay\": function valueDisplay() {\n          return renderTNodeJSX(\"valueDisplay\", {\n            params: valueDisplayParams.value\n          });\n        },\n        \"onPopupVisibleChange\": handlerPopupVisibleChange,\n        \"onInputChange\": handlerInputChange,\n        \"onClear\": function onClear(_ref7) {\n          var _props2$onClear;\n          var e = _ref7.e;\n          setInnerValue(props2.multiple ? [] : void 0, {\n            option: null,\n            selectedOptions: getSelectedOptions(props2.multiple ? [] : void 0),\n            trigger: \"clear\",\n            e: e\n          });\n          (_props2$onClear = props2.onClear) === null || _props2$onClear === void 0 || _props2$onClear.call(props2, {\n            e: e\n          });\n        },\n        \"onEnter\": function onEnter(inputValue2, _ref8) {\n          var e = _ref8.e;\n          setTimeout(function () {\n            var _props2$onEnter;\n            (_props2$onEnter = props2.onEnter) === null || _props2$onEnter === void 0 || _props2$onEnter.call(props2, {\n              inputValue: \"\".concat(innerInputValue.value),\n              e: e,\n              value: innerValue.value\n            });\n            handleCreate();\n          }, 0);\n        },\n        \"onBlur\": function onBlur(inputValue2, _ref9) {\n          var _props2$onBlur2;\n          var e = _ref9.e;\n          (_props2$onBlur2 = props2.onBlur) === null || _props2$onBlur2 === void 0 || _props2$onBlur2.call(props2, {\n            e: e,\n            value: innerValue.value\n          });\n        },\n        \"onFocus\": function onFocus(inputValue2, _ref10) {\n          var _props2$onFocus;\n          var e = _ref10.e;\n          (_props2$onFocus = props2.onFocus) === null || _props2$onFocus === void 0 || _props2$onFocus.call(props2, {\n            e: e,\n            value: innerValue.value\n          });\n        }\n      }, props2.selectInputProps), {\n        label: slots.label,\n        prefixIcon: slots.prefixIcon,\n        suffix: slots.suffix,\n        panel: function panel() {\n          return createVNode(SelectPanel, mergeProps({\n            \"ref\": selectPanelRef\n          }, pick_1(props2, [\"size\", \"multiple\", \"empty\", \"loading\", \"loadingText\", \"filterable\", \"creatable\", \"panelTopContent\", \"panelBottomContent\", \"filter\", \"scroll\"]), {\n            \"inputValue\": innerInputValue.value\n          }), slots);\n        },\n        collapsedItems: slots.collapsedItems\n      })]);\n    };\n  }\n});\nexport { _Select as default };","map":{"version":3,"names":["_Select","defineComponent","name","props","_objectSpread","valueDisplayOptions","type","Object","setup","props2","_ref","slots","classPrefix","usePrefixClass","isDisabled","useDisabled","isReadonly","useReadonly","renderTNodeJSX","useTNodeJSX","COMPONENT_NAME","_useConfig","useConfig","globalConfig","t","_toRefs","toRefs","popupVisible","inputValue","modelValue","value","_useDefaultValue","useDefaultValue","defaultInputValue","onInputChange","_useDefaultValue2","_slicedToArray","innerInputValue","setInputValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","orgValue","setOrgValue","selectPanelRef","ref","selectInputRef","keys","computed","_props2$keys","_props2$keys2","_props2$keys3","label","disabled","_useSelectOptions","useSelectOptions","optionsMap","optionsList","optionsCache","displayOptions","innerValue","multiple","valueType","map","option","setInnerValue","newVal","context","_keys$value","value2","getOption","val","get","_defineProperty","get_1","reserveKeyword","selectedOptions","getSelectedOptions","_useDefaultValue3","visible","_props2$onPopupVisibl","onPopupVisibleChange","call","_useDefaultValue4","innerPopupVisible","setInnerPopupVisible","placeholderText","_ref3","getSingleContent","placeholder","displayText","getMultipleContent","valueDisplayParams","isArray_1","_optionsMap$value$get","params","onClose","index","removeTag","assign","minCollapsedNum","_val$slice","displayValue","slice","isFilterable","Boolean","filterable","isFunction_1","filter","isRemoteSearch","onSearch","e","_props2$onRemove","stopPropagation","selectValue","cloneDeep_1","splice","trigger","onRemove","data","handleCreate","_props2$onCreate","onCreate","popupContentRef","_selectInputRef$value","popupRef","getOverlay","optionalList","item","checkAll","arguments","length","undefined","includes","_useKeyboardControl","useKeyboardControl","max","hoverIndex","virtualFilteredOptions","handleKeyDown","filteredOptions","onCheckAllChange","checked","intersectionLen","values","n","intersection_1","isCheckAll","indeterminate","SelectProvider","handleValueChange","handlerInputChange","handlePopupVisibleChange","size","emitBlur","handleOptionEmitBlur","provide","selectInjectKey","checkValueInvalid","handleSearch","debounce_1","_ref4","_props2$onSearch","concat","nextTick","_selectPanelRef$value","_selectPanelRef$value2","visibleData","_props2$onBlur","onBlur","handlerPopupVisibleChange","handlerPopupScrollToBottom","_ref5","_asyncToGenerator","regenerator","mark","_callee","_popupProps$onScroll","_popupProps$onScrollT","popupProps","wrap","_callee$","_context","prev","next","loading","abrupt","onScrollToBottom","stop","_x","apply","addCache","newCache","_iterator","_createForOfIteratorHelper","_step","s","done","push","err","f","Array","from","Set","_toConsumableArray","_option","watch","immediate","updateScrollTop","content","_selectPanelRef$value3","firstSelectedNode","innerRef","querySelector","_getComputedStyle","getComputedStyle","paddingBottom","_getComputedStyle2","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","_ref6","overlayClassName","restPopupProps","_objectWithoutProperties","_excluded","createVNode","SelectInput","mergeProps","autoWidth","readonly","borderless","clearable","status","tips","autofocus","suffix","collapsedItems","inputProps","onkeydown","tagInputProps","onTagChange","ctx","tagProps","prefixIcon","suffixIcon","showArrow","FakeArrow","valueDisplay","onClear","_ref7","_props2$onClear","onEnter","inputValue2","_ref8","setTimeout","_props2$onEnter","_ref9","_props2$onBlur2","onFocus","_ref10","_props2$onFocus","selectInputProps","panel","pick_1"],"sources":["../../src/select/select.tsx"],"sourcesContent":["import { defineComponent, provide, computed, toRefs, watch, ref, nextTick, PropType } from 'vue';\nimport picker from 'lodash/pick';\nimport isArray from 'lodash/isArray';\nimport isFunction from 'lodash/isFunction';\nimport debounce from 'lodash/debounce';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport intersection from 'lodash/intersection';\nimport FakeArrow from '../common-components/fake-arrow';\nimport SelectInput from '../select-input';\nimport SelectPanel from './select-panel';\nimport props from './props';\n// hooks\nimport { useDisabled } from '../hooks/useDisabled';\nimport { useReadonly } from '../hooks/useReadonly';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { selectInjectKey, getSingleContent, getMultipleContent } from './helper';\nimport { useSelectOptions } from './hooks/useSelectOptions';\nimport useKeyboardControl from './hooks/useKeyboardControl';\nimport type { PopupProps, PopupVisibleChangeContext } from '../popup';\nimport type { SelectInputValueChangeContext } from '../select-input';\nimport type { TdSelectProps, SelectValue } from './type';\nimport { SelectInputValueDisplayOptions } from '../select-input/useSingle';\n\nexport default defineComponent({\n  name: 'TSelect',\n  props: {\n    ...props,\n    /**\n     * 非公开 API，请勿使用（后续即将删除）\n     */\n    valueDisplayOptions: {\n      type: Object as PropType<SelectInputValueDisplayOptions>,\n    },\n  },\n  setup(props: TdSelectProps & { valueDisplayOptions: SelectInputValueDisplayOptions }, { slots }) {\n    const classPrefix = usePrefixClass();\n    const isDisabled = useDisabled();\n    const isReadonly = useReadonly();\n    const renderTNodeJSX = useTNodeJSX();\n    const COMPONENT_NAME = usePrefixClass('select');\n    const { globalConfig, t } = useConfig('select');\n    const { popupVisible, inputValue, modelValue, value } = toRefs(props);\n    const [innerInputValue, setInputValue] = useDefaultValue(\n      inputValue,\n      props.defaultInputValue,\n      props.onInputChange,\n      'inputValue',\n    );\n    const [orgValue, setOrgValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const selectPanelRef = ref(null);\n    const selectInputRef = ref(null);\n    const keys = computed(() => ({\n      label: props.keys?.label || 'label',\n      value: props.keys?.value || 'value',\n      disabled: props.keys?.disabled || 'disabled',\n    }));\n    const { optionsMap, optionsList, optionsCache, displayOptions } = useSelectOptions(props, keys, innerInputValue);\n\n    // 内部数据,格式化过的\n    const innerValue = computed(() => {\n      if (orgValue.value === undefined) {\n        return props.multiple ? [] : undefined;\n      }\n      if (props.valueType === 'object') {\n        return !props.multiple\n          ? orgValue.value[keys.value.value]\n          : (orgValue.value as SelectValue[]).map((option) => option[keys.value.value]);\n      }\n      return orgValue.value;\n    });\n\n    const setInnerValue: TdSelectProps['onChange'] = (newVal: SelectValue | SelectValue[], context) => {\n      if (props.valueType === 'object') {\n        const { value, label } = keys.value;\n        const getOption = (val: SelectValue) => {\n          if (val === undefined) {\n            return undefined;\n          }\n          const option = optionsMap.value.get(val);\n          return {\n            [value]: get(option, value),\n            [label]: get(option, label),\n          };\n        };\n        newVal = props.multiple ? (newVal as SelectValue[]).map((val) => getOption(val)) : getOption(newVal);\n      }\n      if (newVal === orgValue.value) return;\n      if (props.multiple && !props.reserveKeyword) setInputValue('');\n      setOrgValue(newVal, {\n        selectedOptions: getSelectedOptions(newVal),\n        ...context,\n      });\n    };\n\n    const [innerPopupVisible, setInnerPopupVisible] = useDefaultValue(\n      popupVisible,\n      false,\n      (visible: boolean, context: PopupVisibleChangeContext) => {\n        props.onPopupVisibleChange?.(visible, context);\n      },\n      'popupVisible',\n    );\n\n    const placeholderText = computed(\n      () =>\n        ((!props.multiple && innerPopupVisible.value && getSingleContent(innerValue.value, optionsMap)) ||\n          props.placeholder) ??\n        t(globalConfig.value.placeholder),\n    );\n\n    // selectInput 展示值\n    const displayText = computed(() =>\n      props.multiple\n        ? getMultipleContent(innerValue.value as SelectValue[], optionsMap)\n        : getSingleContent(innerValue.value, optionsMap),\n    );\n\n    // valueDisplayParams参数\n    const valueDisplayParams = computed(() => {\n      const val =\n        props.multiple && isArray(innerValue.value)\n          ? (innerValue.value as SelectValue[]).map((value) => ({\n              value,\n              label: optionsMap.value.get(value)?.label,\n            }))\n          : innerValue.value;\n\n      const params = {\n        value: val,\n        onClose: props.multiple ? (index: number) => removeTag(index) : () => {},\n      };\n\n      if (!props.multiple) Object.assign(params, { label: displayText.value });\n\n      if (props.minCollapsedNum && props.multiple) {\n        return {\n          ...params,\n          displayValue: val?.slice?.(0, props.minCollapsedNum),\n        };\n      }\n      return params;\n    });\n\n    const isFilterable = computed(() => {\n      return Boolean(props.filterable || globalConfig.value.filterable || isFunction(props.filter));\n    });\n\n    const isRemoteSearch = computed(() => {\n      return Boolean((props.filterable || globalConfig.value.filterable) && isFunction(props.onSearch));\n    });\n\n    // 移除tag\n    const removeTag = (index: number, e?: MouseEvent) => {\n      e && e.stopPropagation();\n      const selectValue = cloneDeep(innerValue.value) as SelectValue[];\n      const value = selectValue[index];\n      selectValue.splice(index, 1);\n      setInnerValue(selectValue, { selectedOptions: getSelectedOptions(selectValue), trigger: 'tag-remove', e });\n      props.onRemove?.({\n        value: value as string | number,\n        data: optionsMap.value.get(value),\n        e,\n      });\n    };\n\n    const handleCreate = () => {\n      if (!innerInputValue.value) return;\n      props.onCreate?.(innerInputValue.value);\n      // only clean input value when reopen popup\n      if (!innerPopupVisible.value) setInputValue('');\n    };\n\n    const popupContentRef = computed(() => selectInputRef.value?.popupRef.getOverlay() as HTMLElement);\n\n    /**\n     * 可选选项的列表\n     * 排除已禁用和全选的选项\n     */\n    const optionalList = computed(() =>\n      optionsList.value.filter((item) => {\n        return !item.disabled && !item['check-all'] && !item.checkAll;\n      }),\n    );\n\n    const getSelectedOptions = (selectValue: SelectValue[] | SelectValue = innerValue.value) => {\n      return optionsList.value.filter((option) => {\n        if (option.checkAll) return;\n        if (isArray(selectValue)) return selectValue.includes(option.value);\n        return selectValue === option.value;\n      });\n    };\n\n    const { hoverIndex, virtualFilteredOptions, handleKeyDown, filteredOptions } = useKeyboardControl({\n      displayOptions,\n      optionsList,\n      innerPopupVisible,\n      setInnerPopupVisible,\n      selectPanelRef,\n      isFilterable,\n      isRemoteSearch,\n      getSelectedOptions,\n      setInnerValue,\n      innerValue,\n      popupContentRef,\n      multiple: props.multiple,\n      max: props.max,\n    });\n\n    const onCheckAllChange = (checked: boolean) => {\n      if (!props.multiple) return;\n      const value = checked ? optionalList.value.map((option) => option.value) : [];\n      setInnerValue(value, { selectedOptions: getSelectedOptions(value), trigger: checked ? 'check' : 'clear' });\n    };\n\n    // 已选的长度\n    const intersectionLen = computed<number>(() => {\n      const values = optionalList.value.map((item) => item.value);\n      const n = intersection(innerValue.value, values);\n      return n.length;\n    });\n\n    // 全选\n    const isCheckAll = computed<boolean>(() => {\n      return intersectionLen.value === optionalList.value.length;\n    });\n\n    // 半选\n    const indeterminate = computed<boolean>(() => !isCheckAll.value && intersectionLen.value !== 0);\n\n    const SelectProvider = computed(() => ({\n      max: props.max,\n      multiple: props.multiple,\n      hoverIndex: hoverIndex.value,\n      selectValue: innerValue.value,\n      reserveKeyword: props.reserveKeyword,\n      handleValueChange: setInnerValue,\n      handlerInputChange: setInputValue,\n      handlePopupVisibleChange: setInnerPopupVisible,\n      handleCreate,\n      size: props.size,\n      popupContentRef,\n      indeterminate: indeterminate.value,\n      isCheckAll: isCheckAll.value,\n      onCheckAllChange,\n      getSelectedOptions,\n      displayOptions: displayOptions.value,\n      emitBlur: handleOptionEmitBlur,\n    }));\n\n    provide(selectInjectKey, SelectProvider);\n\n    const checkValueInvalid = () => {\n      // 参数类型检测与修复\n      if (!props.multiple && isArray(orgValue.value)) {\n        setOrgValue(undefined, { selectedOptions: [], trigger: 'default' });\n      }\n      if (props.multiple && !isArray(orgValue.value)) {\n        setOrgValue([], { selectedOptions: [], trigger: 'default' });\n      }\n    };\n\n    const handleSearch = debounce((value: string, { e }: { e: KeyboardEvent }) => {\n      props.onSearch?.(`${value}`, { e });\n    }, 300);\n\n    const handlerInputChange = (value: string, context: SelectInputValueChangeContext) => {\n      if (value) {\n        !innerPopupVisible.value && setInnerPopupVisible(true, { e: context.e as KeyboardEvent });\n      }\n      setInputValue(value);\n      handleSearch(`${value}`, { e: context.e as KeyboardEvent });\n      nextTick(() => {\n        virtualFilteredOptions.value = selectPanelRef.value?.visibleData;\n        filteredOptions.value = selectPanelRef.value?.displayOptions;\n      });\n    };\n\n    const handleOptionEmitBlur = (e: MouseEvent | KeyboardEvent) => {\n      props.onBlur?.({ e, value: innerValue.value });\n    };\n\n    const handlerPopupVisibleChange = (visible: boolean, context: PopupVisibleChangeContext) => {\n      setInnerPopupVisible(visible, context);\n      // 在通过点击选择器打开弹窗时 清空此前的输入内容 避免在关闭时就清空引起的闪烁问题\n      if (visible && context.trigger === 'trigger-element-click') setInputValue('');\n    };\n\n    const handlerPopupScrollToBottom: PopupProps['onScrollToBottom'] = async (context) => {\n      const { popupProps } = props;\n      if (props.loading) {\n        return;\n      }\n      // @ts-ignore types 中只有 onScrollToBottom，但 Vue 会自动转换 on-scroll-to-bottom 并支持，故此处都进行调用\n      popupProps?.['on-scroll-to-bottom']?.(context);\n      popupProps?.onScrollToBottom?.(context);\n    };\n\n    const addCache = (val: SelectValue) => {\n      if (props.multiple) {\n        const newCache = [];\n        for (const item of (val as SelectValue[]) || []) {\n          const option = optionsMap.value.get(item);\n          if (option) {\n            newCache.push(option);\n          }\n        }\n        optionsCache.value = Array.from(new Set([...newCache, ...optionsCache.value]));\n      } else {\n        const option = optionsMap.value.get(val);\n        if (option) {\n          optionsCache.value = Array.from(new Set([option, ...optionsCache.value]));\n        }\n      }\n    };\n\n    watch(\n      orgValue,\n      (val) => {\n        checkValueInvalid();\n        nextTick(() => {\n          addCache(val);\n        });\n      },\n      {\n        immediate: true,\n      },\n    );\n    watch(\n      () => props.multiple,\n      () => {\n        checkValueInvalid();\n      },\n    );\n\n    // 列表展开时定位置选中项\n    const updateScrollTop = (content: HTMLDivElement) => {\n      if (!selectPanelRef.value) {\n        return;\n      }\n      const firstSelectedNode: HTMLDivElement = (selectPanelRef.value?.innerRef as HTMLDivElement)?.querySelector(\n        `.${classPrefix.value}-is-selected`,\n      );\n      // 此处需要等待渲染后进行计算\n      nextTick(() => {\n        if (firstSelectedNode && content) {\n          const { paddingBottom } = getComputedStyle(firstSelectedNode);\n          const { marginBottom } = getComputedStyle(content);\n          const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          // 小于0时不需要特殊处理，会被设为0\n          const updateValue =\n            firstSelectedNode.offsetTop -\n            content.offsetTop -\n            (content.clientHeight - firstSelectedNode.clientHeight) +\n            elementBottomHeight;\n          // eslint-disable-next-line no-param-reassign\n          content.scrollTop = updateValue;\n        }\n      });\n    };\n    provide('updateScrollTop', updateScrollTop);\n    return () => {\n      const { overlayClassName, ...restPopupProps } = (props.popupProps || {}) as TdSelectProps['popupProps'];\n      return (\n        <div class={`${COMPONENT_NAME.value}__wrap`}>\n          <SelectInput\n            {...{\n              autoWidth: props.autoWidth,\n              readonly: isReadonly.value,\n              borderless: props.borderless,\n              multiple: props.multiple,\n              clearable: props.clearable,\n              loading: props.loading,\n              status: props.status,\n              tips: props.tips,\n              minCollapsedNum: props.minCollapsedNum,\n              autofocus: props.autofocus,\n              suffix: props.suffix,\n              valueDisplayOptions: props.valueDisplayOptions,\n            }}\n            ref={selectInputRef}\n            class={COMPONENT_NAME.value}\n            value={displayText.value}\n            disabled={isDisabled.value}\n            popupVisible={innerPopupVisible.value}\n            inputValue={innerPopupVisible.value ? innerInputValue.value : ''}\n            placeholder={`${placeholderText.value}`}\n            allowInput={isFilterable.value}\n            collapsed-items={props.collapsedItems}\n            inputProps={{\n              size: props.size,\n              autofocus: props.autofocus,\n              ...(props.inputProps as TdSelectProps['inputProps']),\n              onkeydown: handleKeyDown,\n            }}\n            tagInputProps={{\n              size: props.size,\n              ...(props.tagInputProps as TdSelectProps['tagInputProps']),\n            }}\n            onTagChange={(val, ctx) => {\n              removeTag(ctx.index);\n            }}\n            tagProps={{ ...(props.tagProps as TdSelectProps['tagProps']) }}\n            popupProps={{\n              overlayClassName: [`${COMPONENT_NAME.value}__dropdown`, overlayClassName],\n              ...restPopupProps,\n              onScrollToBottom: handlerPopupScrollToBottom,\n            }}\n            label={props.label}\n            prefixIcon={props.prefixIcon}\n            suffix={props.suffix}\n            suffixIcon={() => {\n              if (props.suffixIcon || slots.suffixIcon) {\n                return renderTNodeJSX('suffixIcon');\n              }\n\n              return (\n                props.showArrow && (\n                  <FakeArrow\n                    overlayClassName={`${COMPONENT_NAME.value}__right-icon`}\n                    isActive={innerPopupVisible.value}\n                  />\n                )\n              );\n            }}\n            valueDisplay={() =>\n              renderTNodeJSX('valueDisplay', {\n                params: valueDisplayParams.value,\n              })\n            }\n            onPopupVisibleChange={handlerPopupVisibleChange}\n            onInputChange={handlerInputChange}\n            onClear={({ e }) => {\n              setInnerValue(props.multiple ? [] : undefined, {\n                option: null,\n                selectedOptions: getSelectedOptions(props.multiple ? [] : undefined),\n                trigger: 'clear',\n                e,\n              });\n              props.onClear?.({ e });\n            }}\n            onEnter={(inputValue, { e }) => {\n              // onEnter和handleKeyDown的Enter事件同时触发，需要通过setTimeout设置先后\n              setTimeout(() => {\n                props.onEnter?.({ inputValue: `${innerInputValue.value}`, e, value: innerValue.value });\n                handleCreate();\n              }, 0);\n            }}\n            onBlur={(inputValue, { e }) => {\n              props.onBlur?.({ e, value: innerValue.value });\n            }}\n            onFocus={(inputValue, { e }) => {\n              props.onFocus?.({ e, value: innerValue.value });\n            }}\n            {...(props.selectInputProps as TdSelectProps['selectInputProps'])}\n            v-slots={{\n              label: slots.label,\n              prefixIcon: slots.prefixIcon,\n              suffix: slots.suffix,\n              panel: () => (\n                <SelectPanel\n                  ref={selectPanelRef}\n                  {...picker(props, [\n                    'size',\n                    'multiple',\n                    'empty',\n                    'loading',\n                    'loadingText',\n                    'filterable',\n                    'creatable',\n                    'panelTopContent',\n                    'panelBottomContent',\n                    'filter',\n                    'scroll',\n                  ])}\n                  inputValue={innerInputValue.value}\n                  v-slots={slots}\n                />\n              ),\n              collapsedItems: slots.collapsedItems,\n            }}\n          />\n        </div>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}