{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { defineComponent, computed, createVNode } from 'vue';\nimport { MirrorIcon, RotationIcon, ZoomOutIcon, ZoomInIcon, ImageIcon, DownloadIcon } from 'tdesign-icons-vue-next';\nimport TImageViewerIcon from './ImageModalIcon.mjs';\nimport { Tooltip } from '../../tooltip/index.mjs';\nimport { usePrefixClass } from '../../hooks/useConfig.mjs';\nimport { downloadFile } from '../utils.mjs';\nimport '../../hooks/index.mjs';\nimport { largeNumberToFixed } from '../../_common/js/input-number/large-number.mjs';\nimport { useImagePreviewUrl } from '../../hooks/useImagePreviewUrl.mjs';\nimport { useConfig } from '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-fa52aa21.mjs';\nimport '../../_chunks/dep-4659d73b.mjs';\nimport '../../hooks/tnode.mjs';\nimport '../../_chunks/dep-06dcbf4c.mjs';\nimport '../../_chunks/dep-eca422c3.mjs';\nimport '../../_chunks/dep-bf7257e7.mjs';\nimport '../../_chunks/dep-2b09875b.mjs';\nimport '../../_chunks/dep-cda4f568.mjs';\nimport '../../_chunks/dep-03ad9cda.mjs';\nimport '../../_chunks/dep-7932c2e8.mjs';\nimport '../../_chunks/dep-eae2a67e.mjs';\nimport '../../_chunks/dep-626c497d.mjs';\nimport '../../_chunks/dep-ab4bb9b8.mjs';\nimport '../../_chunks/dep-29ef8419.mjs';\nimport '../../_chunks/dep-d8a34055.mjs';\nimport '../../_chunks/dep-2f6e28a0.mjs';\nimport '../../_chunks/dep-5a17bf21.mjs';\nimport '../../_chunks/dep-bad871d5.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-b91a8171.mjs';\nimport '../../_chunks/dep-1b78414a.mjs';\nimport '../../_chunks/dep-1a4bb2f2.mjs';\nimport '../../_chunks/dep-cc8ebcde.mjs';\nimport '../../_chunks/dep-76958824.mjs';\nimport '../../_chunks/dep-f5579c03.mjs';\nimport '../../_chunks/dep-6dc3d0e1.mjs';\nimport '../../_chunks/dep-d84f19b3.mjs';\nimport '../../_chunks/dep-3c65fae8.mjs';\nimport '../../_chunks/dep-03a7fb6c.mjs';\nimport '../../_chunks/dep-bb899bfd.mjs';\nimport '../../_chunks/dep-5922c8f3.mjs';\nimport '../../_chunks/dep-92f86d1d.mjs';\nimport '../../_chunks/dep-6ab5363f.mjs';\nimport '../../_chunks/dep-e9841b9e.mjs';\nimport '../../_chunks/dep-49aeee3c.mjs';\nimport '../../_chunks/dep-b5bf85f5.mjs';\nimport '../../_chunks/dep-ec0bbd9f.mjs';\nimport '../../_chunks/dep-732f0b7d.mjs';\nimport '../../_chunks/dep-1b9718a2.mjs';\nimport '../../_chunks/dep-e065dc25.mjs';\nimport '../../_chunks/dep-400ec705.mjs';\nimport '../../_chunks/dep-02f9394e.mjs';\nimport '../../_chunks/dep-1725b1c7.mjs';\nimport '../../_chunks/dep-532409c5.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-9ed7da3e.mjs';\nimport '../../_chunks/dep-7f65fc46.mjs';\nimport '../../_chunks/dep-4f2cabb0.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../tooltip/tooltip.mjs';\nimport '../../_chunks/dep-5efe53d1.mjs';\nimport '../../_chunks/dep-593f2b67.mjs';\nimport '../../_chunks/dep-88ae49da.mjs';\nimport '../../_chunks/dep-aeaef131.mjs';\nimport '../../_chunks/dep-88c8d9ed.mjs';\nimport '../../_chunks/dep-4ec29b23.mjs';\nimport '../../tooltip/props.mjs';\nimport '../../popup/props.mjs';\nimport '../../popup/index.mjs';\nimport '../../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../../_chunks/dep-5993931e.mjs';\nimport '../../_chunks/dep-8dfc9324.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../utils/dom.mjs';\nimport '../../utils/easing.mjs';\nimport '../../_common/js/utils/set-style.mjs';\nimport '../../popup/container.mjs';\nimport '../../_chunks/dep-4a990ea3.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../hooks/icon.mjs';\nimport '../../hooks/slot.mjs';\nimport '../../hooks/useCommonClassName.mjs';\nimport '../../hooks/useDefaultValue.mjs';\nimport '../../hooks/useDestroyOnClose.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/useVirtualScroll.mjs';\nimport '../../_common/js/upload/utils.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../../popup/type.mjs';\nimport '../../tooltip/util.mjs';\nimport '../../tooltip/type.mjs';\nimport '../../_chunks/dep-889e457b.mjs';\nvar TImageViewerUtils = defineComponent({\n  name: \"TImageViewerUtils\",\n  props: {\n    scale: Number,\n    onRotate: Function,\n    onZoomIn: Function,\n    onZoomOut: Function,\n    onMirror: Function,\n    onReset: Function,\n    currentImage: {\n      type: Object,\n      \"default\": function _default() {\n        return {};\n      }\n    }\n  },\n  setup: function setup(props) {\n    var classPrefix = usePrefixClass();\n    var imageUrl = computed(function () {\n      return props.currentImage.mainImage;\n    });\n    var _useImagePreviewUrl = useImagePreviewUrl(imageUrl),\n      previewUrl = _useImagePreviewUrl.previewUrl;\n    var _useConfig = useConfig(\"imageViewer\"),\n      globalConfig = _useConfig.globalConfig;\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image-viewer__utils\")\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image-viewer__utils-content\")\n      }, [createVNode(Tooltip, {\n        \"overlayClassName\": \"\".concat(classPrefix.value, \"-image-viewer__utils--tip\"),\n        \"content\": globalConfig.value.mirrorTipText,\n        \"destroyOnClose\": true,\n        \"placement\": \"top\",\n        \"showArrow\": true,\n        \"theme\": \"default\"\n      }, {\n        \"default\": function _default() {\n          return [createVNode(TImageViewerIcon, {\n            \"onClick\": props.onMirror,\n            \"icon\": function icon() {\n              return createVNode(MirrorIcon, {\n                \"size\": \"medium\"\n              }, null);\n            }\n          }, null)];\n        }\n      }), createVNode(Tooltip, {\n        \"overlayClassName\": \"\".concat(classPrefix.value, \"-image-viewer__utils--tip\"),\n        \"content\": globalConfig.value.rotateTipText,\n        \"destroyOnClose\": true,\n        \"placement\": \"top\",\n        \"showArrow\": true,\n        \"theme\": \"default\"\n      }, {\n        \"default\": function _default() {\n          return [createVNode(TImageViewerIcon, {\n            \"onClick\": props.onRotate,\n            \"icon\": function icon() {\n              return createVNode(RotationIcon, {\n                \"size\": \"medium\"\n              }, null);\n            }\n          }, null)];\n        }\n      }), createVNode(TImageViewerIcon, {\n        \"icon\": function icon() {\n          return createVNode(ZoomOutIcon, {\n            \"size\": \"medium\"\n          }, null);\n        },\n        \"onClick\": props.onZoomOut\n      }, null), createVNode(TImageViewerIcon, {\n        \"class\": \"\".concat(classPrefix.value, \"-image-viewer__utils-scale\"),\n        \"size\": \"medium\",\n        \"label\": \"\".concat(largeNumberToFixed(String(props.scale * 100)), \"%\")\n      }, null), createVNode(TImageViewerIcon, {\n        \"icon\": function icon() {\n          return createVNode(ZoomInIcon, {\n            \"size\": \"medium\"\n          }, null);\n        },\n        \"onClick\": props.onZoomIn\n      }, null), createVNode(Tooltip, {\n        \"overlayClassName\": \"\".concat(classPrefix.value, \"-image-viewer__utils--tip\"),\n        \"content\": globalConfig.value.originalSizeTipText,\n        \"destroyOnClose\": true,\n        \"placement\": \"top\",\n        \"showArrow\": true,\n        \"theme\": \"default\"\n      }, {\n        \"default\": function _default() {\n          return [createVNode(\"div\", {\n            \"class\": \"\".concat(classPrefix.value, \"-image-viewer__modal-icon\")\n          }, [createVNode(TImageViewerIcon, {\n            \"icon\": function icon() {\n              return createVNode(ImageIcon, {\n                \"size\": \"medium\"\n              }, null);\n            },\n            \"onClick\": props.onReset\n          }, null)])];\n        }\n      }), props.currentImage.download && createVNode(TImageViewerIcon, {\n        \"icon\": function icon() {\n          return createVNode(DownloadIcon, {\n            \"size\": \"medium\"\n          }, null);\n        },\n        \"onClick\": function onClick() {\n          downloadFile(previewUrl.value);\n        }\n      }, null)])]);\n    };\n  }\n});\nexport { TImageViewerUtils as default };","map":{"version":3,"names":["TImageViewerUtils","defineComponent","name","props","scale","Number","onRotate","Function","onZoomIn","onZoomOut","onMirror","onReset","currentImage","type","Object","_default","setup","classPrefix","usePrefixClass","imageUrl","computed","mainImage","_useImagePreviewUrl","useImagePreviewUrl","previewUrl","_useConfig","useConfig","globalConfig","createVNode","concat","value","Tooltip","mirrorTipText","TImageViewerIcon","icon","MirrorIcon","rotateTipText","RotationIcon","ZoomOutIcon","largeNumberToFixed","String","ZoomInIcon","originalSizeTipText","ImageIcon","download","DownloadIcon","onClick","downloadFile"],"sources":["../../../src/image-viewer/base/ImageViewerUtils.tsx"],"sourcesContent":["import { computed, defineComponent, PropType } from 'vue';\nimport { ImageIcon, ZoomInIcon, ZoomOutIcon, DownloadIcon, MirrorIcon, RotationIcon } from 'tdesign-icons-vue-next';\nimport TImageViewerIcon from './ImageModalIcon';\nimport TToolTip from '../../tooltip';\nimport { usePrefixClass, useConfig } from '../../hooks/useConfig';\nimport { downloadFile } from '../utils';\nimport { useImagePreviewUrl } from '../../hooks';\nimport { ImageInfo } from '../type';\nimport { largeNumberToFixed } from '../../_common/js/input-number/large-number';\n\nexport default defineComponent({\n  name: 'TImageViewerUtils',\n  props: {\n    scale: Number,\n    onRotate: Function as PropType<() => void>,\n    onZoomIn: Function as PropType<() => void>,\n    onZoomOut: Function as PropType<() => void>,\n    onMirror: Function as PropType<() => void>,\n    onReset: Function as PropType<() => void>,\n    currentImage: {\n      type: Object as PropType<ImageInfo>,\n      default() {\n        return {};\n      },\n    },\n  },\n  setup(props) {\n    const classPrefix = usePrefixClass();\n    const imageUrl = computed(() => props.currentImage.mainImage);\n\n    const { previewUrl } = useImagePreviewUrl(imageUrl);\n    const { globalConfig } = useConfig('imageViewer');\n\n    return () => (\n      <div class={`${classPrefix.value}-image-viewer__utils`}>\n        <div class={`${classPrefix.value}-image-viewer__utils-content`}>\n          <TToolTip\n            overlayClassName={`${classPrefix.value}-image-viewer__utils--tip`}\n            content={globalConfig.value.mirrorTipText}\n            destroyOnClose\n            placement=\"top\"\n            showArrow\n            theme=\"default\"\n          >\n            <TImageViewerIcon onClick={props.onMirror} icon={() => <MirrorIcon size=\"medium\" />} />\n          </TToolTip>\n          <TToolTip\n            overlayClassName={`${classPrefix.value}-image-viewer__utils--tip`}\n            content={globalConfig.value.rotateTipText}\n            destroyOnClose\n            placement=\"top\"\n            showArrow\n            theme=\"default\"\n          >\n            <TImageViewerIcon onClick={props.onRotate} icon={() => <RotationIcon size=\"medium\" />} />\n          </TToolTip>\n          <TImageViewerIcon icon={() => <ZoomOutIcon size=\"medium\" />} onClick={props.onZoomOut} />\n          <TImageViewerIcon\n            class={`${classPrefix.value}-image-viewer__utils-scale`}\n            size=\"medium\"\n            label={`${largeNumberToFixed(String(props.scale * 100))}%`}\n          />\n\n          <TImageViewerIcon icon={() => <ZoomInIcon size=\"medium\" />} onClick={props.onZoomIn} />\n          <TToolTip\n            overlayClassName={`${classPrefix.value}-image-viewer__utils--tip`}\n            content={globalConfig.value.originalSizeTipText}\n            destroyOnClose\n            placement=\"top\"\n            showArrow\n            theme=\"default\"\n          >\n            <div class={`${classPrefix.value}-image-viewer__modal-icon`}>\n              <TImageViewerIcon icon={() => <ImageIcon size=\"medium\" />} onClick={props.onReset} />\n            </div>\n          </TToolTip>\n          {props.currentImage.download && (\n            <TImageViewerIcon\n              icon={() => <DownloadIcon size=\"medium\" />}\n              onClick={() => {\n                downloadFile(previewUrl.value);\n              }}\n            />\n          )}\n        </div>\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}