{"ast":null,"code":"/**\n * tdesign v1.10.5\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { onMounted, onBeforeMount } from 'vue';\nimport { i as isString_1 } from '../_chunks/dep-03a7fb6c.mjs';\nimport { on, off } from '../utils/dom.mjs';\nimport { CHECKED_CODE_REG } from '../_common/js/common.mjs';\nimport '../_chunks/dep-eca422c3.mjs';\nimport '../_chunks/dep-bf7257e7.mjs';\nimport '../_chunks/dep-4659d73b.mjs';\nimport '../_chunks/dep-eae2a67e.mjs';\nimport '../_chunks/dep-626c497d.mjs';\nimport '../_chunks/dep-29ef8419.mjs';\nimport '../_chunks/dep-06dcbf4c.mjs';\nimport '../_chunks/dep-2b09875b.mjs';\nimport '../_chunks/dep-cda4f568.mjs';\nimport '../utils/easing.mjs';\nfunction useKeyboard(radioGroupRef, setInnerValue) {\n  var checkRadioInGroup = function checkRadioInGroup(e) {\n    var isCheckedCode = CHECKED_CODE_REG.test(e.key) || CHECKED_CODE_REG.test(e.code);\n    if (isCheckedCode) {\n      e.preventDefault();\n      var inputNode = e.target.querySelector(\"input\");\n      if (!inputNode) return;\n      var data = inputNode.dataset;\n      if (inputNode.checked && data.allowUncheck) {\n        setInnerValue(void 0, {\n          e: e\n        });\n      } else {\n        var value = !isNaN(Number(data.value)) ? Number(data.value) : data.value;\n        value = isString_1(value) && {\n          \"true\": true,\n          \"false\": false\n        }[value] || value;\n        value = isString_1(value) && value[0] === \"'\" ? value.replace(/'/g, \"\") : value;\n        setInnerValue(value, {\n          e: e\n        });\n      }\n    }\n  };\n  onMounted(function () {\n    on(radioGroupRef.value, \"keydown\", checkRadioInGroup);\n  });\n  onBeforeMount(function () {\n    off(radioGroupRef.value, \"keydown\", checkRadioInGroup);\n  });\n}\nexport { useKeyboard as default };","map":{"version":3,"names":["useKeyboard","radioGroupRef","setInnerValue","checkRadioInGroup","e","isCheckedCode","CHECKED_CODE_REG","test","key","code","preventDefault","inputNode","target","querySelector","data","dataset","checked","allowUncheck","value","isNaN","Number","isString_1","replace","onMounted","on","onBeforeMount","off"],"sources":["../../src/radio/useKeyboard.ts"],"sourcesContent":["import { onBeforeMount, onMounted, Ref } from 'vue';\nimport isString from 'lodash/isString';\nimport { off, on } from '../utils/dom';\nimport { CHECKED_CODE_REG } from '../_common/js/common';\n\n/** 键盘操作 */\nexport default function useKeyboard(\n  radioGroupRef: Ref<HTMLElement>,\n  setInnerValue: (value: any, context: { e: Event }) => void,\n) {\n  const checkRadioInGroup = (e: KeyboardEvent) => {\n    const isCheckedCode = CHECKED_CODE_REG.test(e.key) || CHECKED_CODE_REG.test(e.code);\n    if (isCheckedCode) {\n      e.preventDefault();\n      const inputNode = (e.target as HTMLElement).querySelector('input');\n      if (!inputNode) return;\n\n      const data = inputNode.dataset;\n      if (inputNode.checked && data.allowUncheck) {\n        setInnerValue(undefined, { e });\n      } else {\n        // Number\n        let value: number | string | boolean = !isNaN(Number(data.value)) ? Number(data.value) : data.value;\n        // Boolean\n        value = (isString(value) && { true: true, false: false }[value]) || value;\n        // String\n        value = isString(value) && value[0] === \"'\" ? value.replace(/'/g, '') : value;\n        setInnerValue(value, { e });\n      }\n    }\n  };\n\n  onMounted(() => {\n    on(radioGroupRef.value, 'keydown', checkRadioInGroup);\n  });\n\n  onBeforeMount(() => {\n    off(radioGroupRef.value, 'keydown', checkRadioInGroup);\n  });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAMwB,SAAAA,YACtBC,aAAA,EACAC,aACA;EACM,IAAAC,iBAAA,GAAoB,SAApBA,kBAAqBC,CAAqB;IACxC,IAAAC,aAAA,GAAgBC,gBAAA,CAAiBC,IAAK,CAAAH,CAAA,CAAEI,GAAG,CAAK,IAAAF,gBAAA,CAAiBC,IAAK,CAAAH,CAAA,CAAEK,IAAI;IAClF,IAAIJ,aAAe;MACjBD,CAAA,CAAEM,cAAe;MACjB,IAAMC,SAAa,GAAAP,CAAA,CAAEQ,MAAuB,CAAAC,aAAA,CAAc,OAAO;MACjE,IAAI,CAACF,SAAA,EAAW;MAEhB,IAAMG,IAAA,GAAOH,SAAU,CAAAI,OAAA;MACnB,IAAAJ,SAAA,CAAUK,OAAW,IAAAF,IAAA,CAAKG,YAAc;QAC5Bf,aAAA,SAAW;UAAEE,CAAA,EAAAA;QAAE,CAAC;MAChC,CAAO;QAEL,IAAIc,KAAmC,IAACC,KAAM,CAAAC,MAAA,CAAON,IAAK,CAAAI,KAAK,CAAC,IAAIE,MAAO,CAAAN,IAAA,CAAKI,KAAK,IAAIJ,IAAK,CAAAI,KAAA;QAErFA,KAAA,GAAAG,UAAA,CAASH,KAAK,CAAK;UAAE,QAAM,IAAM;UAAA,OAAO;QAAM,EAAEA,KAAW,KAAAA,KAAA;QAE5DA,KAAA,GAAAG,UAAA,CAASH,KAAK,KAAKA,KAAM,QAAO,MAAMA,KAAM,CAAAI,OAAA,CAAQ,IAAM,IAAE,CAAI,GAAAJ,KAAA;QAC1DhB,aAAA,CAAAgB,KAAA,EAAO;UAAEd,CAAA,EAAAA;QAAE,CAAC;MAC5B;IACF;GACF;EAEAmB,SAAA,CAAU,YAAM;IACXC,EAAA,CAAAvB,aAAA,CAAciB,KAAO,aAAWf,iBAAiB;EACtD,CAAC;EAEDsB,aAAA,CAAc,YAAM;IACdC,GAAA,CAAAzB,aAAA,CAAciB,KAAO,aAAWf,iBAAiB;EACvD,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}